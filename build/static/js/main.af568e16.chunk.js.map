{"version":3,"sources":["helpers/firebaseInit.js","pages/Home.js","components/TableComponent.js","helpers/debounce.js","helpers/history.js","helpers/tokens.js","Networking/NetworkLayerCentral.js","Networking/API.js","contexts/AlertDialogContext.js","contexts/UseAlertDialogContext.js","helpers/stringResources.js","contexts/SnackbarContext.js","contexts/UseSnackbarContext.js","pages/Places.js","helpers/priceRange.js","helpers/averageTimeSpent.js","components/AutocompleteChip.js","components/AddSourceDialog.js","components/add_place_components/BasicPlaceInfo.js","components/ReorderablePhotos.js","components/AddImageDialog.js","components/add_place_components/PhotosInfo.js","components/CustomMap.js","components/add_place_components/PlaceLocation.js","components/add_place_components/ParkingLocation.js","components/AddDialog.js","components/add_place_components/PlaceDiscovery.js","components/add_place_components/initialScheduleData.js","components/ReviewCard.js","components/add_place_components/Reviews.js","contexts/AppBarTitleContext.js","contexts/UseAppBarTitleContext.js","components/ScheduleInterval.js","components/DayComponent.js","components/Schedule.js","components/add_place_components/SchedulesWrapper.js","pages/AddPlace.js","components/ApiPlaceCard.js","components/SearchInputComponent.js","pages/ApiPlaces.js","pages/NotFoundPage.js","components/tour_components/TourPlaceComponent.js","components/tour_components/TransportItem.js","components/tour_components/TourPlacesWrapper.js","components/tour_components/PlaceSearch.js","components/tour_components/DayCard.js","components/tour_components/DaysWrapper.js","components/tour_components/TourReducer.js","components/tour_components/TourInfoComponent.js","components/tour_components/TourMap.js","components/tour_components/Tour.js","pages/Tours.js","components/Appbar.js","App.js","contexts/AuthContext.js","pages/LoginPage.js","components/AuthenticatedRoute.js","components/feedback/SnackbarFeedback.js","components/feedback/AlertDialogFeedback.js","index.js"],"names":["app","firebase","apiKey","process","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","withStyles","theme","button","margin","spacing","input","display","props","classes","descendingComparator","a","b","orderBy","EnhancedTableHead","onSelectAllClick","order","numSelected","rowCount","onRequestSort","headCells","checkable","TableHead","TableRow","TableCell","padding","Checkbox","indeterminate","checked","onChange","inputProps","map","headCell","key","id","align","numeric","disablePadding","sortDirection","TableSortLabel","active","direction","onClick","property","event","label","className","visuallyHidden","useToolbarStyles","makeStyles","root","paddingLeft","paddingRight","highlight","palette","type","color","secondary","main","backgroundColor","lighten","light","text","primary","dark","title","flex","EnhancedTableToolbar","changePageCallback","keyword","setKeyword","customToolbarElements","debouncedSearch","value","delay","useState","debouncedValue","setDebouncedValue","useEffect","handler","setTimeout","clearTimeout","useDebounce","Toolbar","clsx","Typography","variant","component","Tooltip","IconButton","aria-label","style","alignItems","TextField","target","useStyles","width","paper","marginBottom","table","minWidth","border","clip","height","overflow","position","top","centerCell","textAlign","rowNotPublished","rowNotVerified","rowBasic","TableComponent","pagingInfo","data","updateCallback","removeCallback","isLoading","React","setOrder","setOrderBy","selected","setSelected","page","setPage","dense","rowsPerPage","setRowsPerPage","emptyRows","Math","min","length","Paper","LinearProgress","TableContainer","Table","aria-labelledby","size","newSelecteds","n","name","TableBody","array","comparator","stabilizedThis","el","index","sort","stableSort","getComparator","slice","row","isItemSelected","indexOf","labelId","rowStyle","undefined","hover","role","aria-checked","tabIndex","selectedIndex","newSelected","concat","handleCheckboxChange","header","isId","scope","fontSize","colSpan","noWrap","TablePagination","rowsPerPageOptions","count","total","pageNum","onChangePage","newPage","onChangeRowsPerPage","parseInt","console","log","history","getAccessToken","Cookies","get","isAuthenticated","request","options","contentType","client","axios","create","baseURL","headers","interceptors","response","use","error","originalRequest","config","status","auth","currentUser","_retry","Promise","reject","getIdToken","then","token","Authorization","set","onSuccess","onError","debug","push","message","catch","RequestType","getRequest","path","urlData","url","method","postRequest","postMultipartRequest","formData","API","Tour","insertTour","getTour","urlParams","updateTour","getAllToursAdmin","removeTour","SourcePlace","updateSourcesForPlace","Source","getSources","addSource","Places","getAllPlaces","insertPlace","updatePlace","getPlaceById","getAllPlacesAdmin","searchApiPlaces","removePlace","Tags","getAllTags","addTag","params","Categories","addCategory","getAllCategories","Photos","addPhoto","uploadPhoto","Parking","getParkingByLocation","insertNewParking","TagsPlace","updateTagsForPlace","CategoriesPlace","updateCategoriesForPlace","ParkingPlace","updateParkingForPlace","PhotoPlace","updatePhotoForPlace","Schedule","updateScheduleForPlace","Reviews","getPlaceReviews","AlertDialogContext","createContext","alertConfig","addAlertConfig","removeAlertConfig","AlertDialogProvider","children","setAlertConfig","contextValue","actions","onClose","Provider","UseAlertDialogContext","useContext","Strings","DIALOG_PLACE_PUBLISH_TITLE","DIALOG_PLACE_PUBLISH_MESSAGE","DIALOG_PLACE_UNPUBLISH_MESSAGE","DIALOG_PLACE_INSERT_TITLE","DIALOG_PLACE_INSERT","DIALOG_PLACE_UPDATE_TITLE","DIALOG_PLACE_UPDATE","DIALOG_PLACE_VERIFY_TITLE","DIALOG_PLACE_VERIFY_MESSAGE","DIALOG_PLACE_DELETE_TITLE","DIALOG_PLACE_DELETE_MESSAGE","DIALOG_TOUR_DELETE_TITLE","DIALOG_TOUR_DELETE_MESSAGE","SNACKBAR_PLACE_INSERTED_SUCCESS","SNACKBAR_PLACE_REMOVE_SUCCESS","SNACKBAR_TOUR_INSERTED_SUCCESS","SNACKBAR_TOUR_REMOVE_SUCCESS","SNACKBAR_ERROR","SNACKBAR_CHANGES_SAVED","SnackbarContext","addConfig","removeConfig","SnackbarProvider","setConfig","success","UseSnackbarContext","sortingButtons","flexDirection","buttonsDiv","justifyContent","content","breakpoints","down","up","setData","pageData","setPageData","setIsLoading","filterLabel","filter","filterName","filterOptions","setFilterOptions","filterQuery","setFilterQuery","parseData","placesData","list","anchorEl","setAnchorEl","open","Boolean","handleClick","currentTarget","p","action","tmp","placeId","aria-describedby","Popover","anchorOrigin","vertical","horizontal","transformOrigin","FormControlLabel","control","filters","fq","join","filterOptionsChanged","Box","Button","startIcon","priceRange","averageTimeSpent","autoComplete","chip","flexWrap","listStyle","autoCompleteChipContainer","setOptions","selectedOptions","setSelectedOptions","getCurrentVal","setCurrentVal","firstLoad","setFirstLoad","found","row1","JSON","stringify","option","Chip","onDelete","item","Autocomplete","disableClearable","getOptionLabel","renderInput","closeButton","right","grey","setDialogOpen","setText","setUrl","setError","Dialog","fullWidth","DialogTitle","DialogContent","dividers","ev","marginTop","DialogActions","autoFocus","validateInput","placeInfo","setPlaceInfo","selectedSources","setSelectedSources","updatePlaceInfo","newValue","place","Object","assign","valuetext","setAvailableSources","dialogOpen","availableSources","val","required","placeholder","e","InputLabelProps","shrink","multiline","rows","Slider","marginLeft","defaultValue","getAriaValueText","step","max","marks","FormControl","InputLabel","Select","native","Photo","onItemDelete","photo","left","styles","imgContainer","imgStyle","Card","CardMedia","paddingTop","image","src","CardActions","disableSpacing","SortablePhoto","SortableElement","SortableGallery","SortableContainer","items","photos","renderImage","ReorderablePhotos","setPhotos","srcName","keyName","modifiedData","toString","distance","onSortEnd","oldIndex","newIndex","arrayMove","axis","acceptedFileFormats","dropzoneArea","onCloseCallback","onFinishCallback","loading","selectedFiles","setSelectedFiles","acceptedFiles","maxFileSize","dropzoneProps","disabled","filesLimit","onDrop","all","imagefile","FormData","append","finally","outline","addImageDialogOpen","setAddImageDialogOpen","files","handleAddPhoto","autocomplete","borderBottom","locationData","setLocationData","mapHeight","selectedParkingCallback","changedParkingMarkerCallback","addParkingCallback","useFunction","callback","ref","useRef","current","useCallback","apply","this","arguments","Geocode","setApiKey","enableDebug","selectParkingHandler","addNewParkingHandler","geocodeFromLatLng","newLat","newLng","onMarkerLocationChanged","onParkingDataChanged","fromLatLng","address","results","formatted_address","addressArray","address_components","city","getCity","country","getCountry","changeLocationData","latitude","longitude","i","types","long_name","MyMapComponent","compose","withProps","containerElement","mapElement","withStateHandlers","infoWindow","show","toggleDraggableInfoWindow","draggableMarkerLocation","withGoogleMap","defaultZoom","center","lat","markerLocation","lng","defaultCenter","visible","draggable","onDragEnd","markerChanger","onParkingDataChange","latLng","onCloseClick","onToggleOpen","infoWindows","parkingData","location","parseFloat","parkingId","icon","showInfo","handleKeyPress","onMarkerLocationChange","which","keyCode","test","fromAddress","geometry","split","FullMap","parking","iw","onKeyPress","onPlaceSelected","latitudeValue","longitudeValue","navigator","geolocation","getCurrentPosition","coords","alert","useMemo","parkingMarkerData","setParkingMarkerData","allSelectedParkingData","setAllSelectedParkingData","parkingExists","markerData","getClosestParking","parkingDataChanged","SortableItem","elevation","SortableList","oldArray","textFieldLabel","description","selectedTags","setSelectedTags","selectedCategories","setSelectedCategories","dialogAddTagOpen","setDialogAddTagOpen","dialogAddCategoryOpen","setDialogAddCategoryOpen","availableCategories","setAvailableCategories","availableTags","setAvailableTags","AutocompleteChip","newTag","tagId","newCat","categoryId","initialScheduleData","openDay","closeDay","openTime","closeTime","marginRight","ReviewCard","review","CardContent","Avatar","alt","photoUrl","surname","Rating","rating","readOnly","upvotes","moment","timeAdded","format","reviewsInfo","reviews","overflowX","setReviews","filterBy","setFilterBy","getReviewsForPlace","old","debounceScroll","debounce","round","scrollWidth","scrollLeft","clientWidth","totalReviews","handleScrollDebounced","handleClose","Fragment","overallStarRating","precision","RadioGroup","Radio","onScroll","persist","handleScroll","AppBarTitleContext","setTitle","AppBarTitleProvider","UseAppBarTitleContext","flexFlow","picker","intervalRightSide","intervalLeftSide","intervals","setIntervals","currentInterval","lastAccommodation","lastAccommodationEnabled","setLastAccommodationEnabled","lastAccommodationTime","setLastAccommodationTime","getCloseDay","currentPeriod","isBefore","handleDelete","oldIntervals","useTheme","largeScreen","useMediaQuery","only","TimePicker","ampm","InputProps","disableUnderline","state","scheduleData","setScheduleData","periods","Divider","pickerStyle","headerLeft","setPeriods","handleIntervalChange","newIntervals","oldPeriods","filtered","oldData","schedule","scheduleDefault","DatePicker","views","from","to","generateWeekdayViews","isScheduleEnabled","setIsScheduleEnabled","Switch","float","paperContent","loader","bottom","match","website","phoneNumber","hasSchedule","isPublic","isVerified","source","price","sources","setSources","setPlaceId","firstTimeLoading","setFirstTimeLoading","checkErrors","ColorButton","getContrastText","green","formFeedback","saveChanges","formPlaceInfo","plc","updateAll","updateTagsData","updatePhotoData","updateCategoriesData","updateParkingData","updateSchedule","updateSources","err","er","tags","categories","responses","CircularProgress","obj","CategoriesDisplay","SubheaderDisplay","media","expand","transform","transition","transitions","duration","shortest","expandOpen","avatar","red","placeData","renderActionArea","CardHeader","subheader","substring","iconButton","divider","SearchInputComponent","hint","searchCallback","debounceInput","debouncedInput","InputBase","orientation","topBar","zIndex","searchBox","placeApiCard","isLoadingData","setIsLoadingData","word","query","encodeURI","elementType","isFitWidth","disableImagesLoaded","updateOnEachImageLoad","boxSizing","Copyright","Date","getFullYear","minHeight","footer","cardRoot","details","cover","addParkingWrapper","elementData","addTransportCallback","displayNoTransportWarning","Alert","severity","transportTypes","transportSelectWrapper","transportSelect","transportId","transportChangeCallback","transportRemoveCallback","currentTransport","setCurrentTransport","NativeSelect","transport","TourPlaceSortable","removePlaceCallback","tourPlaceComponent","TransportItemSortable","currentDay","removeElementCallback","tourInfo","shouldDisplayNoTransportWarning","elements","days","tour","ElementType","elementIdentifier","tourInfoReducer","errorInfo","setErrorInfo","day","shortid","generate","searchInputComponent","placeCard","addPlaceCallback","apiPlacesFound","setApiPlacesFound","localPlacesFound","setLocalPlacesFound","apiPlacesLoading","setApiPlacesLoading","localPlacesLoading","setLocalPlacesLoading","placeType","genProps","mappedPlaces","forEach","generatePlaceCards","radioButtonArea","cardArea","descriptionInput","headerWrap","onSelectCallback","handleRemoveDay","updateDescriptionGlobally","DayCardSortable","dayInfo","removeDayCallback","addDayButton","footerWrapper","setCurrentDay","removeDay","TourDataReducer","findIndex","splice","nameField","descriptionField","errors","titleMissing","shouldDisplayTitleMissingError","showErrors","helperText","sampleTourData","rightLayout","overflowY","leftLayout","actionsArea","tourId","setTourId","useReducer","dispatchTourInfo","handleAddPlaceClick","loadData","aggregatedDays","aggregatedElements","aggregatedPlace","fk_transportId","aggregatedDay","aggregatedTour","handleSave","containsErrors","keys","keyIndex","element","j","tourDaysComponents","getAllTours","root1","background","appBar","easing","sharp","leavingScreen","appBarShift","easeOut","enteringScreen","menuButton","hide","drawer","flexShrink","drawerPaper","drawerHeader","mixins","toolbar","contentShift","Appbar","setOpen","useLocation","handleDrawerClose","handleListItemClick","pathname","go","CssBaseline","AppBar","edge","Drawer","anchor","List","ListItem","Link","ListItemText","exact","Home","Tours","AddPlace","ApiPlaces","Redirect","App","utils","DateFnsUtils","Component","AuthContext","AuthProvider","setCurrentUser","onAuthStateChanged","user","form","submit","loaderMain","AuthenticatedRoute","rest","Route","render","routeProps","SnackbarFeedback","Snackbar","autoHideDuration","AlertDialogFeedback","remove","DialogContentText","require","ReactDOM","email","setEmail","password","setPassword","handleLogin","signInWithEmailAndPassword","idToken","Container","maxWidth","mt","gutterBottom","document","getElementById"],"mappings":"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","file":"static/js/main.af568e16.chunk.js","sourcesContent":["import * as firebase from \"firebase/app\";\r\nimport \"firebase/auth\";\r\n\r\nconst app = firebase.initializeApp({\r\n    apiKey: process.env.REACT_APP_FIREBASE_KEY,\r\n    authDomain: process.env.REACT_APP_FIREBASE_DOMAIN,\r\n    databaseURL: process.env.REACT_APP_FIREBASE_DATABASE,\r\n    projectId: process.env.REACT_APP_FIREBASE_PROJECT_ID,\r\n    storageBucket: process.env.REACT_APP_FIREBASE_STORAGE_BUCKET,\r\n    messagingSenderId: process.env.REACT_APP_FIREBASE_SENDER_ID,\r\n    appId: process.env.REACT_APP_FIREBASE_APP_ID\r\n});\r\n\r\nexport default app;","import React, {useEffect, useState} from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\nimport app from \"../helpers/firebaseInit\";\r\nimport Cookies from \"js-cookie\";\r\n\r\nconst styles = theme => ({\r\n    button: {\r\n        margin: theme.spacing(1)\r\n    },\r\n    input: {\r\n        display: \"none\"\r\n    }\r\n});\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst Home = props => {\r\n    const { classes } = props;\r\n\r\n    return (\r\n        <div>\r\n\r\n        </div>\r\n    );\r\n};\r\n\r\nHome.propTypes = {\r\n    classes: PropTypes.object.isRequired\r\n};\r\n\r\nexport default withStyles(styles)(Home);","import React, {useEffect, useState} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport clsx from 'clsx';\r\nimport { lighten, makeStyles } from '@material-ui/core/styles';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TablePagination from '@material-ui/core/TablePagination';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport TableSortLabel from '@material-ui/core/TableSortLabel';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport EditIcon from '@material-ui/icons/Edit'\r\nimport TextField from \"@material-ui/core/TextField\"\r\nimport useDebounce from \"../helpers/debounce\";\r\nimport LinearProgress from \"@material-ui/core/LinearProgress\";\r\nimport Chip from \"@material-ui/core/Chip\";\r\n\r\nfunction descendingComparator(a, b, orderBy) {\r\n    if (b[orderBy] < a[orderBy]) {\r\n        return -1;\r\n    }\r\n    if (b[orderBy] > a[orderBy]) {\r\n        return 1;\r\n    }\r\n    return 0;\r\n}\r\n\r\nfunction getComparator(order, orderBy) {\r\n    return order === 'desc'\r\n        ? (a, b) => descendingComparator(a, b, orderBy)\r\n        : (a, b) => -descendingComparator(a, b, orderBy);\r\n}\r\n\r\nfunction stableSort(array, comparator) {\r\n    const stabilizedThis = array.map((el, index) => [el, index]);\r\n    stabilizedThis.sort((a, b) => {\r\n        const order = comparator(a[0], b[0]);\r\n        if (order !== 0) return order;\r\n        return a[1] - b[1];\r\n    });\r\n    return stabilizedThis.map((el) => el[0]);\r\n}\r\n\r\n\r\n\r\nfunction EnhancedTableHead(props) {\r\n    const { classes, onSelectAllClick, order, orderBy, numSelected, rowCount, onRequestSort, headCells, checkable} = props;\r\n    const createSortHandler = (property) => (event) => {\r\n        onRequestSort(event, property);\r\n    };\r\n\r\n    return (\r\n        <TableHead>\r\n            <TableRow>\r\n\r\n                {checkable ? <TableCell padding=\"checkbox\">\r\n                    <Checkbox\r\n                        indeterminate={numSelected > 0 && numSelected < rowCount}\r\n                        checked={rowCount > 0 && numSelected === rowCount}\r\n                        onChange={onSelectAllClick}\r\n                        inputProps={{ 'aria-label': 'select all desserts' }}\r\n                    />\r\n                </TableCell> : null}\r\n                {headCells.map((headCell) => (\r\n                    <TableCell\r\n                        key={headCell.id}\r\n                        align={headCell.numeric ? 'right'  : 'left' }\r\n                        padding={headCell.disablePadding ? 'none' : 'default'}\r\n                        sortDirection={orderBy === headCell.id ? order : false}\r\n                    >\r\n                        <TableSortLabel\r\n                            active={orderBy === headCell.id}\r\n                            direction={orderBy === headCell.id ? order : 'asc'}\r\n                            onClick={createSortHandler(headCell.id)}\r\n                        >\r\n                            {headCell.label}\r\n                            {orderBy === headCell.id ? (\r\n                                <span className={classes.visuallyHidden}>\r\n                  {order === 'desc' ? 'sorted descending' : 'sorted ascending'}\r\n                </span>\r\n                            ) : null}\r\n                        </TableSortLabel>\r\n                    </TableCell>\r\n                ))}\r\n            </TableRow>\r\n        </TableHead>\r\n    );\r\n}\r\n\r\nEnhancedTableHead.propTypes = {\r\n    classes: PropTypes.object.isRequired,\r\n    numSelected: PropTypes.number.isRequired,\r\n    onRequestSort: PropTypes.func.isRequired,\r\n    onSelectAllClick: PropTypes.func.isRequired,\r\n    order: PropTypes.oneOf(['asc', 'desc']).isRequired,\r\n    orderBy: PropTypes.string.isRequired,\r\n    rowCount: PropTypes.number.isRequired,\r\n    headCells: PropTypes.object.isRequired,\r\n    checkable: PropTypes.bool.isRequired\r\n};\r\n\r\n\r\n\r\n\r\n\r\nconst useToolbarStyles = makeStyles((theme) => ({\r\n    root: {\r\n        paddingLeft: theme.spacing(2),\r\n        paddingRight: theme.spacing(1),\r\n    },\r\n    highlight:\r\n        theme.palette.type === 'light'\r\n            ? {\r\n                color: theme.palette.secondary.main,\r\n                backgroundColor: lighten(theme.palette.secondary.light, 0.85),\r\n            }\r\n            : {\r\n                color: theme.palette.text.primary,\r\n                backgroundColor: theme.palette.secondary.dark,\r\n            },\r\n    title: {\r\n        flex: '1 1 100%',\r\n    },\r\n}));\r\n\r\nconst EnhancedTableToolbar = (props) => {\r\n    const classes = useToolbarStyles();\r\n    const { numSelected, title, changePageCallback, keyword, setKeyword, customToolbarElements} = props;\r\n\r\n\r\n    const debouncedSearch = useDebounce(keyword, 300);\r\n\r\n\r\n    useEffect( () => {\r\n            changePageCallback(1,keyword)\r\n        },\r\n        [debouncedSearch]\r\n    );\r\n\r\n\r\n    return (\r\n        <Toolbar\r\n            className={clsx(classes.root, {\r\n                [classes.highlight]: numSelected > 0,\r\n            })}\r\n        >\r\n            {numSelected > 0 ? (\r\n                <Typography className={classes.title} color=\"inherit\" variant=\"subtitle1\" component=\"div\">\r\n                    {numSelected} selected\r\n                </Typography>\r\n            ) : (\r\n                <Typography className={classes.title} variant=\"h6\" id=\"tableTitle\" component=\"div\">\r\n                    {title}\r\n                </Typography>\r\n            )}\r\n            {numSelected > 0 ? (\r\n                <Tooltip title=\"Delete\">\r\n                    <IconButton aria-label=\"delete\">\r\n                        <DeleteIcon />\r\n                    </IconButton>\r\n                </Tooltip>\r\n            ) : <div style={{display: \"flex\", alignItems: \"center\"}}>\r\n                <TextField id=\"standard-basic\" label=\"Search\" onChange={ event =>{setKeyword(event.target.value)}}/>\r\n                {!!customToolbarElements ? customToolbarElements : null}\r\n            </div>}\r\n        </Toolbar>\r\n    );\r\n};\r\n\r\nEnhancedTableToolbar.propTypes = {\r\n    numSelected: PropTypes.number.isRequired,\r\n    title: PropTypes.string.isRequired\r\n};\r\n\r\n\r\n\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        width: '100%',\r\n    },\r\n    paper: {\r\n        width: '100%',\r\n        marginBottom: theme.spacing(2),\r\n    },\r\n    table: {\r\n        minWidth: 750,\r\n    },\r\n    visuallyHidden: {\r\n        border: 0,\r\n        clip: 'rect(0 0 0 0)',\r\n        height: 1,\r\n        margin: -1,\r\n        overflow: 'hidden',\r\n        padding: 0,\r\n        position: 'absolute',\r\n        top: 20,\r\n        width: 1,\r\n    },\r\n    centerCell: {\r\n        textAlign: \"center\",\r\n        width: '100%'\r\n    },\r\n    rowNotPublished:{\r\n        backgroundColor: \"#ffcdd2\"\r\n    },\r\n    rowNotVerified:{\r\n        backgroundColor: \"#fff9c4\"\r\n    },\r\n    rowBasic: {\r\n        backgroundColor: \"#FFFFFF\"\r\n    }\r\n\r\n}));\r\n\r\nexport default function TableComponent({title, headCells, pagingInfo, data, checkable, changePageCallback, updateCallback, removeCallback, id, isLoading, customToolbarElements}) {\r\n\r\n    TableComponent.propTypes = {\r\n        title: PropTypes.string.isRequired,\r\n        headCells: PropTypes.object.isRequired,\r\n        pagingInfo: PropTypes.object,\r\n        data: PropTypes.object.isRequired,\r\n        checkable: PropTypes.bool.isRequired,\r\n        changePageCallback: PropTypes.func,\r\n        updateCallback: PropTypes.func,\r\n        removeCallback: PropTypes.func,\r\n        id: PropTypes.string.isRequired,\r\n        isLoading: PropTypes.bool,\r\n        customToolbarElements: PropTypes.object\r\n    };\r\n\r\n\r\n\r\n    const classes = useStyles();\r\n    const [order, setOrder] = React.useState('asc');\r\n    const [orderBy, setOrderBy] = React.useState('calories');\r\n    const [selected, setSelected] = React.useState([]);\r\n    const [page, setPage] = React.useState(0);\r\n    const [dense, setDense] = React.useState(false);\r\n    const [rowsPerPage, setRowsPerPage] = React.useState(10);\r\n    const [keyword, setKeyword] = useState('');\r\n\r\n\r\n    const handleRequestSort = (event, property) => {\r\n        const isAsc = orderBy === property && order === 'asc';\r\n        setOrder(isAsc ? 'desc' : 'asc');\r\n        setOrderBy(property);\r\n    };\r\n\r\n    const handleSelectAllClick = (event) => {\r\n        if (event.target.checked) {\r\n            const newSelecteds = data.map((n) => n.name);\r\n            setSelected(newSelecteds);\r\n            return;\r\n        }\r\n        setSelected([]);\r\n    };\r\n\r\n    const handleCheckboxChange = (event, name) =>{\r\n\r\n            const selectedIndex = selected.indexOf(name);\r\n            let newSelected = [];\r\n\r\n            if (selectedIndex === -1) {\r\n                newSelected = newSelected.concat(selected, name);\r\n            } else if (selectedIndex === 0) {\r\n                newSelected = newSelected.concat(selected.slice(1));\r\n            } else if (selectedIndex === selected.length - 1) {\r\n                newSelected = newSelected.concat(selected.slice(0, -1));\r\n            } else if (selectedIndex > 0) {\r\n                newSelected = newSelected.concat(\r\n                    selected.slice(0, selectedIndex),\r\n                    selected.slice(selectedIndex + 1),\r\n                );\r\n            }\r\n\r\n            setSelected(newSelected);\r\n\r\n    };\r\n\r\n    const handleClick = (event, name) => {\r\n\r\n    };\r\n\r\n\r\n    const handleChangePage = (event, newPage) => {\r\n        pagingInfo !==null ? changePageCallback(newPage + 1, keyword) : setPage(newPage)\r\n    };\r\n\r\n    const handleChangeRowsPerPage = (event) => {\r\n        setRowsPerPage(parseInt(event.target.value, 10));\r\n        setPage(0);\r\n        console.log(\"handleChangeRowsPerPage\")\r\n\r\n    };\r\n\r\n    const isSelected = (name) => selected.indexOf(name) !== -1;\r\n\r\n    const emptyRows = rowsPerPage - Math.min(rowsPerPage, data.length - page * rowsPerPage);\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            <Paper className={classes.paper}>\r\n                {isLoading ? <LinearProgress/> : null }\r\n                <EnhancedTableToolbar\r\n                    title={title}\r\n                    numSelected={selected.length}\r\n                    changePageCallback={changePageCallback}\r\n                    keyword={keyword}\r\n                    setKeyword={setKeyword}\r\n                    customToolbarElements={customToolbarElements}\r\n                />\r\n                 <TableContainer>\r\n                    <Table\r\n                        className={classes.table}\r\n                        aria-labelledby=\"tableTitle\"\r\n                        size={dense ? 'small' : 'medium'}\r\n                        aria-label=\"enhanced table\"\r\n                    >\r\n                        <EnhancedTableHead\r\n                            classes={classes}\r\n                            numSelected={selected.length}\r\n                            order={order}\r\n                            orderBy={orderBy}\r\n                            onSelectAllClick={handleSelectAllClick}\r\n                            onRequestSort={handleRequestSort}\r\n                            rowCount={data.length}\r\n                            headCells={headCells}\r\n                            checkable={checkable}\r\n                        />\r\n\r\n\r\n                        <TableBody>\r\n                            {stableSort(data, getComparator(order, orderBy))\r\n                                .slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage)\r\n                                .map((row, index) => {\r\n\r\n                                    const isItemSelected = isSelected(row.name);\r\n                                    const labelId = `enhanced-table-checkbox-${index}`;\r\n\r\n                                    const rowStyle = row['isVerified'] !== undefined  && row['isVerified'] === false ? classes.rowNotVerified :\r\n                                        row['isPublic'] !== undefined && row['isPublic'] === false ? classes.rowNotPublished :  classes.rowBasic;\r\n\r\n                                    return (\r\n                                        <TableRow\r\n                                            className={rowStyle}\r\n                                            hover\r\n                                            onClick={(event) => handleClick(event, row.name)}\r\n                                            role=\"checkbox\"\r\n                                            aria-checked={isItemSelected}\r\n                                            tabIndex={-1}\r\n                                            key={row[id]}\r\n                                            selected={isItemSelected}\r\n                                        >\r\n                                            {checkable ? <TableCell padding=\"checkbox\">\r\n                                                <Checkbox\r\n                                                    checked={isItemSelected}\r\n                                                    onChange={(event)=>handleCheckboxChange(event, row.name)}\r\n                                                    inputProps={{ 'aria-labelledby': labelId }}\r\n                                                />\r\n                                            </TableCell> : null}\r\n\r\n                                            {headCells.map(header=>{\r\n                                                if(header.isId){\r\n                                                    return <TableCell component=\"th\" id={labelId} scope=\"row\" >\r\n                                                            {row[header.id]}\r\n                                                        </TableCell>\r\n                                                }else if(header.id === 'actions' ){\r\n                                                        return <TableCell >\r\n                                                            <div>\r\n                                                                <IconButton onClick={()=>updateCallback(row[id])} size=\"small\" aria-label=\"edit\" >\r\n                                                                    <EditIcon fontSize=\"small\" />\r\n                                                                </IconButton>\r\n\r\n                                                                <IconButton size=\"small\" aria-label=\"delete\" >\r\n                                                                    <DeleteIcon onClick={()=>removeCallback(row[id])} fontSize=\"small\" />\r\n                                                                </IconButton>\r\n                                                            </div>\r\n                                                            </TableCell>\r\n                                                }else{\r\n                                                    return <TableCell align={header.numeric ? \"right\" : \"left\" }>{row[header.id]}</TableCell>\r\n                                                }\r\n\r\n                                            })}\r\n                                        </TableRow>\r\n                                    );\r\n                                })}\r\n                            {emptyRows > 0 && (\r\n                                <TableRow style={{ height: (dense ? 33 : 53) * emptyRows}}>\r\n\r\n                                    {data.length > 0 ? <TableCell colSpan={6} /> : !isLoading &&\r\n                                        <TableCell colSpan={6} className={classes.centerCell}>\r\n                                            <Typography variant=\"h6\" noWrap>\r\n                                                No results\r\n                                            </Typography>\r\n                                        </TableCell>}\r\n                                </TableRow>\r\n                            )}\r\n                        </TableBody>\r\n                    </Table>\r\n                </TableContainer>\r\n                <TablePagination\r\n                    rowsPerPageOptions={[10]}\r\n                    component=\"div\"\r\n                    count={pagingInfo!==null ? pagingInfo.total : data.length}\r\n                    rowsPerPage={rowsPerPage}\r\n                    page={pagingInfo!==null ? pagingInfo.pageNum-1 : page}\r\n                    onChangePage={handleChangePage}\r\n                    onChangeRowsPerPage={handleChangeRowsPerPage}\r\n                />\r\n            </Paper>\r\n        </div>\r\n    );\r\n}","import React, { useState, useEffect } from 'react';\r\n\r\n//Saltinis - https://dev.to/gabe_ragland/debouncing-with-react-hooks-jci\r\nexport default function useDebounce(value, delay) {\r\n    const [debouncedValue, setDebouncedValue] = useState(value);\r\n\r\n    useEffect(\r\n        () => {\r\n            const handler = setTimeout(() => {\r\n                setDebouncedValue(value);\r\n            }, delay);\r\n\r\n            return () => {\r\n                clearTimeout(handler);\r\n            };\r\n        },\r\n\r\n        [value]\r\n    );\r\n\r\n    return debouncedValue;\r\n}","import { createBrowserHistory as history} from 'history';\r\n\r\nexport default history();","import Cookies from 'js-cookie'\r\n\r\nexport const getAccessToken = () => Cookies.get('access_token');\r\nexport const isAuthenticated = () => !!getAccessToken();","import React from \"react\";\r\nimport axios from \"axios\"\r\nimport history from \"../helpers/history\";\r\nimport {getAccessToken} from \"../helpers/tokens\";\r\nimport Cookies from \"js-cookie\";\r\nimport app from \"../helpers/firebaseInit\";\r\n\r\nconst request = async function (options, contentType) {\r\n\r\n    const client = axios.create({\r\n        baseURL: false ? \"http://localhost:8080/\" : \"https://www.traveldirection.ax.lt:8080/\",\r\n        headers: {\r\n            'Content-Type': (contentType == null) ? 'application/json' : contentType,\r\n            'Accept': 'application/json',\r\n            'Access-Control-Allow-Origin': '*',\r\n            \"Authorization\": getAccessToken()\r\n        },\r\n    });\r\n\r\n\r\n    // Add a response interceptor\r\n    client.interceptors.response.use(function (response) {\r\n        return response;\r\n    }, function (error) {\r\n        // Any status codes that falls outside the range of 2xx cause this function to trigger\r\n        // Do something with response error\r\n        const originalRequest = error.config;\r\n        const status = error.response.status;\r\n        if (!!app.auth().currentUser  &&\r\n            (status === 401 || status === 403) &&\r\n            originalRequest._retry === undefined\r\n        ) {\r\n            //console.log(\"Users token has expired!\");\r\n            return app.auth().currentUser.getIdToken(true).then(token => {\r\n                //console.log(\"Retrieving new token and making the same request!\");\r\n                originalRequest._retry = true;\r\n                originalRequest.headers.Authorization = token;\r\n                Cookies.set(\"access_token\", token);\r\n                return axios(originalRequest)\r\n            });\r\n        }\r\n        return Promise.reject(error);\r\n    });\r\n\r\n    const onSuccess = function (response) {\r\n        console.log('Request Successful!', response);\r\n        return response.data;\r\n    };\r\n\r\n    const onError = function (error) {\r\n        console.debug('Request Failed:', error.config);\r\n        if (error.response) {\r\n            console.debug('Status:', error.response.status);\r\n            if (error.response.status === 403) {\r\n                history.push(\"/login\")\r\n            }\r\n            console.debug('Data:', error.response.data);\r\n            console.debug('Headers:', error.response.headers);\r\n        } else {\r\n            console.debug('Error Message:', error.message);\r\n        }\r\n        return Promise.reject(error.response || error.message);\r\n    };\r\n\r\n    return client(options)\r\n        .then(onSuccess)\r\n        .catch(onError);\r\n};\r\n\r\nconst getRequest = function (path, urlData = \"\") {\r\n    return request({\r\n        url: path + urlData,\r\n        method: 'GET'\r\n    });\r\n};\r\n\r\nconst postRequest = function (path, data, urlData = \"\") {\r\n    return request({\r\n        url: path + urlData,\r\n        method: 'POST',\r\n        data: data\r\n    });\r\n};\r\n\r\nconst postMultipartRequest = function (path, formData) {\r\n    return request({\r\n        url: path,\r\n        method: 'POST',\r\n        data: formData\r\n    }, 'multipart/form-data' /*'application/x-www-form-urlencoded'*/);\r\n};\r\n\r\nconst RequestType = {\r\n    getRequest, postRequest, postMultipartRequest\r\n};\r\n\r\nexport default RequestType\r\n\r\n\r\n","import RequestType from '../Networking/NetworkLayerCentral'\r\n\r\n//Places\r\nconst getAllPlaces = (urlParams) => RequestType.getRequest(\"api/v1/place/search\", urlParams);\r\nconst getAllPlacesAdmin = (urlParams) => RequestType.getRequest(\"api/v1/place/searchadmin\", urlParams);\r\n\r\nconst insertPlace = (data) => RequestType.postRequest(\"api/v1/place/insert\",data);\r\nconst updatePlace = (data) => RequestType.postRequest(\"api/v1/place/update\", data);\r\nconst getPlaceById = (urlParams) => RequestType.getRequest(\"api/v1/place/getplace\", urlParams);\r\nconst searchApiPlaces = (urlParams) => RequestType.getRequest(\"api/v1/placeApi/search\", urlParams);\r\nconst removePlace = (urlParams) => RequestType.getRequest(\"api/v1/place/delete\", urlParams);\r\n\r\nconst Places = {getAllPlaces, insertPlace, updatePlace, getPlaceById,getAllPlacesAdmin,searchApiPlaces, removePlace};\r\n\r\n//Tags\r\nconst getAllTags = () => RequestType.getRequest(\"api/v1/tags/all\");\r\nconst addTag = (params) => RequestType.postRequest(\"api/v1/tags/insert\", params);\r\nconst Tags = {getAllTags, addTag};\r\n\r\n//Category\r\nconst addCategory = (params) => RequestType.postRequest(\"api/v1/categories/insert\", params);\r\nconst getAllCategories = () => RequestType.getRequest(\"api/v1/categories/all\");\r\nconst Categories = {addCategory, getAllCategories};\r\n\r\n//Photo\r\nconst addPhoto = (params) => RequestType.postRequest(\"api/v1/photo/insert\", params);\r\nconst uploadPhoto = (params) => RequestType.postMultipartRequest(\"api/v1/photo/upload\", params);\r\nconst Photos = {addPhoto, uploadPhoto};\r\n\r\n\r\n//Parking\r\nconst getParkingByLocation = (urlParams) =>RequestType.getRequest(\"api/v1/parking/searchAdmin\", urlParams);\r\nconst insertNewParking = (data) =>  RequestType.postRequest(\"api/v1/parking/insert\", data);\r\nconst Parking = {getParkingByLocation, insertNewParking};\r\n\r\n\r\n//TagsPlace\r\nconst updateTagsForPlace = (data, urlParams) => RequestType.postRequest(\"api/v1/tagsplace/update\", data, urlParams);\r\nconst TagsPlace = {updateTagsForPlace};\r\n\r\n\r\n//CategoriesPlace\r\nconst updateCategoriesForPlace = (data, urlParams) => RequestType.postRequest(\"api/v1/categoryplace/update\", data, urlParams);\r\nconst CategoriesPlace = {updateCategoriesForPlace};\r\n\r\n//PhotoPlace\r\nconst updateParkingForPlace = (data, urlParams) => RequestType.postRequest(\"api/v1/parkingplace/update\", data, urlParams);\r\nconst ParkingPlace = {updateParkingForPlace};\r\n\r\n//PhotoPlace\r\nconst updatePhotoForPlace = (data, urlParams) => RequestType.postRequest(\"api/v1/photoplace/update\", data, urlParams);\r\nconst PhotoPlace = {updatePhotoForPlace};\r\n\r\n//Schedule\r\nconst updateScheduleForPlace = (data, urlParams) => RequestType.postRequest(\"api/v1/ws/update\", data, urlParams);\r\nconst Schedule = {updateScheduleForPlace};\r\n\r\n//ReviewsPlace\r\nconst getPlaceReviews = (urlParams) => RequestType.getRequest(\"api/v1/reviews/all\", urlParams);\r\nconst Reviews = {getPlaceReviews};\r\n\r\n//Sources\r\nconst getSources = () => RequestType.getRequest(\"api/v1/source/all\");\r\nconst addSource = (data) => RequestType.postRequest(\"api/v1/source/insert\",data);\r\nconst Source = {getSources, addSource};\r\n\r\n//SourcePlace\r\nconst updateSourcesForPlace = (data, urlParams) => RequestType.postRequest(\"api/v1/sourceplace/update\", data, urlParams);\r\nconst SourcePlace = {updateSourcesForPlace};\r\n\r\n//Tours\r\nconst insertTour = (data) => RequestType.postRequest(\"api/v1/tour/insert\",data)\r\nconst updateTour = (data, urlParams) => RequestType.postRequest(\"api/v1/tour/update\",data, urlParams)\r\nconst getTour = (urlParams) => RequestType.getRequest(\"api/v1/tour\",urlParams)\r\nconst removeTour = (urlParams) => RequestType.getRequest(\"api/v1/tour/delete\", urlParams);\r\nconst getAllToursAdmin = (urlParams) => RequestType.getRequest(\"api/v1/tour/searchadmin\", urlParams);\r\nconst Tour = {insertTour, getTour, updateTour, getAllToursAdmin, removeTour}\r\n\r\nconst API = {Tour, SourcePlace, Source,Places, Tags, Categories, Photos, Parking, TagsPlace, CategoriesPlace, ParkingPlace, PhotoPlace, Schedule, Reviews};\r\n\r\nexport default API\r\n\r\n","// src/common/providers/APIErrorProvider/index.js\r\nimport React, { useState, useCallback } from 'react';\r\n\r\nexport const AlertDialogContext = React.createContext({\r\n    alertConfig: null,\r\n    addAlertConfig: () => {},\r\n    removeAlertConfig: () => {}\r\n});\r\n\r\nexport default function AlertDialogProvider({ children }) {\r\n    const [alertConfig, setAlertConfig] = useState(null);\r\n    const contextValue = {\r\n        alertConfig,\r\n        addAlertConfig: (title, message, actions, onClose = undefined) => setAlertConfig({ title, message, actions, onClose}),\r\n        removeAlertConfig: () => setAlertConfig(null)\r\n    };\r\n\r\n    return (\r\n        <AlertDialogContext.Provider value={contextValue}>\r\n            {children}\r\n        </AlertDialogContext.Provider>\r\n    );\r\n}","import React, {useContext} from \"react\";\r\nimport {AlertDialogContext} from \"./AlertDialogContext\";\r\n\r\nexport default function UseAlertDialogContext() {\r\n    const { alertConfig, addAlertConfig, removeAlertConfig } = useContext(AlertDialogContext);\r\n    return { alertConfig, addAlertConfig, removeAlertConfig };\r\n}\r\n","const Strings = {\r\n    DIALOG_PLACE_PUBLISH_TITLE : 'Place publicity',\r\n    DIALOG_PLACE_PUBLISH_MESSAGE: \"This place will be visible for all users. Are you sure?\",\r\n    DIALOG_PLACE_UNPUBLISH_MESSAGE :\"This place will not be visible anymore. Are you sure?\",\r\n\r\n    DIALOG_PLACE_INSERT_TITLE: \"Insert place\",\r\n    DIALOG_PLACE_INSERT: \"Are you sure you want to insert this place?\",\r\n\r\n    DIALOG_PLACE_UPDATE_TITLE: \"Update place\",\r\n    DIALOG_PLACE_UPDATE: \"Are you sure you want to make changes to this place?\",\r\n\r\n    DIALOG_PLACE_VERIFY_TITLE: \"Place verification\",\r\n    DIALOG_PLACE_VERIFY_MESSAGE: \"This is a user's suggested place. Are you sure you want to verify this place and make it visible to others?\",\r\n\r\n    DIALOG_PLACE_DELETE_TITLE: \"Delete place\",\r\n    DIALOG_PLACE_DELETE_MESSAGE: \"This action will remove this place permanently. Are you sure you want to proceed?\",\r\n\r\n    DIALOG_TOUR_DELETE_TITLE: \"Delete tour\",\r\n    DIALOG_TOUR_DELETE_MESSAGE: \"This action will remove this tour permanently. Are you sure you want to proceed?\",\r\n\r\n    SNACKBAR_PLACE_INSERTED_SUCCESS: \"Place inserted successfully\",\r\n    SNACKBAR_PLACE_REMOVE_SUCCESS: \"Place was removed successfully\",\r\n\r\n    SNACKBAR_TOUR_INSERTED_SUCCESS: \"Tour inserted successfully\",\r\n    SNACKBAR_TOUR_REMOVE_SUCCESS: \"Tour was removed successfully\",\r\n\r\n    SNACKBAR_ERROR: \"Something went wrong!\",\r\n    SNACKBAR_CHANGES_SAVED: \"All changes saved!\"\r\n};\r\n\r\nexport default Strings;","import React, { useState, useCallback } from 'react';\r\nimport { useContext } from 'react';\r\n\r\nexport const SnackbarContext = React.createContext({\r\n    config: null,\r\n    addConfig: () => {},\r\n    removeConfig: () => {}\r\n});\r\n\r\n\r\nexport default function SnackbarProvider({ children }) {\r\n    const [config, setConfig] = useState(null);\r\n\r\n    const removeConfig = () => setConfig(null);\r\n    const addConfig = (success, message) => setConfig({ success, message });\r\n\r\n    const contextValue = {\r\n        config,\r\n        addConfig: (success, message) => addConfig(success, message),\r\n        removeConfig: () => removeConfig()\r\n    };\r\n\r\n    return (\r\n        <SnackbarContext.Provider value={contextValue}>\r\n            {children}\r\n        </SnackbarContext.Provider>\r\n    );\r\n}","import { useContext } from 'react';\r\nimport {SnackbarContext} from \"./SnackbarContext\";\r\n\r\nexport default function UseSnackbarContext() {\r\n    const { config, addConfig, removeConfig } = useContext(SnackbarContext);\r\n    return { config, addConfig, removeConfig };\r\n}\r\n","import React, {useEffect, useState} from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport {withStyles} from \"@material-ui/core/styles\";\r\nimport TableComponent from \"../components/TableComponent\";\r\nimport API from \"../Networking/API\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport AddIcon from \"@material-ui/icons/Add\"\r\nimport Box from \"@material-ui/core/Box\";\r\nimport history from \"../helpers/history\";\r\nimport UseAlertDialogContext from \"../contexts/UseAlertDialogContext\";\r\nimport Strings from \"../helpers/stringResources\";\r\nimport UseSnackbarContext from \"../contexts/UseSnackbarContext\";\r\nimport Tooltip from \"@material-ui/core/Tooltip\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport FilterListIcon from \"@material-ui/icons/FilterList\";\r\nimport Popover from \"@material-ui/core/Popover\";\r\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\r\nimport Checkbox from \"@material-ui/core/Checkbox\";\r\n\r\nconst styles = theme => ({\r\n    button: {\r\n        margin: theme.spacing(2)\r\n    },\r\n    input: {\r\n        display: \"none\"\r\n    },\r\n\r\n    sortingButtons: {\r\n        padding: theme.spacing(2),\r\n        display: \"flex\",\r\n        flexDirection: \"column\"\r\n\r\n},\r\n    root:{\r\n        height:\"100vh\",\r\n        width:\"100%\",\r\n        overflow: \"auto\"\r\n    },\r\n    buttonsDiv: {\r\n        backgroundColor: \"red\",\r\n        justifyContent: \"flex-end\"\r\n    },\r\n    content:{\r\n        display: 'flex',\r\n        flexDirection: \"column\",\r\n        justifyContent: \"center\",\r\n        alignItems: \"center\",\r\n        [theme.breakpoints.down(\"lg\")]: {\r\n            padding: theme.spacing(1),\r\n        },\r\n        [theme.breakpoints.up(\"lg\")]: {\r\n            padding: theme.spacing(8),\r\n        },\r\n    }\r\n});\r\n\r\n\r\nconst headCells = [\r\n    { id: 'name', numeric: false, disablePadding: false, label: 'Place name', isId: true},\r\n    { id: 'address', numeric: false, disablePadding: false, label: 'Address',isId: false},\r\n    { id: 'city', numeric: false, disablePadding: false, label: 'City',isId: false },\r\n    { id: 'country', numeric: false, disablePadding: false, label: 'Country',isId: false },\r\n    { id: 'phoneNumber', numeric: false, disablePadding: false, label: 'Phone Number',isId: false },\r\n    { id: 'actions', numeric: false, disablePadding: false, label: 'Actions', isId: false }\r\n];\r\n\r\nfunction Places(props) {\r\n\r\n    const [data, setData] = useState([]);\r\n    const [pageData, setPageData] = useState([]);\r\n    const [isLoading, setIsLoading] = useState(true);\r\n    const { classes } = props;\r\n\r\n\r\n    const [filterOptions, setFilterOptions] = useState([\r\n        {filterLabel: \"Unverified\", filter: false, filterName: \"unverified\"},\r\n        {filterLabel: \"Unpublished\", filter: false, filterName: \"unpublished\"}]);\r\n\r\n    const [filterQuery, setFilterQuery] = useState(\"\");\r\n\r\n\r\n    const { addAlertConfig } = UseAlertDialogContext();\r\n    const { addConfig } = UseSnackbarContext();\r\n\r\n    useEffect(()=>{\r\n        if(!isLoading){\r\n            getAllPlaces(\"?o=\"+filterQuery)\r\n            console.log(\"Filter query\", filterQuery);\r\n        }\r\n    },[filterQuery]);\r\n\r\n    function parseData(data){\r\n        setIsLoading(false);\r\n        let placesData = [];\r\n        data.list.map(row => {\r\n            placesData.push(row)\r\n        });\r\n\r\n        delete data.list;\r\n        setData(placesData);\r\n        setPageData(data);\r\n    }\r\n\r\n    function updatePlaceCallback(id){\r\n        history.push(\"/app/addplace/\"+id)\r\n    }\r\n    function removePlaceCallback(id){\r\n        setIsLoading(true);\r\n        addAlertConfig(Strings.DIALOG_PLACE_DELETE_TITLE, Strings.DIALOG_PLACE_DELETE_MESSAGE, [{\r\n            name: \"Remove\",\r\n            action: () =>{\r\n                    API.Places.removePlace(\"?p=\"+id).then(response=>{\r\n                        let tmp = [];\r\n                        data.map(row=>{\r\n                            if(row.placeId !== id){\r\n                                tmp.push(row)\r\n                            }\r\n                        });\r\n                        setData(tmp);\r\n                        addConfig(true, Strings.SNACKBAR_PLACE_REMOVE_SUCCESS)\r\n                        setIsLoading(false)\r\n                    }).catch(error=>{\r\n                        setIsLoading(false);\r\n                        addConfig(false, Strings.SNACKBAR_ERROR)\r\n                    })\r\n            }\r\n        }], ()=>{setIsLoading(false)})\r\n    }\r\n\r\n    const changePageCallback = (p=0, keyword=\"\") => {\r\n        setIsLoading(true);\r\n        getAllPlaces(\"?p=\"+p+\"&s=\"+10+\"&keyword=\"+keyword+\"&o=\"+filterQuery)\r\n    };\r\n\r\n\r\n    //Sorting stuff\r\n    const [anchorEl, setAnchorEl] = React.useState(null);\r\n    const open = Boolean(anchorEl);\r\n    const id = open ? 'simple-popover' : undefined;\r\n    const handleClick = (event) => {\r\n        setAnchorEl(event.currentTarget);\r\n    };\r\n\r\n    const filterOptionsChanged = (name) =>{\r\n        let filters = [];\r\n        let fq = [];\r\n        filterOptions.map(row=>{\r\n            if(row.filterName === name){\r\n                row.filter = !row.filter\r\n            }\r\n            if(row.filter){\r\n                fq.push(row.filterName)\r\n            }\r\n            filters.push(row)\r\n        });\r\n\r\n        setFilterQuery(fq.join(\",\"));\r\n        setFilterOptions(filters)\r\n    };\r\n\r\n    const customToolbarElements = () =>{\r\n        return <div>\r\n            <Tooltip aria-describedby={id} title=\"Filter list\">\r\n                <IconButton  aria-label=\"filter list\" onClick={handleClick}>\r\n                    <FilterListIcon />\r\n                </IconButton>\r\n            </Tooltip>\r\n            <Popover\r\n                id={id}\r\n                open={open}\r\n                anchorEl={anchorEl}\r\n                onClose={()=>{setAnchorEl(null)}}\r\n                anchorOrigin={{\r\n                    vertical: 'bottom',\r\n                    horizontal: 'center',\r\n                }}\r\n                transformOrigin={{\r\n                    vertical: 'top',\r\n                    horizontal: 'center',\r\n                }}\r\n            >\r\n                <div className={classes.sortingButtons}>\r\n                    {filterOptions.map(row=>{\r\n                        return <FormControlLabel\r\n                            control={<Checkbox checked={row.filter} onChange={()=>filterOptionsChanged(row.filterName)} name={row.filterName} />}\r\n                            label={row.filterLabel}\r\n                        />\r\n                    })}\r\n                </div>\r\n\r\n            </Popover>\r\n        </div>\r\n    };\r\n    /*------------------------------------------------------------------------------------------------------*/\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            <div className={classes.content} >\r\n                <TableComponent\r\n                    title={\"Places\"}\r\n                    headCells={headCells}\r\n                    data={data}\r\n                    pagingInfo={pageData}\r\n                    checkable={false}\r\n                    changePageCallback={changePageCallback}\r\n                    updateCallback={updatePlaceCallback}\r\n                    removeCallback={removePlaceCallback}\r\n                    id={\"placeId\"}\r\n                    isLoading={isLoading}\r\n                    customToolbarElements={customToolbarElements()}\r\n                />\r\n\r\n                <Box display=\"flex\" justifyContent=\"flex-end\">\r\n                    <Button\r\n                        onClick={()=>{history.push(\"/app/addplace\")}}\r\n                        variant=\"text\"\r\n                        color=\"secondary\"\r\n                        size=\"large\"\r\n                        className={classes.button}\r\n                        startIcon={<AddIcon />}>\r\n                        Add\r\n                    </Button>\r\n                </Box>\r\n            </div>\r\n\r\n        </div>\r\n    );\r\n\r\n    function getAllPlaces(urlParams=\"\") {\r\n        API.Places.getAllPlacesAdmin(urlParams).then(response=>{\r\n            console.log(response)\r\n            parseData(response)\r\n        }).catch(error=>{\r\n            console.log(error)\r\n        })\r\n    }\r\n}\r\n\r\nPlaces.propTypes = {\r\n    classes: PropTypes.object.isRequired\r\n};\r\n\r\nexport default withStyles(styles)(Places);","export const priceRange = [\r\n    {\r\n        value: 0,\r\n        label: \"FREE\",\r\n    },\r\n    {\r\n        value: 25,\r\n        label: \"$\",\r\n    },\r\n    {\r\n        value: 50,\r\n        label: \"$$\",\r\n    },\r\n    {\r\n        value: 75,\r\n        label: \"$$$\",\r\n    },\r\n    {\r\n        value: 100,\r\n        label: \"$$$$\",\r\n    },\r\n    {\r\n        value: 125,\r\n        label: \"$$$$$\",\r\n    }\r\n];\r\n","export const averageTimeSpent = [\r\n    {\r\n        value: 5,\r\n        label: 5,\r\n    },\r\n    {\r\n        value: 10,\r\n        label: 10,\r\n    },\r\n    {\r\n        value: 15,\r\n        label: 15,\r\n    },\r\n    {\r\n        value: 30,\r\n        label: 30,\r\n    },\r\n    {\r\n        value: 45,\r\n        label: 45,\r\n    },\r\n    {\r\n        value: 60,\r\n        label: 60,\r\n    },\r\n    {\r\n        value: 90,\r\n        label: 90,\r\n    },\r\n    {\r\n        value: 120,\r\n        label: 120,\r\n    },\r\n    {\r\n        value: 150,\r\n        label: 150,\r\n    },\r\n    {\r\n        value: 180,\r\n        label: 180,\r\n    },\r\n    {\r\n        value: 210,\r\n        label: 210,\r\n    },\r\n    {\r\n        value: 240,\r\n        label: 240,\r\n    },\r\n    {\r\n        value: 270,\r\n        label: 270,\r\n    },\r\n];","\r\nimport React, {useEffect, useState} from 'react';\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Autocomplete from '@material-ui/lab/Autocomplete';\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport {withStyles} from \"@material-ui/core/styles\";\r\nimport PropTypes from \"prop-types\";\r\nimport Chip from \"@material-ui/core/Chip\";\r\nimport Box from \"@material-ui/core/Box\";\r\n\r\nconst styles = theme => ({\r\n    autoComplete: {\r\n        margin: theme.spacing(1)\r\n    },\r\n    chip: {\r\n        margin: theme.spacing(0.5),\r\n    },\r\n    root: {\r\n        display: 'flex',\r\n        justifyContent: 'left',\r\n        flexWrap: 'wrap',\r\n        listStyle: 'none',\r\n        padding: theme.spacing(1),\r\n        margin: 0,\r\n    },\r\n    autoCompleteChipContainer: {\r\n        padding: theme.spacing(1)\r\n    }\r\n});\r\n\r\nfunction AutoCompleteChip(props){\r\n\r\n    const {options, setOptions, selectedOptions, setSelectedOptions, classes, label, id} = props;\r\n    const [getCurrentVal, setCurrentVal] = useState({\"name\": \"\"});\r\n    const [firstLoad, setFirstLoad] = useState(true);\r\n\r\n    function handleDelete(data) {\r\n        setSelectedOptions(selectedOptions.filter(item => item !== data));\r\n        setOptions(\r\n            [\r\n                ...options,\r\n                data\r\n            ]\r\n        )\r\n    }\r\n\r\n    useEffect(()=>{\r\n        if(firstLoad && options.length>0){\r\n            let data = [];\r\n            options.map(row=>{\r\n                let found = false;\r\n                selectedOptions.map(row1=>{\r\n                    if(JSON.stringify(row) === JSON.stringify(row1)){\r\n                        found = true\r\n                    }\r\n                });\r\n                if(!found){\r\n                   data.push(row)\r\n                }\r\n            });\r\n            setOptions(data);\r\n            setFirstLoad(false)\r\n        }\r\n    },[options]);\r\n\r\n    function handleInput(event, value){\r\n        setCurrentVal({\"name\": \"\"});\r\n        setSelectedOptions(\r\n            [\r\n                ...selectedOptions,\r\n                value\r\n            ]\r\n        );\r\n        setOptions(options.filter(item => item !== value))\r\n    }\r\n\r\n    return(\r\n        <div>\r\n            <Box  className={classes.autoCompleteChipContainer}>\r\n                {selectedOptions.length !== 0 &&\r\n                <Box component=\"ul\" className={classes.root}>\r\n                    {\r\n                        selectedOptions.map(option => {\r\n                            return(\r\n                                <li key={option[id]}>\r\n                                    <Chip\r\n                                        variant=\"outlined\"\r\n                                        label={option.name}\r\n                                        onDelete={() => handleDelete(option)}\r\n                                        className={classes.chip}\r\n                                    />\r\n                                </li>\r\n                            )\r\n                        })\r\n                    }\r\n                </Box>\r\n                }\r\n\r\n                <Autocomplete\r\n                    className={classes.autoComplete}\r\n                    value={getCurrentVal}\r\n                    options={options}\r\n                    onChange={handleInput}\r\n                    disableClearable\r\n                    getOptionLabel={(option) =>  option.name}\r\n                    renderInput={(params) => <TextField {...params} label={label} variant=\"outlined\" />}\r\n                />\r\n            </Box>\r\n        </div>\r\n    )\r\n}\r\n\r\nAutoCompleteChip.propTypes = {\r\n    setSelectedOptions: PropTypes.func.isRequired,\r\n    options: PropTypes.array.isRequired,\r\n    setOptions: PropTypes.func.isRequired,\r\n    selectedOptions: PropTypes.array.isRequired,\r\n    classes: PropTypes.object.isRequired,\r\n    label: PropTypes.string.isRequired\r\n};\r\n\r\nexport default withStyles(styles)(AutoCompleteChip)","import {withStyles} from \"@material-ui/core/styles\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport React, {useState} from \"react\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport List from \"@material-ui/core/List\";\r\n\r\nconst styles = theme => ({\r\n    root: {\r\n        margin: 0,\r\n        padding: theme.spacing(2),\r\n    },\r\n    closeButton: {\r\n        position: 'absolute',\r\n        right: theme.spacing(1),\r\n        top: theme.spacing(1),\r\n        color: theme.palette.grey[500],\r\n    }\r\n});\r\n\r\nfunction AddSourceDialog(props){\r\n\r\n    function validateInput(){\r\n        let error = false;\r\n        if(text.length <= 3 || url.length <=3)\r\n            error = true;\r\n        setError(error);\r\n        return error\r\n    }\r\n\r\n    let {classes, open, action, setDialogOpen} = props;\r\n    const [text, setText] = useState(\"\");\r\n    const [url, setUrl] = useState(\"\");\r\n    const [error, setError] = useState(false);\r\n    return(\r\n        <div>\r\n            <Dialog aria-labelledby=\"customized-dialog-title\" open={open} fullWidth={true}>\r\n                <DialogTitle id=\"customized-dialog-title\">\r\n                    Insert source\r\n                </DialogTitle>\r\n                <DialogContent dividers>\r\n                        <TextField error={error} onChange = {(ev) => {setText(ev.target.value)}}\r\n                                   label=\"Source name\" variant=\"outlined\" fullWidth />\r\n                        <TextField style={{marginTop:\"16px\"}} error={error} onChange = {(ev) => {setUrl(ev.target.value)}}\r\n                                   label=\"Source url\" variant=\"outlined\" fullWidth />\r\n\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button onClick={()=>setDialogOpen(false)} color=\"primary\">\r\n                        Cancel\r\n                    </Button>\r\n                    <Button autoFocus color=\"primary\" onClick={() => {\r\n                        !validateInput() && action(text, url);\r\n                        setDialogOpen(false)\r\n                    }}>\r\n                        Add\r\n                    </Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n        </div>\r\n    )\r\n}\r\nexport default withStyles(styles)(AddSourceDialog)","import React, {useEffect, useState} from \"react\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport {withStyles} from \"@material-ui/core\";\r\nimport Slider from \"@material-ui/core/Slider\";\r\nimport {priceRange} from \"../../helpers/priceRange\";\r\nimport {averageTimeSpent} from \"../../helpers/averageTimeSpent\"\r\nimport Switch from \"@material-ui/core/Switch\";\r\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport InputLabel from \"@material-ui/core/InputLabel\";\r\nimport Select from \"@material-ui/core/Select\";\r\nimport AutoCompleteChip from \"../AutocompleteChip\";\r\nimport API from \"../../Networking/API\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport AddIcon from \"@material-ui/icons/Add\";\r\nimport AddSourceDialog from \"../AddSourceDialog\";\r\n\r\n\r\nconst styles = theme => ({});\r\nlet previousPrice = \"\";\r\n\r\nfunction BasicPlaceInfo({classes, placeInfo, setPlaceInfo, selectedSources, setSelectedSources}) {\r\n\r\n    const updatePlaceInfo = (event, newValue) => {\r\n        const {name, value, id} = event.target;\r\n        let place = Object.assign({}, placeInfo, {});\r\n        if (id !== \"\") {\r\n            place[id] = valuetext(newValue[0]);\r\n        } else {\r\n            place[name] = value\r\n        }\r\n        console.log(\"Updated place\", place);\r\n        setPlaceInfo(place)\r\n    };\r\n\r\n    const getSources = () =>{\r\n        API.Source.getSources().then(response=>{\r\n            setAvailableSources(response)\r\n        }).catch(error=>{\r\n\r\n        })\r\n    };\r\n\r\n    const handleAddSource = (name, url) =>{\r\n        API.Source.addSource({name: name, url: url}).then(response=>{\r\n            setAvailableSources(\r\n                [\r\n                    ...availableSources,\r\n                    response\r\n                ]\r\n            );\r\n            setSelectedSources([\r\n                ...selectedSources,\r\n                response\r\n            ]);\r\n        }).catch(error=>{\r\n            console.log(error)\r\n        })\r\n    };\r\n\r\n    useEffect(()=>{\r\n        getSources()\r\n    },[]);\r\n\r\n\r\n    const [dialogOpen, setDialogOpen] = useState(false);\r\n    const [availableSources, setAvailableSources] = useState([]);\r\n\r\n    function valuetext(value) {\r\n        let val = \"\";\r\n        priceRange.map(row => {\r\n            if (row.value === value)\r\n                val = row.label\r\n        });\r\n        return val\r\n    }\r\n\r\n    return <div>\r\n        <Typography variant=\"h6\">\r\n            Basic place information\r\n        </Typography>\r\n        <br/>\r\n        <TextField\r\n            required\r\n            label=\"Place name\"\r\n            style={{margin: 8}}\r\n            placeholder=\"Enter the place name\"\r\n            fullWidth\r\n            value={placeInfo['name']}\r\n            name=\"name\"\r\n            onChange={e => updatePlaceInfo(e)}\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            InputLabelProps={{\r\n                shrink: true,\r\n            }}\r\n        />\r\n        <TextField\r\n            label=\"Place description\"\r\n            style={{margin: 8}}\r\n            placeholder=\"Describe the place thoroughly\"\r\n            fullWidth\r\n            multiline\r\n            name=\"description\"\r\n            value={placeInfo['description']}\r\n            onChange={e => updatePlaceInfo(e)}\r\n            variant=\"outlined\"\r\n            rows={4}\r\n            margin=\"normal\"\r\n            InputLabelProps={{\r\n                shrink: true,\r\n            }}\r\n        />\r\n        <TextField\r\n            label=\"Phone number\"\r\n            style={{margin: 8}}\r\n            placeholder=\"Enter phone number\"\r\n            fullWidth\r\n            name=\"phoneNumber\"\r\n            value={placeInfo['phoneNumber']}\r\n            onChange={e => updatePlaceInfo(e)}\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            InputLabelProps={{\r\n                shrink: true,\r\n            }}\r\n        />\r\n        <TextField\r\n            label=\"Website\"\r\n            style={{margin: 8}}\r\n            placeholder=\"Enter website\"\r\n            fullWidth\r\n            name=\"website\"\r\n            value={placeInfo['website']}\r\n            onChange={e => updatePlaceInfo(e)}\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            InputLabelProps={{\r\n                shrink: true,\r\n            }}\r\n        />\r\n\r\n        <br/>\r\n        <br/>\r\n       <AutoCompleteChip\r\n                id=\"source\"\r\n                label=\"Select sources\"\r\n                options={availableSources}\r\n                setOptions={setAvailableSources}\r\n                setSelectedOptions={setSelectedSources}\r\n                selectedOptions={selectedSources}\r\n       />\r\n        <Button\r\n            variant=\"text\"\r\n            color=\"primary\"\r\n            size=\"small\"\r\n            className={classes.button}\r\n            onClick={() => setDialogOpen(true)}\r\n            startIcon={<AddIcon />}>\r\n            Add missing source\r\n        </Button>\r\n        <AddSourceDialog\r\n            action={handleAddSource}\r\n            open={dialogOpen}\r\n            setDialogOpen={setDialogOpen}\r\n        />\r\n\r\n        <br/>\r\n        <br/>\r\n        <br/>\r\n        <br/>\r\n        <div style={{display: \"flex\"}}>\r\n            <Typography>\r\n                Price\r\n            </Typography>\r\n            <Slider\r\n                id=\"price\"\r\n                onChange={updatePlaceInfo}\r\n                value={priceRange.map(row => {\r\n                    if (row.label === placeInfo['price']) return row.value\r\n                })}\r\n                style={{width: \"60%\", marginLeft: \"48px\"}}\r\n                defaultValue={0}\r\n                getAriaValueText={valuetext}\r\n                aria-labelledby=\"discrete-slider-always\"\r\n                step={25}\r\n                max={125}\r\n                marks={priceRange}\r\n            />\r\n        </div>\r\n        <br/>\r\n        <br/>\r\n        <div style={{display: \"flex\"}}>\r\n            <Typography>\r\n                Average time spent\r\n            </Typography>\r\n            <FormControl variant=\"outlined\" style={{width: \"60%\", marginLeft: \"48px\"}}>\r\n                <InputLabel>Minutes</InputLabel>\r\n                <Select\r\n                    native\r\n                    value={parseInt(placeInfo['averageTimeSpent'], 10)}\r\n                    onChange={updatePlaceInfo}\r\n                    label=\"Average Time spent\"\r\n                    inputProps={{\r\n                        name: 'averageTimeSpent'\r\n                    }}\r\n                >\r\n                    <option value=\"-1\">None</option>\r\n                    {\r\n                        averageTimeSpent.map(row=>{\r\n                            return <option value={parseInt(row.value, 10)}> {row.value}</option>\r\n                        })\r\n                    }\r\n                </Select>\r\n            </FormControl>\r\n        </div>\r\n    </div>\r\n}\r\n\r\nexport default withStyles(styles)(BasicPlaceInfo)","import {arrayMove, SortableContainer, SortableElement} from \"react-sortable-hoc\";\r\nimport React, {useMemo, useState} from \"react\"\r\nimport {withStyles} from \"@material-ui/core/styles\";\r\nimport Gallery from \"react-photo-gallery\";\r\nimport CardMedia from \"@material-ui/core/CardMedia\";\r\nimport Delete from \"@material-ui/icons/Delete\"\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Card from \"@material-ui/core/Card\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport CardActions from \"@material-ui/core/CardActions\";\r\nimport DeleteIcon from \"@material-ui/icons/Delete\";\r\n\r\nconst imgWithClick = { cursor: \"pointer\" };\r\n\r\nconst Photo = ({ index, onItemDelete, photo, margin, direction, top, left }) => {\r\n\r\n    const styles = {\r\n        imgContainer: {\r\n            margin: margin,\r\n            display: 'inline',\r\n            position: 'relative',\r\n            width: '300px',\r\n            height: '300px',\r\n        }\r\n    }\r\n    if (direction === \"column\") {\r\n        styles.imgContainer.position = \"absolute\";\r\n        styles.imgContainer.imgStyle.left = left;\r\n        styles.imgContainer.imgStyle.top = top;\r\n    }\r\n\r\n    const handleDelete = event => {\r\n        onItemDelete(photo);\r\n    }\r\n\r\n        return (\r\n\r\n            <Card style={styles.imgContainer}>\r\n                <CardMedia\r\n                    style={{height: 0, paddingTop: '80%'}}\r\n                    image={photo.src}\r\n                />\r\n                <CardActions disableSpacing>\r\n                    <Button\r\n                        variant=\"contained\"\r\n                        color=\"secondary\"\r\n                        startIcon={<DeleteIcon />}\r\n                        onClick = {(event) => {handleDelete(event)}}\r\n                    >\r\n                        Delete\r\n                    </Button>\r\n                </CardActions>\r\n\r\n            </Card>\r\n        )\r\n\r\n};\r\n\r\nconst SortablePhoto = SortableElement((item) => <Photo {...item} />);\r\n//const SortablePhoto = SortableElement(item => <img {...item}/>)\r\nconst SortableGallery = SortableContainer(({ items, onItemDelete}) => (\r\n    <Gallery photos={items} renderImage={props => <SortablePhoto {...props} onItemDelete={onItemDelete}/>} />\r\n));\r\n\r\nfunction ReorderablePhotos(props){\r\n    let {setPhotos, photos, srcName, keyName} = props\r\n    const onSortEnd = ({ oldIndex, newIndex }) => {\r\n        setPhotos(arrayMove(photos, oldIndex, newIndex));\r\n    };\r\n    function handleItemDelete(photo){\r\n        setPhotos(photos.filter(item => {return item[keyName].toString() !== photo.key}))\r\n    }\r\n\r\n    let modifiedData = photos.map(item =>  {\r\n        return(\r\n    {\r\n        key: item[keyName].toString(),\r\n        src: item[srcName],\r\n        width: 1,\r\n        height: 1\r\n    })\r\n\r\n})\r\n        return (\r\n            <div >\r\n                <SortableGallery distance={10} items={modifiedData} onSortEnd={onSortEnd} axis={\"xy\"} onItemDelete = {handleItemDelete} />\r\n            </div>\r\n        );\r\n\r\n}\r\n\r\n\r\nexport default  ReorderablePhotos","import {withStyles} from \"@material-ui/core/styles\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport React, {useState} from \"react\";\r\nimport {DropzoneArea} from \"material-ui-dropzone\";\r\nimport LinearProgress from \"@material-ui/core/LinearProgress\";\r\nimport PropTypes from \"prop-types\";\r\nimport API from \"../Networking/API\";\r\n\r\nconst styles = theme => ({\r\n    dropzoneArea: {\r\n        overflow: \"hidden\"\r\n    }\r\n});\r\n\r\nconst acceptedFileFormats = ['image/jpeg', 'image/png', 'image/bmp', 'image/jpg']\r\n\r\nfunction AddImageDialog(props) {\r\n\r\n    const {onCloseCallback, open, onFinishCallback, classes} = props\r\n    const [loading, setIsLoading] = useState(false)\r\n    const [selectedFiles, setSelectedFiles] = useState([])\r\n\r\n    const submitCallback = () => {\r\n        setIsLoading(true)\r\n\r\n        Promise.all(selectedFiles.map(imagefile => {\r\n            let formData = new FormData()\r\n            formData.append(\"image\", imagefile)\r\n            return API.Photos.uploadPhoto(formData)\r\n        })).then(response => {\r\n            console.log(response)\r\n            onFinishCallback(response)\r\n        }).catch(error => {\r\n            onFinishCallback()\r\n        }).finally(() => {\r\n            setIsLoading(false)\r\n        })\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <Dialog aria-labelledby=\"customized-dialog-title\" open={open} fullWidth={true}>\r\n                <DialogTitle id=\"customized-dialog-title\">\r\n                    Photo upload\r\n                </DialogTitle>\r\n                {loading && <LinearProgress variant=\"query\"/>}\r\n                <DialogContent dividers>\r\n                    <DropzoneArea\r\n                        className={classes.dropzoneArea}\r\n                        acceptedFiles={acceptedFileFormats}\r\n                        maxFileSize={25000000}\r\n                        dropzoneProps={{disabled: loading}} filesLimit={5} onDrop={setSelectedFiles}/>\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button onClick={onCloseCallback} color=\"primary\">\r\n                        Cancel\r\n                    </Button>\r\n                    <Button onClick={submitCallback} color=\"primary\">\r\n                        Submit\r\n                    </Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n        </div>\r\n    )\r\n}\r\n\r\nAddImageDialog.propTypes = {\r\n    classes: PropTypes.object.isRequired,\r\n    open: PropTypes.bool.isRequired,\r\n    onFinishCallback: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default withStyles(styles)(AddImageDialog)\r\n","import React, {useState} from \"react\";\r\nimport withStyles from \"@material-ui/core/styles/withStyles\";\r\nimport ReorderablePhotos from \"../ReorderablePhotos\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport AddIcon from \"@material-ui/icons/Add\";\r\nimport AddImageDialog from \"../AddImageDialog\";\r\nimport {Card} from \"@material-ui/core\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\n\r\nconst styles = theme => ({\r\n    outline: {\r\n        margin: theme.spacing(1),\r\n        padding: theme.spacing(1),\r\n        width: '100%'\r\n    },\r\n    button: {\r\n        margin: theme.spacing(2)\r\n    }\r\n});\r\n\r\nfunction PhotosInfo({classes, setPhotos, photos}) {\r\n    const [addImageDialogOpen, setAddImageDialogOpen] = useState(false);\r\n\r\n    function handleAddPhoto(files) {\r\n        setAddImageDialogOpen(false);\r\n        if(files == null)\r\n            return;\r\n\r\n        setPhotos([\r\n            ...photos,\r\n            ...files]\r\n        )\r\n    }\r\n\r\n    return(\r\n        <div>\r\n            <Typography variant=\"h6\" >\r\n                Photos\r\n            </Typography>\r\n            <Card variant={\"outlined\"} className={classes.outline}>\r\n\r\n                {photos.length > 0 && <ReorderablePhotos keyName=\"photoId\" srcName = \"url\" setPhotos = {setPhotos} photos = {photos} />}\r\n\r\n                <Button\r\n                    variant=\"text\"\r\n                    color=\"primary\"\r\n                    size=\"small\"\r\n                    style={{width: '15%'}}\r\n                    className={classes.button}\r\n                    onClick={() => setAddImageDialogOpen(true)}\r\n                    startIcon={<AddIcon />}>\r\n                    Add photo\r\n                </Button>\r\n\r\n                <AddImageDialog open={addImageDialogOpen} onFinishCallback={(files) => handleAddPhoto(files)} onCloseCallback={() => setAddImageDialogOpen(false)}/>\r\n\r\n\r\n            </Card>\r\n        </div>\r\n\r\n    )\r\n}\r\n\r\nexport default withStyles(styles)(PhotosInfo)\r\n\r\n\r\n","import React, {memo, useEffect, useMemo, useState} from 'react'\r\nimport Autocomplete from 'react-google-autocomplete';\r\nimport Geocode from \"react-geocode\";\r\nimport {compose, withProps, withStateHandlers} from \"recompose\"\r\nimport { withScriptjs, withGoogleMap, GoogleMap, Marker, InfoWindow } from \"react-google-maps\"\r\nimport withStyles from \"@material-ui/core/styles/withStyles\";\r\nimport {map} from \"react-bootstrap/cjs/ElementChildren\";\r\nimport PropTypes, {func} from \"prop-types\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport history from \"../helpers/history\";\r\nimport AddIcon from \"@material-ui/icons/Add\";\r\nimport MyLocationIcon from '@material-ui/icons/MyLocation';\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\n\r\n\r\n//\r\n\r\n//Geocoding API: AIzaSyDGFjZHSoRrZ2AEO0ONXvjuN4RiCmknXf8\r\n//Places API: AIzaSyDGFjZHSoRrZ2AEO0ONXvjuN4RiCmknXf8\r\n//Maps API: AIzaSyDGFjZHSoRrZ2AEO0ONXvjuN4RiCmknXf8\r\n\r\nconst styles = theme => ({\r\n    content: {\r\n        margin: theme.spacing(1)\r\n    },\r\n    autocomplete:{\r\n        width: '200px',\r\n        height: '40px',\r\n        fontSize: \"14px\",\r\n        border: \"0\",\r\n        borderBottom: \"2px solid grey\",\r\n        outline:\"0\",\r\n        marginBottom: \"4px\"\r\n    }\r\n});\r\n\r\nvar markerData = {};\r\nfunction CustomMap({classes, locationData, setLocationData, mapHeight, selectedParkingCallback, changedParkingMarkerCallback, addParkingCallback}){\r\n\r\n    CustomMap.propTypes = {\r\n        locationData: PropTypes.object,\r\n        setLocationData: PropTypes.func,\r\n        mapHeight: PropTypes.number\r\n    };\r\n\r\n\r\n\r\n    var parkingIcon = 'https://developers.google.com/maps/documentation/javascript/examples/full/images/parking_lot_maps.png';\r\n\r\n    Geocode.setApiKey(\"AIzaSyDGFjZHSoRrZ2AEO0ONXvjuN4RiCmknXf8\");\r\n    Geocode.enableDebug();\r\n\r\n\r\n    function useFunction(callback) {\r\n        const ref = React.useRef();\r\n        ref.current = callback;\r\n\r\n        return React.useCallback(function() {\r\n            const callback = ref.current;\r\n            if (typeof callback === \"function\") {\r\n                return callback.apply(this, arguments);\r\n            }\r\n        }, []);\r\n    }\r\n    const selectParkingHandler = useFunction(selectedParkingCallback);\r\n    const addNewParkingHandler = useFunction(addParkingCallback);\r\n\r\n\r\n    const onPlaceSelected = (place, onMarkerLocationChanged, onParkingDataChanged) => {\r\n\r\n        const address = place.formatted_address\r\n        const addressArray =  place.address_components\r\n        if(addressArray !== undefined){\r\n            const city = getCity( addressArray ),\r\n                country = getCountry(addressArray),\r\n                latitudeValue = place.geometry.location.lat(),\r\n                longitudeValue = place.geometry.location.lng();\r\n\r\n            onMarkerLocationChanged(latitudeValue, longitudeValue, address, city, country);\r\n            changeLocationData(city,country,address,latitudeValue,longitudeValue, onParkingDataChanged);\r\n        }\r\n    };\r\n\r\n    const onMarkerDragEnd = ( event, onMarkerLocationChanged, onParkingDataChanged) => {\r\n        let newLat = event.latLng.lat(),\r\n            newLng = event.latLng.lng();\r\n            geocodeFromLatLng(newLat, newLng, onMarkerLocationChanged, onParkingDataChanged)\r\n    };\r\n\r\n    function geocodeFromLatLng(newLat, newLng, onMarkerLocationChanged, onParkingDataChanged){\r\n        Geocode.fromLatLng( newLat , newLng ).then(\r\n            response => {\r\n                const address = response.results[0].formatted_address\r\n                const addressArray =  response.results[0].address_components\r\n                if(addressArray!==undefined){\r\n                    const city = getCity( addressArray ),\r\n                        country = getCountry( addressArray );\r\n\r\n                    onMarkerLocationChanged(newLat, newLng, address, city, country);\r\n\r\n                    changeLocationData(city,country,address,newLat,newLng, onParkingDataChanged);\r\n                }\r\n            },\r\n            error => {\r\n                console.error(error);\r\n            }\r\n        );\r\n    }\r\n\r\n    function geocodeFromAddress(address, onMarkerLocationChanged, onParkingDataChanged){\r\n        Geocode.fromAddress( address ).then(\r\n            response => {\r\n                const { lat, lng } = response.results[0].geometry.location;\r\n                const address = response.results[0].formatted_address;\r\n                const addressArray =  response.results[0].address_components;\r\n                if(addressArray!==undefined){\r\n                    const city = getCity( addressArray ),\r\n                        country = getCountry( addressArray );\r\n\r\n                    console.log(lat, lng)\r\n                    onMarkerLocationChanged(lat, lng, address, city, country);\r\n                        console.log(\"Pateko\")\r\n                    changeLocationData(city,country,address,lat,lng, onParkingDataChanged);\r\n                }\r\n            },\r\n            error => {\r\n                console.error(error);\r\n            }\r\n        );\r\n    }\r\n\r\n    function changeLocationData(city,country,address,latitude,longitude, onParkingDataChanged) {\r\n        let data = Object.assign({}, locationData, {});\r\n        data['city'] = city;\r\n        data['country'] = country;\r\n        data['address'] = address;\r\n        data['latitude'] = latitude;\r\n        data['longitude'] = longitude;\r\n        setLocationData(data);\r\n        markerData = data;\r\n        if (changedParkingMarkerCallback !== undefined){\r\n            changedParkingMarkerCallback(city,address,country, latitude,longitude, onParkingDataChanged);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Get the city and set the city input value to the one selected\r\n     *\r\n     * @param addressArray\r\n     * @return {string}\r\n     */\r\n    const getCity = ( addressArray ) => {\r\n        if(addressArray !== undefined){\r\n            let city = '';\r\n            for( let i = 0; i < addressArray.length; i++ ) {\r\n                if ( addressArray[ i ].types[0] && 'administrative_area_level_2' === addressArray[ i ].types[0] ) {\r\n                    city = addressArray[ i ].long_name;\r\n                    return city;\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n    function getCurrentPosition(onMarkerLocationChanged, onParkingDataChanged){\r\n        navigator.geolocation.getCurrentPosition(function(position) {\r\n            let newLat = position.coords.latitude,\r\n                newLng = position.coords.longitude;\r\n\r\n            Geocode.fromLatLng( newLat , newLng ).then(\r\n                response => {\r\n                    const address = response.results[0].formatted_address\r\n                    const addressArray =  response.results[0].address_components\r\n                    if(addressArray!==undefined){\r\n                        const city = getCity( addressArray ),\r\n                            country = getCountry( addressArray );\r\n\r\n                        onMarkerLocationChanged(newLat, newLng, address, city, country);\r\n                        changeLocationData(city,country,address,newLat,newLng, onParkingDataChanged);\r\n                    }\r\n                },\r\n                error => {\r\n                }\r\n            );\r\n            console.log(\"Latitude is :\", position.coords.latitude);\r\n            console.log(\"Longitude is :\", position.coords.longitude);\r\n        }, error=>{\r\n            alert(error.message + \"\\n\" + JSON.stringify(error))\r\n        });\r\n    }\r\n\r\n    const getCountry = (addressArray) =>{\r\n        if(addressArray!==undefined){\r\n        let country = '';\r\n        for( let i = 0; i < addressArray.length; i++ ) {\r\n            if ( addressArray[ i ].types[0] && 'country' === addressArray[ i ].types[0] ) {\r\n                country = addressArray[ i ].long_name;\r\n                return country;\r\n            }\r\n        }\r\n        }\r\n    };\r\n    /**\r\n     *\r\n     * Renders parking data markers\r\n     *\r\n     * @param onToggleOpen Method to open marker's info window\r\n     * @param infoWindows Marker info window\r\n     * @param parking data\r\n     * @returns {*}\r\n     */\r\n    const markers = (onToggleOpen, infoWindows, parking) =>{\r\n        return parking.map((location, i) => {\r\n\r\n            const latitude = parseFloat(location.latitude);\r\n            const longitude = parseFloat(location.longitude);\r\n\r\n            return (\r\n                <Marker\r\n                    key={location.parkingId}\r\n                    position={{ lat: latitude, lng: longitude}}\r\n                    options={{icon: parkingIcon}}\r\n                    onClick={()=>onToggleOpen(location.parkingId)}\r\n                >\r\n\r\n                    {infoWindows[i].showInfo && (\r\n                        <InfoWindow >\r\n                            <div style={{display:\"flex\", flexDirection: \"column\"}}>\r\n                                {location.address}\r\n                                <Button\r\n                                    onClick={()=>{selectParkingHandler(location)}}\r\n                                    variant=\"text\"\r\n                                    color=\"secondary\"\r\n                                    size=\"large\"\r\n                                    className={classes.button}\r\n                                    startIcon={<AddIcon />}>\r\n                                    Add parking\r\n                                </Button>\r\n                            </div>\r\n                        </InfoWindow>\r\n                    )}\r\n\r\n                </Marker>\r\n            )\r\n        })\r\n    };\r\n\r\n\r\n    /**\r\n     * Map component that renders parking data and has draggable marker\r\n     */\r\n    const MyMapComponent = compose(\r\n        withProps({\r\n            containerElement: <div style={{ height: mapHeight }} />,\r\n            mapElement: <div style={{ height: `100%` }} />,\r\n        }),\r\n        withStateHandlers({\r\n                infoWindow: {show: false}\r\n            },{\r\n            toggleDraggableInfoWindow: ({draggableMarkerLocation}) => (show) => ({\r\n                infoWindow: {show: show}\r\n            })\r\n            }\r\n        ),\r\n        withGoogleMap\r\n    )(props =>\r\n\r\n        <GoogleMap\r\n            defaultZoom={12}\r\n            center={{lat: props.markerLocation.latitude, lng: props.markerLocation.longitude }}\r\n            defaultCenter={{ lat: props.markerLocation.latitude, lng: props.markerLocation.longitude }}\r\n        >\r\n\r\n\r\n\r\n            <Marker\r\n                name={'Dolores park'}\r\n                visible={true}\r\n                draggable={true}\r\n                onClick={()=>props.toggleDraggableInfoWindow(true)}\r\n                onDragEnd={e=>onMarkerDragEnd(e, props.markerChanger, props.onParkingDataChange)}\r\n                position={{ lat: props.markerLocation.latitude, lng: props.markerLocation.longitude }} >\r\n\r\n                {props.infoWindow.show && addParkingCallback && (\r\n                    <InfoWindow onCloseClick={()=>{props.toggleDraggableInfoWindow(false)}}>\r\n                        <div style={{display:\"flex\", flexDirection: \"column\"}}>\r\n                            {props.markerLocation.address}\r\n                            <Button\r\n                                onClick={()=>{\r\n\r\n                                    addNewParkingHandler(props.markerLocation)\r\n\r\n                                }}\r\n                                variant=\"text\"\r\n                                color=\"secondary\"\r\n                                size=\"large\"\r\n                                className={classes.button}\r\n                                startIcon={<AddIcon />}>\r\n                                Add new parking\r\n                            </Button>\r\n                        </div>\r\n                    </InfoWindow>\r\n                )}\r\n            </Marker>\r\n\r\n            {markers(props.onToggleOpen, props.infoWindows, props.parkingData)}\r\n        </GoogleMap>\r\n    );\r\n\r\n\r\n    const handleKeyPress = (event, onMarkerLocationChange, onParkingDataChange) =>{\r\n        const value = event.target.value;\r\n        if (event.which === 13 || event.keyCode === 13) {\r\n            if (/[a-zA-Z]+/.test(value)){\r\n                geocodeFromAddress(value, onMarkerLocationChange, onParkingDataChange)\r\n            }else{\r\n                let position = value.split(/[ ,]+/);\r\n                if(position.length === 2){\r\n                    geocodeFromLatLng(parseFloat(position[0]), parseFloat(position[1]), onMarkerLocationChange, onParkingDataChange)\r\n                }\r\n            }\r\n            return false;\r\n        }\r\n        return true;\r\n    };\r\n\r\n    /**\r\n     * Places autocomplete and map. This component holds it's inner states like draggableMarkerLocation, parkingData etc.\r\n     */\r\n    const FullMap = compose(\r\n        withProps(),\r\n        withStateHandlers({\r\n            draggableMarkerLocation: {\r\n                latitude: locationData.latitude,\r\n                longitude: locationData.longitude,\r\n                address:  locationData.address\r\n            },parkingData: [], infoWindows: []\r\n        },{\r\n            onMarkerLocationChanged: ({draggableMarkerLocation}) => (newLat, newLng, address, city, country) => ({\r\n                draggableMarkerLocation: {\r\n                    latitude: newLat,\r\n                    longitude: newLng,\r\n                    address: address,\r\n                    city: city,\r\n                    country: country\r\n                }\r\n            }),\r\n                onParkingDataChange: ({parkingData}) => (parking) => ({\r\n                    parkingData: parking.map(row=>{\r\n                        return row\r\n                    }),\r\n                    infoWindows: parking.map(p => {\r\n                        return { parkingId: p.parkingId, showInfo: false };\r\n                    })\r\n                }),\r\n                onToggleOpen: ({ infoWindows }) => selectedIndex => ({\r\n                    infoWindows: infoWindows.map((iw, i) => {\r\n                        iw.showInfo = selectedIndex === iw.parkingId;\r\n                        return iw;\r\n                    })\r\n                })\r\n            }\r\n            )\r\n    )(props=>\r\n        <div className={classes.content}>\r\n            <Autocomplete\r\n                onKeyPress={(event)=>{handleKeyPress(event, props.onMarkerLocationChanged, props.onParkingDataChange)}}\r\n                className={classes.autocomplete}\r\n                onPlaceSelected={(place)=>{onPlaceSelected(place, props.onMarkerLocationChanged, props.onParkingDataChange)} }\r\n                types={['(regions)']}\r\n            />\r\n            <IconButton aria-label=\"delete\" className={classes.margin} size=\"small\">\r\n                <MyLocationIcon\r\n                    fontSize=\"large\"\r\n                    color=\"primary\"\r\n                    onClick={()=>{\r\n                        getCurrentPosition(props.onMarkerLocationChanged, props.onParkingDataChange)\r\n                    }}\r\n\r\n                />\r\n            </IconButton>\r\n\r\n            <MyMapComponent markerChanger={props.onMarkerLocationChanged}\r\n                            markerLocation={props.draggableMarkerLocation}\r\n                            onParkingDataChange={props.onParkingDataChange}\r\n                            parkingData={props.parkingData}\r\n                            onToggleOpen={props.onToggleOpen}\r\n                            infoWindows={props.infoWindows}\r\n            />\r\n\r\n\r\n        </div>\r\n    );\r\n\r\n    /**\r\n     * Memoization of a component.\r\n     */\r\n    return useMemo(() => {\r\n        return <FullMap/>;\r\n    }, [])\r\n\r\n\r\n}\r\n\r\nexport default withStyles(styles)(CustomMap);","import React from \"react\";\r\nimport withStyles from \"@material-ui/core/styles/withStyles\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport CustomMap from \"../CustomMap\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\n\r\n\r\nconst styles = theme => ({\r\n    outline: {\r\n        margin: theme.spacing(1),\r\n        padding: theme.spacing(1),\r\n        width: '100%'\r\n    },\r\n    button: {\r\n        margin: theme.spacing(2)\r\n    }\r\n});\r\n\r\nfunction PlaceLocation({locationData, setLocationData}) {\r\n\r\n    function changeLocationData(event){\r\n        const {name, value} = event.target;\r\n        let data = Object.assign({}, locationData, {});\r\n        data[name] = value;\r\n\r\n        setLocationData(data)\r\n    }\r\n\r\n    return <div>\r\n        <Typography variant=\"h6\" >\r\n            Place location\r\n        </Typography>\r\n        <br/>\r\n        <Typography variant=\"subtitle1\" >\r\n            Select place location from map\r\n        </Typography>\r\n        <br/>\r\n        <CustomMap mapHeight={200}\r\n                   locationData={locationData}\r\n                   setLocationData={setLocationData}\r\n        />\r\n        <br/>\r\n        <br/>\r\n        <Typography variant=\"subtitle1\" >\r\n            Place location\r\n        </Typography>\r\n        <br/>\r\n        <TextField\r\n            required\r\n            label=\"Address\"\r\n            style={{ margin: 8 }}\r\n            placeholder=\"Enter place address\"\r\n            fullWidth\r\n            disabled\r\n            value={locationData['address']}\r\n            name='address'\r\n            onChange={e=>{changeLocationData(e)}}\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            InputLabelProps={{\r\n                shrink: true,\r\n            }}\r\n        />\r\n        <TextField\r\n            required\r\n            label=\"City\"\r\n            disabled\r\n            style={{ margin: 8 }}\r\n            placeholder=\"Enter place city\"\r\n            fullWidth\r\n            value={locationData['city']}\r\n            name='city'\r\n            onChange={e=>{changeLocationData(e)}}\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            InputLabelProps={{\r\n                shrink: true,\r\n            }}\r\n        />\r\n        <TextField\r\n            required\r\n            label=\"Country\"\r\n            style={{ margin: 8 }}\r\n            placeholder=\"Enter place country\"\r\n            fullWidth\r\n            disabled\r\n            value={locationData['country']}\r\n            name='country'\r\n            onChange={e=>{changeLocationData(e)}}\r\n            variant=\"outlined\"\r\n            rows={4}\r\n            margin=\"normal\"\r\n            InputLabelProps={{\r\n                shrink: true,\r\n            }}\r\n        />\r\n    </div>\r\n}\r\n\r\nexport default withStyles(styles)(PlaceLocation)","import React, {useCallback, useEffect, useRef, useState} from \"react\";\r\nimport withStyles from \"@material-ui/core/styles/withStyles\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport CustomMap from \"../CustomMap\";\r\nimport API from \"../../Networking/API\";\r\nimport {arrayMove, SortableContainer, SortableElement} from 'react-sortable-hoc';\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport DeleteIcon from \"@material-ui/icons/Delete\"\r\nimport UseSnackbarContext from \"../../contexts/UseSnackbarContext\";\r\nimport Button from \"@material-ui/core/Button\";\r\n\r\nconst styles = theme => ({\r\n    outline: {\r\n        margin: theme.spacing(1),\r\n        padding: theme.spacing(1),\r\n        width: '100%'\r\n    },\r\n    button: {\r\n        margin: theme.spacing(2)\r\n    },\r\n    paper:{\r\n        padding: theme.spacing(2),\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        justifyContent: \"space-between\",\r\n        marginTop: \"8px\"\r\n    },\r\n});\r\n\r\nfunction ParkingLocation({classes, parkingMarkerData, setParkingMarkerData, allSelectedParkingData, setAllSelectedParkingData}) {\r\n    const { addConfig } = UseSnackbarContext();\r\n\r\n    const onSortEnd = ({oldIndex, newIndex}) => {\r\n        setAllSelectedParkingData(arrayMove(allSelectedParkingData,oldIndex, newIndex))\r\n    };\r\n\r\n    function changedParkingMarkerCallback(city,address,country,lat,lng, parkingDataChanged) {\r\n        getClosestParking(parseFloat(lat),parseFloat(lng), parkingDataChanged);\r\n    }\r\n\r\n\r\n\r\n    function addNewParking(markerData){\r\n        if(!parkingExists(markerData)){\r\n            API.Parking.insertNewParking([markerData]).then(response=>{\r\n                setAllSelectedParkingData(oldArray=> [...oldArray, response[0]]);\r\n                addConfig(true)\r\n            }).catch(error=>{\r\n                addConfig(false)\r\n            })\r\n        }\r\n    }\r\n\r\n    function parkingExists(markerData){\r\n        for(let i = 0; i<allSelectedParkingData.length; i++){\r\n            if(allSelectedParkingData[i].address === markerData.address) return true;\r\n        }\r\n        return false\r\n    }\r\n\r\n    const getClosestParking = (lat, lng, parkingDataChanged)=>{\r\n        API.Parking.getParkingByLocation(\"?lat=\"+lat+\"&lng=\"+lng).then(response=>{\r\n            let placesData = [];\r\n            console.log(\"ParkingData\", response)\r\n            response.map(row => {\r\n                placesData.push(row)\r\n            });\r\n            parkingDataChanged(response);\r\n        }).catch(error=>{\r\n        })\r\n    };\r\n\r\n    const SortableItem = SortableElement(({value}) => (\r\n        <Paper className={classes.paper} elevation={3}>\r\n            <Typography>\r\n                {value.address}\r\n            </Typography>\r\n            <IconButton aria-label=\"delete\" className={classes.margin}\r\n                        onClick={()=>setAllSelectedParkingData(allSelectedParkingData.filter((item) => item.parkingId !== value.parkingId))}>\r\n                <DeleteIcon fontSize=\"small\" />\r\n            </IconButton>\r\n        </Paper>\r\n    ));\r\n\r\n    useEffect(()=>{\r\n        getClosestParking(parkingMarkerData.lat, parkingMarkerData.lng)\r\n    },[]);\r\n\r\n    const SortableList = SortableContainer(({items}) => {\r\n        return (\r\n            <ul>\r\n                {items.map((value, index) => (\r\n                <SortableItem key={index} index={index} value={value} />\r\n                ))}\r\n            </ul>\r\n        );\r\n    });\r\n\r\n    return <div>\r\n        <Typography variant=\"h6\" >\r\n            Add parking\r\n        </Typography>\r\n        <br/>\r\n        <Typography variant=\"subtitle1\" >\r\n            Select parking\r\n        </Typography>\r\n        <CustomMap mapHeight={350}\r\n                   locationData={parkingMarkerData}\r\n                   setLocationData={setParkingMarkerData}\r\n                   selectedParkingCallback={(location)=>{\r\n                       if(!parkingExists(location))\r\n                           setAllSelectedParkingData(oldArray=> [...oldArray, location])\r\n                       }}\r\n                   changedParkingMarkerCallback={changedParkingMarkerCallback}\r\n                   addParkingCallback={addNewParking}\r\n\r\n        />\r\n        <br/>\r\n        <Typography variant=\"subtitle1\" >\r\n            Selected parking locations\r\n        </Typography>\r\n\r\n        <SortableList distance={10} items={allSelectedParkingData} onSortEnd={onSortEnd} />\r\n\r\n    </div>\r\n}\r\n\r\nexport default withStyles(styles)(ParkingLocation)","import PropTypes from \"prop-types\";\r\nimport {withStyles} from \"@material-ui/core/styles\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport React, {useState} from \"react\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\n\r\nconst styles = theme => ({\r\n    root: {\r\n        margin: 0,\r\n        padding: theme.spacing(2),\r\n    },\r\n    closeButton: {\r\n        position: 'absolute',\r\n        right: theme.spacing(1),\r\n        top: theme.spacing(1),\r\n        color: theme.palette.grey[500],\r\n    },\r\n});\r\n\r\nfunction AddDialog(props){\r\n\r\n    function validateInput(){\r\n        var error = false;\r\n        if(text.length <= 3)\r\n            error = true\r\n        setError(error)\r\n        return error\r\n    }\r\n\r\n    let {classes, open, onCloseCallback, header, description, textFieldLabel, action} = props\r\n    const [text, setText] = useState(\"\")\r\n    const [error, setError] = useState(false)\r\n    return(\r\n        <div>\r\n            <Dialog /*onClose={handleClose}*/ aria-labelledby=\"customized-dialog-title\" open={open} fullWidth={true}>\r\n                <DialogTitle id=\"customized-dialog-title\" /*onClose={handleClose}*/>\r\n                    {header}\r\n                </DialogTitle>\r\n                <DialogContent dividers>\r\n                    <TextField error={error} onChange = {(ev) => {setText(ev.target.value)}}label={textFieldLabel} variant=\"outlined\" fullWidth />\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button onClick={onCloseCallback} color=\"primary\">\r\n                        Cancel\r\n                    </Button>\r\n                    <Button autoFocus color=\"primary\" onClick={() => {\r\n                        !validateInput() && action(text)\r\n                    }}>\r\n                        Add\r\n                    </Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n        </div>\r\n    )\r\n}\r\n\r\nAddDialog.propTypes = {\r\n    classes: PropTypes.object.isRequired,\r\n    open: PropTypes.bool.isRequired,\r\n    action: PropTypes.func.isRequired,\r\n    onCloseCallback: PropTypes.func.isRequired\r\n};\r\nexport default withStyles(styles)(AddDialog)\r\n","import React, {useEffect, useState} from \"react\";\r\nimport withStyles from \"@material-ui/core/styles/withStyles\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport AutocompleteChip from \"../AutocompleteChip\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport AddIcon from \"@material-ui/icons/Add\";\r\nimport AddDialog from \"../AddDialog\";\r\nimport API from \"../../Networking/API\";\r\n\r\n\r\nconst styles = theme => ({\r\n    outline: {\r\n        margin: theme.spacing(1),\r\n        padding: theme.spacing(1),\r\n        width: '100%'\r\n    },\r\n    button: {\r\n        margin: theme.spacing(2)\r\n    },\r\n    paper:{\r\n        padding: theme.spacing(2),\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        justifyContent: \"space-between\",\r\n        marginTop: \"8px\"\r\n    },\r\n});\r\n\r\nfunction PlaceDiscovery({classes, selectedTags, setSelectedTags, selectedCategories, setSelectedCategories}) {\r\n\r\n    const [dialogAddTagOpen, setDialogAddTagOpen] = useState(false);\r\n    const [dialogAddCategoryOpen, setDialogAddCategoryOpen] = useState(false);\r\n\r\n    const [availableCategories, setAvailableCategories] = useState([]);\r\n    const [availableTags, setAvailableTags] = useState([]);\r\n\r\n\r\n    const updateTags = () => {\r\n        API.Tags.getAllTags().then(response=>{\r\n            setAvailableTags(response);\r\n            console.log(response);\r\n        }).catch(error=>{\r\n            console.log(error)\r\n        })\r\n    };\r\n    const updateCategories = () => {\r\n        API.Categories.getAllCategories().then(response=>{\r\n            setAvailableCategories(response)\r\n            console.log(response);\r\n        }).catch(error=>{\r\n            console.log(error)\r\n        });\r\n    };\r\n\r\n    useEffect(()=>{\r\n        updateTags();\r\n        updateCategories();\r\n    },[]);\r\n\r\n    const handleAddCategory = (value) => {\r\n        API.Categories.addCategory([{name: value}]).then(response=>{\r\n            let newCat = {categoryId: response[0], name: value};\r\n            setAvailableCategories(\r\n                [\r\n                    ...availableCategories,\r\n                    newCat\r\n                ]\r\n            );\r\n            setSelectedCategories([\r\n                ...selectedCategories,\r\n                newCat\r\n            ]);\r\n            setDialogAddCategoryOpen(false)\r\n\r\n        }).catch(error=>{\r\n            console.log(error)\r\n        })\r\n    };\r\n\r\n\r\n\r\n    const handleAddTag = (value) => {\r\n        API.Tags.addTag([{name: value}]).then(response=>{\r\n            let newTag = {tagId: response[0], name: value}\r\n            setAvailableTags(\r\n                [\r\n                    ...availableTags,\r\n                    newTag\r\n                ]\r\n            );\r\n            setSelectedTags([\r\n                ...selectedTags,\r\n                newTag\r\n            ]);\r\n            setDialogAddTagOpen(false)\r\n\r\n        }).catch(error=>{\r\n            console.log(error)\r\n        })\r\n    };\r\n\r\n    return <div>\r\n        <Typography variant=\"h6\" >\r\n            Place discovery settings\r\n        </Typography>\r\n        <br/>\r\n        <Typography variant=\"subtitle1\" >\r\n            Select tags\r\n        </Typography>\r\n        <AutocompleteChip label=\"Select tags\"\r\n                          id=\"tagId\"\r\n                          options={availableTags}\r\n                          setOptions={setAvailableTags}\r\n                          selectedOptions={selectedTags}\r\n                          setSelectedOptions ={setSelectedTags}/>\r\n\r\n        <Button\r\n            variant=\"text\"\r\n            color=\"primary\"\r\n            size=\"small\"\r\n            className={classes.button}\r\n            onClick={() => setDialogAddTagOpen(true)}\r\n            startIcon={<AddIcon />}>\r\n            Add missing tag\r\n        </Button>\r\n        <AddDialog action={handleAddTag} textFieldLabel=\"Name\" open={dialogAddTagOpen} onCloseCallback={() => setDialogAddTagOpen(false)} header = \"Add a new tag\" />\r\n\r\n        <br/>\r\n        <br/>\r\n        <Typography variant=\"subtitle1\" >\r\n            Select categories\r\n        </Typography>\r\n        <AutocompleteChip label=\"Select categories\"\r\n                          id=\"categoryId\"\r\n                          options={availableCategories}\r\n                          setOptions={setAvailableCategories}\r\n                          selectedOptions={selectedCategories} \r\n                          setSelectedOptions={setSelectedCategories}/>\r\n        <Button\r\n            variant=\"text\"\r\n            color=\"primary\"\r\n            size=\"small\"\r\n            className={classes.button}\r\n            onClick={() => setDialogAddCategoryOpen(true)}\r\n            startIcon={<AddIcon />}>\r\n            Add missing category\r\n        </Button>\r\n        <AddDialog action={handleAddCategory}\r\n                   textFieldLabel=\"Name\"\r\n                   open={dialogAddCategoryOpen}\r\n                   onCloseCallback={() => setDialogAddCategoryOpen(false)}\r\n                   header = \"Add a new category\" />\r\n    </div>\r\n}\r\n\r\nexport default withStyles(styles)(PlaceDiscovery)","const initialScheduleData = [\r\n    {\r\n        \"scheduleDefault\": true,\r\n        \"periods\": [\r\n            {\r\n                openDay: 0,\r\n                closeDay: 0,\r\n                openTime: \"08:00\",\r\n                closeTime: \"17:00\"\r\n            },\r\n            {\r\n                openDay: 1,\r\n                closeDay: 1,\r\n                openTime: \"08:00\",\r\n                closeTime: \"17:00\"\r\n            },\r\n            {\r\n                openDay: 2,\r\n                closeDay: 2,\r\n                openTime: \"08:00\",\r\n                closeTime: \"17:00\"\r\n            },\r\n            {\r\n                openDay: 3,\r\n                closeDay: 3,\r\n                openTime: \"08:00\",\r\n                closeTime: \"17:00\"\r\n            },\r\n            {\r\n                openDay: 4,\r\n                closeDay: 4,\r\n                openTime: \"08:00\",\r\n                closeTime: \"17:00\"\r\n            }\r\n        ]\r\n    }\r\n]\r\n\r\nexport default initialScheduleData","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Avatar from \"@material-ui/core/Avatar\";\r\nimport Rating from \"@material-ui/lab/Rating\";\r\nimport moment from \"moment\";\r\nconst useStyles = makeStyles({\r\n    root: {\r\n        minWidth: 275,\r\n        width: \"20%\",\r\n        padding: \"2px\",\r\n        marginRight: \"16px\"\r\n    },\r\n\r\n});\r\nexport default function ReviewCard({review}) {\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <Card className={classes.root} variant=\"outlined\">\r\n            <CardContent>\r\n                <div style={{display: \"flex\"}} >\r\n                    <Avatar alt=\"Cindy Baker\" src={!!review.photoUrl ? review.photoUrl : \"/broken-image.jpg\"} />\r\n                    <div style={{display: \"flex\", flexDirection: \"column\", marginLeft:\"8px\"}}>\r\n                        <Typography title=\"subtitle1\">\r\n                            {review.name} {review.surname}\r\n                        </Typography>\r\n                        <div style={{display: \"flex\", justifyContent: \"space-between\"}}>\r\n                            <Rating size=\"small\" name=\"read-only\" value={review.rating} readOnly />\r\n                            <Typography title=\"subtitle1\">\r\n                                {\"+\" + review.upvotes}\r\n                            </Typography>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <Typography title=\"subtitle1\">\r\n                    {moment(review.timeAdded).format('LL')}\r\n                </Typography>\r\n                <div style={{marginTop: \"16px\"}}>\r\n                    {review.title}\r\n                </div>\r\n                <Typography title=\"subtitle1\">\r\n                        {review.review}\r\n                </Typography>\r\n\r\n            </CardContent>\r\n        </Card>\r\n    );\r\n}\r\n\r\n","import React, {useEffect, useState} from \"react\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport withStyles from \"@material-ui/core/styles/withStyles\";\r\nimport Rating from '@material-ui/lab/Rating';\r\nimport ReviewCard from \"../ReviewCard\";\r\nimport API from \"../../Networking/API\";\r\nimport debounce from \"lodash/debounce\";\r\nimport LinearProgress from \"@material-ui/core/LinearProgress\";\r\nimport FilterListIcon from '@material-ui/icons/FilterList';\r\nimport Tooltip from \"@material-ui/core/Tooltip\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Popover from \"@material-ui/core/Popover\";\r\nimport RadioGroup from \"@material-ui/core/RadioGroup\";\r\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\r\nimport Radio from \"@material-ui/core/Radio\";\r\n\r\nconst styles = theme => ({\r\n    reviewsInfo:{\r\n        display: \"flex\",\r\n    },\r\n    reviews:{\r\n        display: \"flex\",\r\n        width: \"100%\",\r\n        margin: theme.spacing(2),\r\n        overflowX: \"scroll\"\r\n    },\r\n    sortingButtons: {\r\n        padding: theme.spacing(2)\r\n    }\r\n});\r\n\r\nfunction Reviews({classes, placeInfo}) {\r\n\r\n    const [reviews, setReviews] = useState([]);\r\n    const [isLoading, setIsLoading] = useState(true);\r\n    const [page, setPage] = useState(1);\r\n\r\n    const [anchorEl, setAnchorEl] = React.useState(null);\r\n    const open = Boolean(anchorEl);\r\n    const id = open ? 'simple-popover' : undefined;\r\n\r\n    const [filterBy, setFilterBy] = useState('mostRated');\r\n\r\n    function getReviewsForPlace(urlParams = \"?p=\"+placeInfo.placeId) {\r\n        API.Reviews.getPlaceReviews(urlParams).then(response=>{\r\n            setReviews(old=>[...old, ...response.list]);\r\n            setIsLoading(false)\r\n        }).catch(error=>{\r\n            setIsLoading(false)\r\n        })\r\n    }\r\n\r\n    //Get ordered by new filter\r\n    useEffect(()=>{\r\n            getReviewsForPlace(\"?p=\"+placeInfo.placeId+\"&page=1&o=\"+filterBy)\r\n    },[filterBy]);\r\n\r\n\r\n    const handleScrollDebounced = (e) => {\r\n        const scrollOffset = 0;\r\n        const bottom = Math.round(e.target.scrollWidth - e.target.scrollLeft - scrollOffset)  <= e.target.clientWidth;\r\n        if (bottom && !isLoading && reviews.length>0 && reviews.length<placeInfo.totalReviews) {\r\n            setIsLoading(true);\r\n            setPage(old=>{\r\n                getReviewsForPlace(\"?p=\"+placeInfo.placeId+\"&page=\"+(old+1)+\"&o=\"+filterBy);\r\n                return old+1\r\n            });\r\n        }\r\n    };\r\n\r\n    const debounceScroll = debounce(e => handleScrollDebounced(e), 200);\r\n\r\n    const handleScroll = (e) => {\r\n        e.persist();\r\n        debounceScroll(e)\r\n    };\r\n\r\n\r\n    const handleClick = (event) => {\r\n        setAnchorEl(event.currentTarget);\r\n    };\r\n\r\n    const handleClose = () => {\r\n        setAnchorEl(null);\r\n    };\r\n\r\n\r\n    function changeSorting(e){\r\n        const {name, value} = e.target;\r\n        setFilterBy(value);\r\n        setReviews([]);\r\n        setPage(1);\r\n        handleClose()\r\n    }\r\n\r\n\r\n    return <div>\r\n        <Typography variant=\"h6\" >\r\n            Reviews\r\n            <br/>\r\n            {\r\n               reviews.length > 0 ?\r\n                   <React.Fragment>\r\n                       <div style={{display:\"flex\", justifyContent: \"space-between\"}}>\r\n                           <div className={classes.reviewsInfo}>\r\n                               <Rating name=\"read-only\" value={placeInfo.overallStarRating} precision={0.2} readOnly />\r\n                               <Typography style={{marginLeft:\"8px\"}} variant=\"subtitle1\">\r\n                                   {placeInfo.totalReviews} reviews\r\n                               </Typography>\r\n                           </div>\r\n                           <Tooltip aria-describedby={id} title=\"Filter list\">\r\n                               <IconButton  aria-label=\"filter list\" onClick={handleClick}>\r\n                                   <FilterListIcon />\r\n                               </IconButton>\r\n                           </Tooltip>\r\n                           <Popover\r\n                               id={id}\r\n                               open={open}\r\n                               anchorEl={anchorEl}\r\n                               onClose={handleClose}\r\n                               anchorOrigin={{\r\n                                   vertical: 'bottom',\r\n                                   horizontal: 'center',\r\n                               }}\r\n                               transformOrigin={{\r\n                                   vertical: 'top',\r\n                                   horizontal: 'center',\r\n                               }}\r\n                           >\r\n                               <RadioGroup className={classes.sortingButtons} aria-label=\"gender\" value={filterBy} name=\"gender1\"  onChange={changeSorting}>\r\n                                   <FormControlLabel value=\"mostRated\" control={<Radio />} label=\"Most rated\" />\r\n                                   <FormControlLabel value=\"newest\" control={<Radio />} label=\"Newest\" />\r\n                               </RadioGroup>\r\n                           </Popover>\r\n                       </div>\r\n\r\n                       <div style={{display: \"flex\", justifyContent: \"space-between\"}}>\r\n                           <Typography>\r\n                               Showing: {reviews.length} out of {placeInfo.totalReviews}\r\n                           </Typography>\r\n                           <Typography>\r\n                               Sorting by: {filterBy}\r\n                           </Typography>\r\n                       </div>\r\n                       <div className={classes.reviews} onScroll={e=>handleScroll(e)}>\r\n                           {reviews.map(row=>{\r\n                               return <ReviewCard review={row}/>\r\n                           })}\r\n                       </div>\r\n                   </React.Fragment> : <Typography> No reviews for this place</Typography>\r\n            }\r\n\r\n        </Typography>\r\n        <br/>\r\n        {isLoading ? <LinearProgress/> : null }\r\n    </div>\r\n}\r\n\r\nexport default withStyles(styles)(Reviews)","import React, { useState } from 'react';\r\n\r\nexport const AppBarTitleContext = React.createContext({\r\n    title: \"\",\r\n    setTitle: () => {},\r\n});\r\n\r\nexport default function AppBarTitleProvider({ children }) {\r\n    const [title, setTitle] = useState(\"Home\");\r\n\r\n    const contextValue = {\r\n        title,\r\n        setTitle: (title) => setTitle(title)\r\n    };\r\n\r\n    return (\r\n        <AppBarTitleContext.Provider value={contextValue}>\r\n            {children}\r\n        </AppBarTitleContext.Provider>\r\n    );\r\n}","import React, {useContext} from \"react\";\r\nimport {AppBarTitleContext} from \"./AppBarTitleContext\";\r\n\r\nexport default function UseAppBarTitleContext() {\r\n    const { title, setTitle } = useContext(AppBarTitleContext);\r\n    return { title, setTitle };\r\n}\r\n","import PropTypes from \"prop-types\";\r\nimport {withStyles} from \"@material-ui/core/styles\";\r\nimport React, {useEffect, useState} from \"react\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport DeleteOutlineIcon from '@material-ui/icons/DeleteOutline';\r\nimport { TimePicker } from \"@material-ui/pickers\";\r\nimport moment from \"moment\";\r\nimport WarningIcon from '@material-ui/icons/Warning';\r\nimport Moment from \"react-moment\";\r\nimport Checkbox from \"@material-ui/core/Checkbox\";\r\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\r\nimport useMediaQuery from \"@material-ui/core/useMediaQuery\";\r\nimport useTheme from \"@material-ui/core/styles/useTheme\";\r\n\r\nconst styles = theme => ({\r\n    root: {\r\n        display: \"flex\",\r\n        justifyContent : \"space-between\",\r\n        margin: theme.spacing(0.5),\r\n        // padding: theme.spacing(0.5),\r\n        alignItems: \"center\",\r\n        flexFlow: \"row wrap\"\r\n    },\r\n    picker: {\r\n        margin: theme.spacing(0.5),\r\n        width: \"30%\"\r\n    },\r\n    intervalRightSide: {\r\n        display: \"flex\",\r\n        // width: \"100%\",\r\n        // justifyContent : \"space-between\",\r\n        alignItems: \"center\",\r\n    },\r\n    intervalLeftSide: {\r\n    }\r\n});\r\n\r\nfunction ScheduleInterval({classes, intervals, index, setIntervals}){\r\n\r\n    let currentInterval = intervals[index]\r\n\r\n    const [lastAccommodationEnabled, setLastAccommodationEnabled] = useState(currentInterval.lastAccommodation != null)\r\n    const [lastAccommodationTime, setLastAccommodationTime] = useState(currentInterval.lastAccommodation == null ? currentInterval.closeTime : currentInterval.lastAccommodation)\r\n\r\n    const getCloseDay = (closeTime, openTime) => {\r\n        let currentPeriod = intervals[index]\r\n        if(moment(closeTime, \"HH:mm\").isBefore(moment(openTime, \"HH:mm\")))\r\n            return (currentPeriod.openDay + 1) > 6 ? 0 : (currentPeriod.openDay +1)\r\n        else return currentPeriod.openDay\r\n    }\r\n\r\n    let handleUpdateOpenTime = (value) => {\r\n        setIntervals((oldIntervals) => {\r\n            return oldIntervals.map((item, i) => {\r\n                if(index === i){\r\n                    return {\r\n                        ...item,\r\n                        openTime: moment(value).format(\"HH:mm\").toString(),\r\n                        closeDay: getCloseDay(item.closeTime, value)\r\n                    }\r\n                }else return item\r\n            })\r\n        })\r\n    }\r\n    let handleUpdateCloseTime = (value) => {\r\n        setIntervals((oldIntervals) => {\r\n            return oldIntervals.map((item, i) => {\r\n                if(index === i){\r\n                    return {\r\n                        ...item,\r\n                        closeTime: moment(value).format(\"HH:mm\").toString(),\r\n                        closeDay: getCloseDay(value, item.openTime)\r\n                    }\r\n                }else return item\r\n            })\r\n\r\n        })\r\n    }\r\n\r\n    const handleDelete = () => {\r\n        setIntervals(oldIntervals => {\r\n            return oldIntervals.filter((item, i) => i !== index)\r\n        })\r\n    }\r\n\r\n    useEffect(() => {\r\n        setIntervals((oldIntervals) => {\r\n            return oldIntervals.map((item, i) => {\r\n                if(index === i){\r\n                    return {\r\n                        ...item,\r\n                        lastAccommodation: lastAccommodationEnabled ? lastAccommodationTime.toString() : null\r\n                    }\r\n                }else return item\r\n            })\r\n\r\n        })\r\n    }, [lastAccommodationTime, lastAccommodationEnabled])\r\n\r\n    const theme = useTheme();\r\n    const largeScreen = useMediaQuery(theme.breakpoints.only('lg'));\r\n\r\n    return(\r\n        <div className={classes.root}>\r\n            <div className={classes.intervalLeftSide}>\r\n                <TimePicker\r\n                    margin=\"normal\"\r\n                    ampm={false}\r\n                    label=\"Opens\"\r\n                    className={classes.picker}\r\n                    format=\"HH:mm\"\r\n                    value={moment(currentInterval.openTime, \"HH:mm\")}\r\n                    onChange={handleUpdateOpenTime}\r\n                    InputProps={{\r\n                        disableUnderline: true,\r\n                    }}\r\n                />\r\n                <TimePicker\r\n                    margin=\"normal\"\r\n                    ampm={false}\r\n                    className={classes.picker}\r\n                    label=\"Closes\"\r\n                    format=\"HH:mm\"\r\n                    value={moment(currentInterval.closeTime, \"HH:mm\")}\r\n                    onChange={handleUpdateCloseTime}\r\n                    InputProps={{\r\n                        disableUnderline: true,\r\n                    }}\r\n                />\r\n\r\n                {intervals[index].closeDay !== intervals[index].openDay &&\r\n                    <React.Fragment>\r\n                        <Typography variant=\"subtitle1\">\r\n                            <WarningIcon style={{marginRight: \"10px\"}}/>\r\n                            Closes the next day\r\n                        </Typography>\r\n                    </React.Fragment>}\r\n\r\n                {!largeScreen &&\r\n                <Button color=\"primary\" onClick={handleDelete}>\r\n                    <DeleteOutlineIcon/>\r\n                </Button>\r\n                }\r\n            </div>\r\n\r\n            <div className={classes.intervalRightSide}>\r\n\r\n                <Checkbox checked={lastAccommodationEnabled} onChange={() => setLastAccommodationEnabled(state => !state)} />\r\n\r\n                <TimePicker\r\n                    margin=\"normal\"\r\n                    ampm={false}\r\n                    label=\"Last accommodation\"\r\n                    format=\"HH:mm\"\r\n                    disabled={!lastAccommodationEnabled}\r\n                    value={moment(lastAccommodationTime.toString(), \"HH:mm\")}\r\n                    onChange={(value) => setLastAccommodationTime(moment(value).format(\"HH:mm\").toString())}\r\n                    InputProps={{\r\n                        disableUnderline: true,\r\n                    }}\r\n                />\r\n\r\n                {largeScreen &&\r\n                    <Button color=\"primary\" onClick={handleDelete}>\r\n                    <DeleteOutlineIcon/>\r\n                    </Button>\r\n                }\r\n\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nScheduleInterval.propTypes = {\r\n    classes: PropTypes.object.isRequired,\r\n    intervals: PropTypes.array.isRequired,\r\n    setIntervals: PropTypes.func.isRequired,\r\n    index: PropTypes.number.isRequired,\r\n};\r\n\r\nexport default withStyles(styles)(ScheduleInterval)\r\n","import PropTypes from \"prop-types\";\r\nimport {withStyles} from \"@material-ui/core/styles\";\r\nimport React, {useEffect, useState} from \"react\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport AddIcon from \"@material-ui/icons/Add\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport ScheduleInterval from \"./ScheduleInterval\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\n\r\nconst styles = theme => ({\r\n    header: {\r\n        display: \"flex\",\r\n        justifyContent : \"space-between\"\r\n    },\r\n    root: {\r\n        margin: theme.spacing(0.5),\r\n        padding: theme.spacing(0.5)\r\n    }\r\n});\r\n\r\nfunction DayComponent({classes, scheduleData, setScheduleData, openDay, onChange}){\r\n\r\n    let [intervals, setIntervals] = useState(scheduleData.periods.filter(item => item.openDay === openDay))\r\n\r\n    useEffect(() => {\r\n        onChange(intervals, openDay)\r\n        console.log(intervals)\r\n    }, [intervals])\r\n\r\n    let weekDays = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday']\r\n\r\n    const handleAddPeriod = () => {\r\n        setIntervals(oldIntervals => {\r\n            return [\r\n                ...oldIntervals,\r\n                {openDay: openDay, closeDay: openDay, openTime: \"08:00\", closeTime: \"18:00\"}\r\n            ]\r\n        })\r\n    }\r\n\r\n    return(\r\n        <div className={classes.root}>\r\n            <div className={classes.header}>\r\n                <Typography variant=\"h6\" >\r\n                    {weekDays[openDay]}\r\n                </Typography>\r\n                <Button color=\"secondary\" onClick={handleAddPeriod}>\r\n                    <AddIcon/>\r\n                </Button>\r\n            </div>\r\n\r\n            {intervals.map((value, index) => {\r\n                return <React.Fragment>\r\n                    <Divider variant=\"middle\" />\r\n                    <ScheduleInterval index={index} intervals={intervals} setIntervals={setIntervals}/>\r\n                </React.Fragment>\r\n            })}\r\n\r\n        </div>\r\n    )\r\n}\r\n\r\nDayComponent.propTypes = {\r\n    classes: PropTypes.object.isRequired,\r\n    scheduleData: PropTypes.object.isRequired,\r\n    setScheduleData: PropTypes.func.isRequired,\r\n    onChange: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default withStyles(styles)(DayComponent)\r\n","import PropTypes from \"prop-types\";\r\nimport {withStyles} from \"@material-ui/core/styles\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport React, {useEffect, useState} from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport RemoveIcon from \"@material-ui/icons/Remove\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport {DatePicker, MuiPickersUtilsProvider} from '@material-ui/pickers';\r\nimport Divider from \"@material-ui/core/Divider\";\r\nimport DayComponent from \"./DayComponent\";\r\nimport moment from \"moment\";\r\n\r\nconst styles = theme => ({\r\n    header: {\r\n        display: \"flex\",\r\n        justifyContent : \"space-between\"\r\n    },\r\n    root: {\r\n        padding: theme.spacing(2),\r\n        margin: theme.spacing(1)\r\n    },\r\n    pickerStyle: {\r\n        margin: theme.spacing(1)\r\n    },\r\n    headerLeft: {\r\n        width: \"100%\",\r\n        display: \"flex\",\r\n        justifyContent: \"left\"\r\n    }\r\n});\r\n\r\nfunction Schedule({classes, data, setData, index}){\r\n\r\n    const[periods, setPeriods] = useState([...data.periods])\r\n\r\n    const handleIntervalChange = (newIntervals, openDay) => {\r\n        setPeriods(oldPeriods => {\r\n            let filtered = oldPeriods.filter(item => item.openDay !== openDay)\r\n            if(newIntervals.length === 0)\r\n                return [...filtered]\r\n            return [\r\n                ...filtered,\r\n                ...newIntervals\r\n            ]\r\n        })\r\n    }\r\n\r\n    useEffect(() => {\r\n        setData(oldData => {\r\n            return oldData.map((schedule, i) => {\r\n                if( i === index){\r\n                    return {...schedule, periods: periods}\r\n                }else return schedule\r\n            })\r\n        })\r\n    }, [periods])\r\n\r\n    const generateWeekdayViews = () => {\r\n        let views = []\r\n        for(let i =0; i < 7; i++){\r\n            views.push(<DayComponent scheduleData={data} onChange={handleIntervalChange} setScheduleData={setData} openDay={i} key={i}/>)\r\n        }\r\n        return views\r\n    }\r\n\r\n    const updateFromTime = (value) => {\r\n        setData(oldData => {\r\n            return oldData.map((schedule, i) => {\r\n                if( i === index){\r\n                    return {...schedule, from: moment(value).format('MM-DD').toString()}\r\n                }else return schedule\r\n            })\r\n        })\r\n    }\r\n    const updateToTime = (value) => {\r\n        setData(oldData => {\r\n            return oldData.map((schedule, i) => {\r\n                if( i === index){\r\n                    return {...schedule, to: moment(value).format('MM-DD').toString()}\r\n                }else return schedule\r\n            })\r\n        })\r\n    }\r\n    const removeSchedule = () => {\r\n        setData(oldData => {\r\n            return oldData.filter((item, i) => index !== i)\r\n        })\r\n    }\r\n\r\n    return(\r\n        <Paper className={classes.root}>\r\n            <div className={classes.header}>\r\n                <div className={classes.headerLeft}>\r\n                    {data.scheduleDefault &&\r\n                    <Typography variant=\"h6\" >\r\n                        Date: Year round\r\n                    </Typography>}\r\n                    {!data.scheduleDefault &&\r\n                        <React.Fragment>\r\n                            <DatePicker\r\n                                className={classes.pickerStyle}\r\n                                views={[\"month\", \"date\"]}\r\n                                label=\"From\"\r\n                                value={moment(data.from, \"MM-DD\")}\r\n                                onChange={updateFromTime}\r\n                            />\r\n                            <DatePicker\r\n                                className={classes.pickerStyle}\r\n                                views={[\"month\", \"day\"]}\r\n                                label=\"To\"\r\n                                value={moment(data.to, \"MM-DD\")}\r\n                                onChange={updateToTime}\r\n                            />\r\n                        </React.Fragment>\r\n                    }\r\n                </div>\r\n                {!data.scheduleDefault &&\r\n                <Button color=\"secondary\" onClick = {removeSchedule}>\r\n                    <RemoveIcon/>\r\n                </Button>}\r\n\r\n            </div>\r\n            <br/>\r\n            {generateWeekdayViews()}\r\n        </Paper>\r\n    )\r\n}\r\n\r\nSchedule.propTypes = {\r\n    classes: PropTypes.object.isRequired,\r\n    data: PropTypes.object.isRequired,\r\n    setData: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default withStyles(styles)(Schedule)\r\n","import PropTypes from \"prop-types\";\r\nimport {withStyles} from \"@material-ui/core/styles\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport React, {useEffect, useState} from \"react\";\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Schedule from \"../Schedule\";\r\nimport Switch from \"@material-ui/core/Switch\";\r\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport {TimePicker} from \"@material-ui/pickers\";\r\nimport moment from \"moment\";\r\n\r\nconst styles = theme => ({\r\n    header: {\r\n        display: \"flex\",\r\n        justifyContent : \"space-between\",\r\n        flexWrap: \"wrap\"\r\n    }\r\n});\r\n\r\nfunction SchedulesWrapper({classes, scheduleData, setScheduleData, isScheduleEnabled, setIsScheduleEnabled}){\r\n\r\n    const addSchedule = () => {\r\n        setScheduleData(oldData => {\r\n            return [\r\n                ...oldData,\r\n                {scheduleDefault: false, from: \"01-01\", to: \"01-02\", periods : []}\r\n            ]\r\n        })\r\n    }\r\n\r\n    return(\r\n        <div>\r\n            <div className={classes.header}>\r\n                <Typography variant=\"h6\" >\r\n                    Working schedule\r\n                </Typography>\r\n                <FormControlLabel\r\n                    control={\r\n                        <Switch\r\n                            checked={isScheduleEnabled}\r\n                            onChange={() => setIsScheduleEnabled(state => !state)}\r\n                            color=\"primary\"\r\n                        />\r\n                    }\r\n                    label=\"Enable schedule for this place?\"\r\n                />\r\n            </div>\r\n            <br/>\r\n            {isScheduleEnabled &&\r\n                <React.Fragment>\r\n                    {scheduleData.map((value, index) => {\r\n                        return <Schedule data={value} index={index} setData={setScheduleData}/>\r\n                    })}\r\n                    <Button style={{float: \"right\"}}color=\"secondary\" onClick={addSchedule}>\r\n                        <AddIcon/>\r\n                    </Button>\r\n                </React.Fragment>}\r\n        </div>\r\n    )\r\n}\r\n\r\nSchedulesWrapper.propTypes = {\r\n    classes: PropTypes.object.isRequired,\r\n    scheduleData: PropTypes.array.isRequired,\r\n    setScheduleData: PropTypes.func.isRequired,\r\n    isScheduleEnabled: PropTypes.object.isRequired,\r\n    setIsScheduleEnabled: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default withStyles(styles)(SchedulesWrapper)\r\n","import React, {useEffect, useState} from \"react\";\r\nimport {withStyles} from \"@material-ui/core/styles\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport PropTypes, {func} from \"prop-types\";\r\nimport {Paper} from '@material-ui/core';\r\nimport BasicPlaceInfo from \"../components/add_place_components/BasicPlaceInfo\";\r\nimport PhotosInfo from \"../components/add_place_components/PhotosInfo\";\r\nimport PlaceLocation from \"../components/add_place_components/PlaceLocation\";\r\nimport ParkingLocation from \"../components/add_place_components/ParkingLocation\";\r\nimport PlaceDiscovery from \"../components/add_place_components/PlaceDiscovery\";\r\nimport initialScheduleData from \"../components/add_place_components/initialScheduleData\";\r\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\r\nimport Switch from \"@material-ui/core/Switch\";\r\nimport API from \"../Networking/API\";\r\nimport UseSnackbarContext from \"../contexts/UseSnackbarContext\";\r\nimport UseAlertDialogContext from \"../contexts/UseAlertDialogContext\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport LinearProgress from \"@material-ui/core/LinearProgress\";\r\nimport Strings from \"../helpers/stringResources\";\r\nimport green from \"@material-ui/core/colors/green\";\r\nimport Reviews from \"../components/add_place_components/Reviews\";\r\nimport UseAppBarTitleContext from \"../contexts/UseAppBarTitleContext\";\r\nimport Schedule from \"../components/add_place_components/SchedulesWrapper\";\r\nimport SchedulesWrapper from \"../components/add_place_components/SchedulesWrapper\";\r\n\r\nconst styles = theme => ({\r\n    button: {\r\n        margin: theme.spacing(2)\r\n    },\r\n    paperContent: {\r\n        marginTop: theme.spacing(4),\r\n        [theme.breakpoints.down(\"lg\")]: {\r\n            width: \"95%\",\r\n            padding: theme.spacing(2),\r\n        },\r\n        [theme.breakpoints.up(\"lg\")]: {\r\n            width: \"70%\",\r\n            padding: theme.spacing(4),\r\n        },\r\n    },\r\n    root:{\r\n        height:\"100vh\"\r\n    },\r\n    loader:{\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        justifyContent: \"center\",\r\n        width: \"100vw\",\r\n        height: \"100vh\"\r\n    },\r\n    content:{\r\n        display:\"flex\",\r\n        flexDirection: \"column\",\r\n        alignItems: \"center\",\r\n        height:`calc(93vh - 64px)`,\r\n        [theme.breakpoints.down(\"lg\")]: {\r\n            width: \"100%\",\r\n            padding: theme.spacing(1),\r\n        },\r\n        [theme.breakpoints.up(\"lg\")]: {\r\n            width: \"auto\",\r\n            padding: theme.spacing(8),\r\n        },\r\n        overflowY: \"auto\"\r\n    },\r\n    bottom:{\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        justifyContent: \"space-around\",\r\n        padding: theme.spacing(1),\r\n        height: \"7vh\"\r\n    }\r\n});\r\n\r\n\r\nfunction AddPlace({classes, match}){\r\n    const [placeInfo, setPlaceInfo] = useState({placeId: \"\",\r\n        name: \"\", description: \"\",website: \"\", phoneNumber: \"\",\r\n        hasSchedule: false, isPublic: false, isVerified: true, overallStarRating: 0, totalReviews: 0,\r\n        source: \"\", price: \"\", averageTimeSpent: \"0\"});\r\n\r\n\r\n    const [selectedTags, setSelectedTags] = useState([]);\r\n    const [selectedCategories, setSelectedCategories] = useState([]);\r\n\r\n    const [photos, setPhotos] = useState([]);\r\n\r\n    const [locationData, setLocationData] = useState({city: '', address: '', country: '', latitude: 54.687157, longitude: 25.279652});\r\n    const [parkingMarkerData, setParkingMarkerData] = useState({city: '', address: '', country: '', latitude: 54.687157, longitude: 25.279652});\r\n    const [allSelectedParkingData, setAllSelectedParkingData] = useState([]);\r\n\r\n    const [sources, setSources] = useState([]);\r\n\r\n    const [scheduleData, setScheduleData] = useState(initialScheduleData);\r\n    const [isScheduleEnabled, setIsScheduleEnabled] = useState(false);\r\n\r\n    const [placeId, setPlaceId] = useState(match.params.placeId);\r\n\r\n    const [firstTimeLoading, setFirstTimeLoading] = useState(true);\r\n    const [isLoading, setIsLoading] = useState(false);\r\n\r\n    const [error, setError] = useState({name: false});\r\n    const [checkErrors, setCheckErrors] = useState(false);\r\n\r\n\r\n    const { addConfig } = UseSnackbarContext();\r\n    const { addAlertConfig } = UseAlertDialogContext();\r\n\r\n    const { title, setTitle } = UseAppBarTitleContext();\r\n\r\n    const ColorButton = withStyles((theme) => ({\r\n        root: {\r\n            color: theme.palette.getContrastText(green[500]),\r\n            backgroundColor: green[500],\r\n            '&:hover': {\r\n                backgroundColor: green[700],\r\n            },\r\n        },\r\n    }))(Button);\r\n\r\n    useEffect(()=>{\r\n        console.log(placeId)\r\n        //Loaded place for editing\r\n        if(placeId!==undefined){\r\n            console.log(\"Getting place location\");\r\n            getPlaceInfo()\r\n        }else{\r\n            setTitle(\"Add new place\");\r\n            console.log(\"Came here to add new place\");\r\n            setFirstTimeLoading(false) //Just loaded add place window\r\n        }\r\n\r\n        //New Place has been just inserted, thus inserting other place info\r\n        if(placeId!==undefined && firstTimeLoading===false){\r\n            console.log(\"Just added new place\");\r\n            Promise.all([\r\n                updateTagsData(placeId),\r\n                updateParkingData(placeId),\r\n                updateCategoriesData(placeId),\r\n                updatePhotoData(placeId),\r\n                updateSchedule(placeId),\r\n                updateSources(placeId)\r\n            ]).then(responses=>{\r\n                formFeedback(true, Strings.SNACKBAR_PLACE_INSERTED_SUCCESS)\r\n            }).catch(error=>{\r\n                formFeedback(false)\r\n            })\r\n        }\r\n\r\n    },[placeId]);\r\n\r\n    useEffect(()=>{\r\n        if(firstTimeLoading === false){\r\n            console.log(\"Making this place public\");\r\n            updateAll()\r\n        }\r\n    },[placeInfo['isPublic']]);\r\n\r\n    function getPlaceInfo() {\r\n        API.Places.getPlaceById(\"?full=true&p=\"+placeId).then(response=>{\r\n            setAllData(response)\r\n            setTitle(\"Editing place/\"+response.name);\r\n        }).catch(error=>{\r\n            formFeedback(false)\r\n        })\r\n    }\r\n\r\n    function setAllData(place){\r\n        console.log(\"Got data:\",place);\r\n        setPlaceInfo({\r\n            placeId: place.placeId,\r\n            name: place.name,\r\n            description: place.description,\r\n            website: place.website,\r\n            phoneNumber: place.phoneNumber,\r\n            hasSchedule: place.hasSchedule,\r\n            isPublic: place.isPublic,\r\n            isVerified: place.isVerified,\r\n            overallStarRating: place.overallStarRating,\r\n            totalReviews: place.totalReviews,\r\n            price: place.price,\r\n            averageTimeSpent: place.averageTimeSpent\r\n        });\r\n\r\n        setLocationData({city: place.city,\r\n            address: place.address,\r\n            country: place.country,\r\n            latitude: place.latitude,\r\n            longitude: place.longitude});\r\n\r\n        setSources(place.sources);\r\n        setSelectedTags(place.tags);\r\n        setSelectedCategories(place.categories);\r\n        if(place.schedule.length > 0) {\r\n            setScheduleData([...place.schedule]);\r\n            setIsScheduleEnabled(true)\r\n        }else setIsScheduleEnabled(false)\r\n\r\n        setAllSelectedParkingData(place.parking);\r\n        setPhotos(place.photos);\r\n        setFirstTimeLoading(false)\r\n    }\r\n\r\n    function formFeedback(success, message=Strings.SNACKBAR_ERROR){\r\n        addConfig(success, message);\r\n        setIsLoading(false)\r\n    }\r\n\r\n    function saveChanges(){\r\n        if(placeId === undefined){\r\n            addAlertConfig(Strings.DIALOG_PLACE_INSERT_TITLE, Strings.DIALOG_PLACE_INSERT, [{name: \"Insert\", action: ()=>{\r\n                    setIsLoading(true);\r\n                    insertBasicPlaceInfo()\r\n                }}])\r\n        }else{\r\n            addAlertConfig(Strings.DIALOG_PLACE_UPDATE_TITLE, Strings.DIALOG_PLACE_UPDATE, [{name: \"save and publish\", action: ()=>{\r\n                    let plc = Object.assign({}, placeInfo, {});\r\n                    plc.isPublic = 1;\r\n                    setPlaceInfo(plc);\r\n                    setIsLoading(true);\r\n                    updateAll()\r\n                }},{name: \"save\", action: ()=>{\r\n                    setIsLoading(true);\r\n                    updateAll()\r\n                }}])\r\n        }\r\n    }\r\n\r\n    function updateAll(){\r\n        Promise.all([\r\n            updatePlaceInfo(),\r\n            updateTagsData(placeId),\r\n            updatePhotoData(placeId),\r\n            updateCategoriesData(placeId),\r\n            updateParkingData(placeId),\r\n            updateSchedule(placeId),\r\n            updateSources(placeId)\r\n        ]).then(response=>{\r\n            formFeedback(true, Strings.SNACKBAR_CHANGES_SAVED);\r\n        }).catch(err=>{\r\n            formFeedback(false)\r\n        })\r\n    }\r\n\r\n    function updatePlaceInfo() {\r\n        console.log(formPlaceInfo());\r\n        API.Places.updatePlace(formPlaceInfo()).then(response=>{\r\n\r\n        }).catch(error=>{\r\n\r\n        })\r\n\r\n    }\r\n\r\n    function insertBasicPlaceInfo(){\r\n            API.Places.insertPlace(formPlaceInfo()).then(placeId=>{\r\n                setPlaceId(placeId)\r\n            }).catch(error=>{\r\n\r\n            })\r\n    }\r\n\r\n    function updateParkingData(id) {\r\n        API.ParkingPlace.updateParkingForPlace(allSelectedParkingData, \"?p=\"+id).then(response=>{\r\n\r\n        }).catch(error=>{\r\n\r\n        })\r\n    }\r\n\r\n    function updateTagsData(id) {\r\n        API.TagsPlace.updateTagsForPlace(selectedTags, \"?p=\"+id).then(response=>{\r\n\r\n        }).catch(error=>{\r\n\r\n        })\r\n    }\r\n\r\n    function updateSources(id) {\r\n        console.log(\"Hello\")\r\n        API.SourcePlace.updateSourcesForPlace(sources, \"?p=\"+id).then(response=>{\r\n            console.log(sources)\r\n        }).catch(error=>{\r\n\r\n        })\r\n    }\r\n\r\n\r\n    function updateCategoriesData(id) {\r\n        API.CategoriesPlace.updateCategoriesForPlace(selectedCategories, \"?p=\"+id).then(response=>{\r\n\r\n        }).catch(error=>{\r\n\r\n        })\r\n    }\r\n\r\n    function updatePhotoData(id) {\r\n        API.PhotoPlace.updatePhotoForPlace(photos, \"?p=\"+id).then(response=>{\r\n\r\n        }).catch(error=>{\r\n\r\n        })\r\n    }\r\n\r\n\r\n    function updateSchedule(id){\r\n        console.log(scheduleData);\r\n        API.Schedule.updateScheduleForPlace(isScheduleEnabled ? scheduleData : [], \"?id=\" + id).then(response => {\r\n        }).catch(er => {\r\n        })\r\n\r\n    }\r\n\r\n    function formPlaceInfo(){\r\n        let d = Object.assign(placeInfo, locationData);\r\n        return d\r\n    }\r\n\r\n\r\n    function publishPlace(){\r\n        addAlertConfig(Strings.DIALOG_PLACE_PUBLISH_TITLE, placeInfo['isPublic'] ? Strings.DIALOG_PLACE_UNPUBLISH_MESSAGE : Strings.DIALOG_PLACE_PUBLISH_MESSAGE,\r\n            [{name: \"Agree\", action: ()=>{\r\n                let obj = Object.assign({}, placeInfo, {});\r\n                obj['isPublic'] = !obj['isPublic'];\r\n                setPlaceInfo(obj);\r\n            }}])\r\n\r\n    }\r\n\r\n    function verifyPlace(){\r\n        addAlertConfig(Strings.DIALOG_PLACE_VERIFY_TITLE, Strings.DIALOG_PLACE_VERIFY_MESSAGE, [{name: \"agree\", action: ()=>{\r\n                let obj = Object.assign({}, placeInfo, {});\r\n                obj['isPublic'] = 1;\r\n                obj['isVerified'] = 1;\r\n                setPlaceInfo(obj);\r\n            }}])\r\n    }\r\n\r\n    return(\r\n        <div className={classes.root}>\r\n            {firstTimeLoading ? <div className={classes.loader}><CircularProgress /></div> : <div className={classes.content}>\r\n\r\n\r\n                <Paper elevation = {4} className={classes.paperContent}>\r\n                    <BasicPlaceInfo\r\n                        error={error}\r\n                        setError={setError}\r\n                        checkErrors={checkErrors}\r\n                        placeInfo={placeInfo}\r\n                        setPlaceInfo={setPlaceInfo}\r\n                        selectedSources={sources}\r\n                        setSelectedSources={setSources}\r\n                    />\r\n\r\n                </Paper>\r\n\r\n                {placeId !== undefined ?\r\n                    <Paper elevation = {4} className={classes.paperContent}>\r\n                        <Reviews\r\n                            placeInfo={placeInfo}\r\n                        />\r\n                    </Paper>\r\n                    : null}\r\n\r\n                <Paper elevation = {4} className={classes.paperContent}>\r\n                    <PhotosInfo\r\n                        photos={photos}\r\n                        setPhotos={setPhotos}\r\n                    />\r\n                </Paper>\r\n                <Paper elevation = {4} className={classes.paperContent}>\r\n                    <PlaceLocation\r\n                        error={error}\r\n                        setError={setError}\r\n                        checkErrors={checkErrors}\r\n                        locationData={locationData}\r\n                        setLocationData={setLocationData}/>\r\n                </Paper>\r\n                <Paper elevation = {4} className={classes.paperContent}>\r\n                    <ParkingLocation\r\n                        allSelectedParkingData={allSelectedParkingData}\r\n                        setAllSelectedParkingData={setAllSelectedParkingData}\r\n                        parkingMarkerData={parkingMarkerData}\r\n                        setParkingMarkerData={setParkingMarkerData}/>\r\n                </Paper>\r\n                <Paper elevation = {4} className={classes.paperContent}>\r\n                    <PlaceDiscovery\r\n                        selectedTags={selectedTags}\r\n                        setSelectedTags={setSelectedTags}\r\n                        selectedCategories={selectedCategories}\r\n                        setSelectedCategories={setSelectedCategories}/>\r\n                </Paper>\r\n\r\n                <Paper elevation = {4} className={classes.paperContent}>\r\n                    <SchedulesWrapper isScheduleEnabled={isScheduleEnabled} setIsScheduleEnabled={setIsScheduleEnabled} setScheduleData={setScheduleData} scheduleData={scheduleData}/>\r\n                </Paper>\r\n            </div> }\r\n\r\n            {isLoading ? <LinearProgress/> : null}\r\n\r\n            <Paper elevation={1} className={classes.bottom}>\r\n\r\n                {\r\n\r\n                    placeInfo['isVerified'] === false && placeId !== undefined ?\r\n                        <ColorButton\r\n                            variant=\"contained\"\r\n                            color=\"primary\"\r\n                            onClick={()=>{verifyPlace()}}\r\n                            className={classes.button}\r\n                        >\r\n                            Verify place\r\n                        </ColorButton>\r\n                    :\r\n                    <FormControlLabel\r\n                    control={<Switch checked={placeInfo['isPublic']} onChange={()=> {\r\n                        publishPlace()\r\n                    }\r\n                    } name=\"isPublic\" />}\r\n                    label=\"Make this place public\"\r\n                />}\r\n                <Button\r\n                    variant=\"contained\"\r\n                    color=\"primary\"\r\n                    onClick={()=>saveChanges()}\r\n                    className={classes.button}>\r\n                    Save\r\n                </Button>\r\n\r\n\r\n            </Paper>\r\n        </div>)\r\n\r\n}\r\n\r\nAddPlace.propTypes = {\r\n    classes: PropTypes.object.isRequired\r\n};\r\n\r\nexport default withStyles(styles)(AddPlace)\r\n\r\n\r\n","import withStyles from \"@material-ui/core/styles/withStyles\";\r\nimport React, {Fragment, useState} from \"react\"\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport InfoIcon from '@material-ui/icons/Info';\r\nimport CardContent from \"@material-ui/core/CardContent\";\r\nimport CardMedia from \"@material-ui/core/CardMedia\";\r\nimport CardHeader from \"@material-ui/core/CardHeader\";\r\nimport Card from \"@material-ui/core/Card\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport red from \"@material-ui/core/colors/red\";\r\nimport CardActions from \"@material-ui/core/CardActions\";\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport PropTypes from \"prop-types\";\r\nimport clsx from \"clsx\";\r\nimport Rating from \"@material-ui/lab/Rating\";\r\nimport Chip from \"@material-ui/core/Chip\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Box from \"@material-ui/core/Box\";\r\n\r\nconst styles = theme => ({\r\n    root: {\r\n\r\n    },\r\n    media: {\r\n        height: 0,\r\n            paddingTop: '56.25%', // 16:9\r\n    },\r\n    expand: {\r\n        transform: 'rotate(0deg)',\r\n            marginLeft: 'auto',\r\n            transition: theme.transitions.create('transform', {\r\n            duration: theme.transitions.duration.shortest,\r\n        }),\r\n    },\r\n    expandOpen: {\r\n        transform: 'rotate(180deg)',\r\n    },\r\n    avatar: {\r\n        backgroundColor: red[500],\r\n    },\r\n})\r\n\r\nfunction CategoriesDisplay({categories}){\r\n    return(\r\n        categories != null &&\r\n        <Box component=\"ul\"  style={{\r\n            display: 'flex',\r\n            justifyContent: 'left',\r\n            flexWrap: 'wrap',\r\n            listStyle: 'none',\r\n            padding: '0px'\r\n        }}>\r\n            {categories.map((data, index) => {\r\n                return (\r\n                    <li key={index}>\r\n                        <Chip\r\n                            variant=\"outlined\"\r\n                            style={{margin: \"5px\"}}\r\n                            label={data.name}\r\n                        />\r\n                    </li>\r\n\r\n                );\r\n            })}\r\n        </Box>\r\n    )\r\n}\r\n\r\nfunction SubheaderDisplay({city, address, priceRange, rating}){\r\n    return(\r\n        <div>\r\n            {rating != null &&\r\n            <Fragment><Rating\r\n                readOnly={true}\r\n                value={rating}\r\n            /><br/></Fragment>}\r\n            {(address != null ? address : \"\") + \" \" + (city != null ? city: \"\")} <div style={{color: \"green\"}}>{priceRange}</div>\r\n\r\n        </div>\r\n    )\r\n}\r\n\r\nfunction ApiPlaceCard({classes, placeData, renderActionArea}){\r\n\r\n    function truncateText(text){\r\n        if(text == null)\r\n            return \"\"\r\n        if(text.length > 500){\r\n            return text.substring(0, 500) + \"...\";\r\n        }else{\r\n            return text\r\n        }\r\n    }\r\n\r\n    return(\r\n        <Card className={classes.root}>\r\n            <CardHeader\r\n                action={\r\n                    renderActionArea != null && renderActionArea()\r\n                }\r\n                title={placeData.name}\r\n                subheader={<SubheaderDisplay  city={placeData.city} address={placeData.address} priceRange={placeData.priceRange} rating={placeData.overallStarRating}/>}\r\n\r\n            />\r\n            {placeData.photos != null && placeData.photos.length > 0 &&\r\n            <CardMedia\r\n                className={classes.media}\r\n                image={placeData.photos[0].url}\r\n            />}\r\n            <CardContent>\r\n                <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\r\n                    {truncateText(placeData.description)}\r\n                </Typography>\r\n\r\n                <CategoriesDisplay categories={placeData.categories}/>\r\n                <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\r\n\r\n                {placeData.website}\r\n                </Typography>\r\n\r\n            </CardContent>\r\n            <CardActions disableSpacing>\r\n            </CardActions>\r\n        </Card>\r\n    )\r\n}\r\n\r\nApiPlaceCard.propTypes = {\r\n    placeData: PropTypes.object.isRequired,\r\n    renderActionArea: PropTypes.func\r\n};\r\n\r\nexport default withStyles(styles)(ApiPlaceCard)","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport InputBase from '@material-ui/core/InputBase';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport SearchIcon from '@material-ui/icons/Search';\r\nimport DirectionsIcon from '@material-ui/icons/Directions';\r\nimport {debounce} from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        padding: '2px 4px',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        margin: theme.spacing(2)\r\n        // width: 400,\r\n    },\r\n    iconButton: {\r\n        padding: 10,\r\n    },\r\n    input: {\r\n        marginLeft: theme.spacing(1),\r\n        flex: 1,\r\n    },\r\n    divider: {\r\n        // height: 28,\r\n        margin: 4,\r\n    },\r\n}));\r\n\r\nexport default function SearchInputComponent({hint, searchCallback}) {\r\n    const classes = useStyles();\r\n\r\n    const debouncedInput = (event) => {\r\n        searchCallback(event.target.value)\r\n    }\r\n\r\n    const debounceInput = debounce(event => debouncedInput(event), 500)\r\n\r\n    const handleInput = (event) => {\r\n        event.persist()\r\n        debounceInput(event)\r\n    }\r\n\r\n    return (\r\n        <Paper component=\"form\" className={classes.root}>\r\n            <InputBase\r\n                className={classes.input}\r\n                placeholder={hint}\r\n                inputProps={{ 'aria-label': hint }}\r\n                onChange={handleInput}\r\n            />\r\n            <IconButton className={classes.iconButton} aria-label=\"search\">\r\n                <SearchIcon />\r\n            </IconButton>\r\n            <Divider className={classes.divider} orientation=\"vertical\" />\r\n        </Paper>\r\n    );\r\n}","import withStyles from \"@material-ui/core/styles/withStyles\";\r\nimport React, {useState} from \"react\"\r\nimport ApiPlaceCard from \"../components/ApiPlaceCard\";\r\nimport API from \"../Networking/API\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport debounce from 'lodash/debounce'\r\nimport Masonry from \"react-masonry-component\";\r\nimport SearchInputComponent from \"../components/SearchInputComponent\";\r\nimport Strings from \"../helpers/stringResources\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport UseSnackbarContext from \"../contexts/UseSnackbarContext\";\r\n\r\n\r\n\r\nconst styles = theme => ({\r\n    root:{\r\n        overflow: 'scroll',\r\n        width: \"100%\",\r\n        padding: theme.spacing(1),\r\n        height:`calc(100vh - 64px)`,\r\n        paddingTop: \"9vh\",\r\n    },\r\n    topBar: {\r\n        height: \"8vh\",\r\n        position: \"absolute\",\r\n        width: \"60%\",\r\n        marginLeft: \"auto\",\r\n        marginRight: \"auto\",\r\n        left: 0,\r\n        right: 0,\r\n        justifyContent: \"center\",\r\n        zIndex: 1\r\n    },\r\n    searchBox: {\r\n        margin: theme.spacing(1)\r\n    },\r\n    placeApiCard: {\r\n        [theme.breakpoints.down('lg')]: {\r\n            width: \"95%\",\r\n        },\r\n        [theme.breakpoints.up('lg')]: {\r\n            width: \"28vw\",\r\n        },\r\n        // minWidth: \"400px\",\r\n        margin: theme.spacing(1)\r\n    }\r\n})\r\n\r\nfunction ApiPlaces({classes}){\r\n\r\n    const [data, setData] = useState([]);\r\n    const [isLoadingData, setIsLoadingData] = useState(false);\r\n    const { addConfig } = UseSnackbarContext();\r\n\r\n    const loadDataFunc = (query) => {\r\n        setData([])\r\n        setIsLoadingData(true)\r\n        API.Places.searchApiPlaces(\"?keyword=\" + encodeURI(query)).then(response => {\r\n            setData([...response])\r\n        }).catch(error => {\r\n            addConfig(false, \"The request did not go through.\")\r\n        }).finally(() => {\r\n            setIsLoadingData(false)\r\n        })\r\n    }\r\n\r\n    const handleSearch = (word) => {\r\n        if(word.length > 3)\r\n            loadDataFunc(word)\r\n    }\r\n\r\n    return(\r\n        <div style={{position: \"relative\"}}>\r\n            <div className = {classes.topBar}>\r\n                <SearchInputComponent searchCallback={handleSearch} hint=\"Search api places\" style={classes.searchBox} />\r\n            </div>\r\n\r\n            <div className={classes.root}>\r\n                <Masonry\r\n                    style={{margin: \"0 auto\"}}\r\n                    elementType={'div'} // default 'div'\r\n                    options={{\r\n                        isFitWidth: true\r\n                    }} // default {}\r\n                    disableImagesLoaded={false} // default false\r\n                    updateOnEachImageLoad={false} // default false and works only if disableImagesLoaded is false\r\n                >\r\n\r\n                    {data.map(item => {\r\n                        return <ApiPlaceCard classes ={{ root: classes.placeApiCard}} key={item.placeId} placeData = {item} style={{boxSizing: 'border-box'}}/>\r\n                    })}\r\n\r\n                    {\r\n                        data.length === 0 && !isLoadingData &&\r\n                        <Typography variant=\"subtitle1\">No results</Typography>\r\n                    }\r\n                    {\r\n                        isLoadingData &&\r\n                        <CircularProgress  />\r\n                    }\r\n\r\n                </Masonry>\r\n\r\n\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default withStyles(styles)(ApiPlaces)","import React from 'react';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Container from '@material-ui/core/Container';\r\nimport Link from '@material-ui/core/Link';\r\n\r\nfunction Copyright() {\r\n    return (\r\n        <Typography variant=\"body2\" color=\"textSecondary\">\r\n            {'Copyright © '}\r\n            Traveldirection {' '}\r\n            {new Date().getFullYear()}\r\n            {'.'}\r\n        </Typography>\r\n    );\r\n}\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        minHeight: '100vh',\r\n    },\r\n    main: {\r\n        marginTop: theme.spacing(8),\r\n        marginBottom: theme.spacing(2),\r\n    },\r\n    footer: {\r\n        padding: theme.spacing(3, 2),\r\n        marginTop: 'auto',\r\n        backgroundColor:\r\n            theme.palette.type === 'light' ? theme.palette.grey[200] : theme.palette.grey[800],\r\n    },\r\n}));\r\n\r\nexport default function NotFoundPage() {\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            <CssBaseline />\r\n            <Container component=\"main\" className={classes.main} maxWidth=\"sm\">\r\n                <Typography variant=\"h2\" component=\"h1\" gutterBottom>\r\n                    Page not found\r\n                </Typography>\r\n                <Typography variant=\"h5\" component=\"h2\" gutterBottom>\r\n                    {'Try something else'}\r\n                </Typography>\r\n            </Container>\r\n            <footer className={classes.footer}>\r\n                <Container maxWidth=\"sm\">\r\n                    <Copyright />\r\n                </Container>\r\n            </footer>\r\n        </div>\r\n    );\r\n}","import {withStyles} from \"@material-ui/core/styles\";\r\nimport Card from \"@material-ui/core/Card\";\r\nimport CardContent from \"@material-ui/core/CardContent\";\r\nimport React from \"react\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport CardMedia from \"@material-ui/core/CardMedia\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport RemoveIcon from '@material-ui/icons/Remove';\r\nimport CardHeader from \"@material-ui/core/CardHeader\";\r\nimport PropTypes from \"prop-types\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport AddIcon from \"@material-ui/icons/Add\";\r\nimport Alert from \"@material-ui/lab/Alert\";\r\n\r\nconst styles = theme => ({\r\n    cardRoot: {\r\n        display: 'flex',\r\n    },\r\n    details: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        flex: 5\r\n    },\r\n    content: {\r\n        flex: '1 0 auto',\r\n    },\r\n    cover: {\r\n        flex: 1\r\n    },\r\n    root: {\r\n        display: \"flex\",\r\n        flexFlow: \"column wrap\"\r\n    },\r\n    addParkingWrapper: {\r\n        display: \"inline-block\"\r\n    }\r\n})\r\n\r\n\r\nfunction TourPlaceComponent({classes, elementData, removeCallback, addTransportCallback, displayNoTransportWarning}) {\r\n\r\n    function truncateText(text){\r\n        if(text == null)\r\n            return \"\"\r\n        if(text.length > 500){\r\n            return text.substring(0, 500) + \"...\";\r\n        }else{\r\n            return text\r\n        }\r\n    }\r\n\r\n    return(\r\n        <div className={classes.root}>\r\n            <Card className={classes.cardRoot}>\r\n\r\n                {elementData.data.details.photos != null && elementData.data.details.photos.length > 0 &&\r\n                <CardMedia\r\n                    className={classes.cover}\r\n                    image={elementData.data.details.photos[0].url}\r\n                />\r\n                }\r\n\r\n                <div className={classes.details}>\r\n                    <CardContent className={classes.content}>\r\n                        <Typography component=\"h5\" variant=\"h5\">\r\n                            {elementData.data.details.name}\r\n                        </Typography>\r\n                        <Typography variant=\"subtitle1\" color=\"textSecondary\">\r\n                            {truncateText(elementData.data.details.description)}\r\n                        </Typography>\r\n                    </CardContent>\r\n                </div>\r\n                <CardHeader\r\n                    action={\r\n                        <IconButton aria-label=\"remove\" onClick={() => removeCallback(elementData)}>\r\n                            <RemoveIcon />\r\n                        </IconButton>\r\n                    }\r\n                />\r\n            </Card>\r\n\r\n            {displayNoTransportWarning &&\r\n            <Alert severity=\"error\">No transport from this place specified</Alert>}\r\n\r\n            <div className={classes.addParkingWrapper}>\r\n                <Button style={{display: \"inline\"}}  color=\"secondary\" onClick={() => addTransportCallback(elementData)}>\r\n                    <AddIcon/>\r\n                </Button>\r\n                <Typography style={{display: \"inline\"}} variant=\"subtitle1\">\r\n                    Add transport from this place\r\n                </Typography>\r\n            </div>\r\n\r\n        </div>\r\n\r\n    )\r\n}\r\nTourPlaceComponent.propTypes = {\r\n    elementData: PropTypes.object.isRequired,\r\n    removeCallback: PropTypes.func.isRequired,\r\n    addTransportCallback: PropTypes.func.isRequired,\r\n    displayNoTransportWarning: PropTypes.bool\r\n};\r\n\r\nexport default withStyles(styles)(TourPlaceComponent)\r\n","import React, {createRef, useCallback, useEffect, useRef, useState} from \"react\";\r\nimport withStyles from \"@material-ui/core/styles/withStyles\";\r\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\r\nimport DirectionsBikeIcon from '@material-ui/icons/DirectionsBike';\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport MetroIcon from '@material-ui/icons/DirectionsTransit';\r\nimport DirectionsBusIcon from '@material-ui/icons/DirectionsBus';\r\nimport CarIcon from '@material-ui/icons/DriveEta';\r\nimport TrainIcon from '@material-ui/icons/Train';\r\nimport FlightIcon from '@material-ui/icons/Flight';\r\nimport TramIcon from '@material-ui/icons/Tram';\r\nimport DirectionsWalkIcon from '@material-ui/icons/DirectionsWalk';\r\nimport NativeSelect from \"@material-ui/core/NativeSelect\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport RemoveIcon from \"@material-ui/icons/Remove\";\r\n\r\n\r\nconst styles = theme => ({\r\n    root: {\r\n        display: \"flex\",\r\n        flexFlow: \"column wrap\"\r\n    },\r\n    transportSelectWrapper: {\r\n        display: \"flex\",\r\n        alignItems: \"center\"\r\n    },\r\n    transportSelect: {\r\n        marginLeft: theme.spacing(1),\r\n        width: \"100px\"\r\n    }\r\n});\r\n\r\nconst transportTypes = [\r\n    {\r\n        icon: <DirectionsWalkIcon/>,\r\n        label: \"Walk\"\r\n    },\r\n    {\r\n        icon: <MetroIcon/>,\r\n        label: \"Metro\"\r\n    },\r\n    {\r\n        icon: <DirectionsBikeIcon/>,\r\n        label: \"Bike\"\r\n    },\r\n    {\r\n        icon: <DirectionsBusIcon/>,\r\n        label: \"Bus\"\r\n    },\r\n    {\r\n        icon: <CarIcon/>,\r\n        label: \"Car\"\r\n    },\r\n    {\r\n        icon: <TrainIcon/>,\r\n        label: \"Train\"\r\n    },\r\n    {\r\n        icon: <FlightIcon/>,\r\n        label: \"Plane\"\r\n    },\r\n    {\r\n        icon: <TramIcon/>,\r\n        label: \"Tram\"\r\n    }\r\n]\r\n\r\nfunction TransportItem({classes, transportId, transportChangeCallback, transportRemoveCallback}) {\r\n\r\n    const [currentTransport, setCurrentTransport] = useState(transportId == null ? 0 : transportId)\r\n\r\n    const handleTransportChange = (e) => {\r\n        setCurrentTransport(e.target.value)\r\n        transportChangeCallback({transport: parseInt(e.target.value)})\r\n    }\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            <MoreVertIcon/>\r\n            <div className={classes.transportSelectWrapper}>\r\n                {transportTypes[currentTransport].icon}\r\n                <FormControl className={classes.transportSelect} >\r\n                    <NativeSelect\r\n                        value={currentTransport}\r\n                        onChange={handleTransportChange}\r\n                    >\r\n                        {transportTypes.map((item, index) => {\r\n                            return <option key={index} value={index}> {item.label}</option>\r\n                        })}\r\n                    </NativeSelect>\r\n                </FormControl>\r\n                <IconButton aria-label=\"remove\" onClick={() => transportRemoveCallback()}>\r\n                    <RemoveIcon />\r\n                </IconButton>\r\n            </div>\r\n            <MoreVertIcon/>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default withStyles(styles)(TransportItem)","import {withStyles} from \"@material-ui/core/styles\";\r\nimport TourPlaceComponent from \"./TourPlaceComponent\";\r\nimport React, {useEffect, useMemo} from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport {ElementType} from \"./Tour\";\r\nimport {arrayMove, SortableContainer, SortableElement} from \"react-sortable-hoc\";\r\nimport TransportItem from \"./TransportItem\";\r\nimport shortid from 'shortid';\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Alert from \"@material-ui/lab/Alert\";\r\n\r\nconst styles = theme => ({\r\n    tourPlaceComponent: {\r\n        margin: theme.spacing(2)\r\n    },\r\n    root: {\r\n        display: \"flex\",\r\n        flexFlow: \"column wrap\",\r\n        margin: theme.spacing(1)\r\n    }\r\n})\r\n\r\nconst TourPlaceSortable = SortableElement(({displayNoTransportWarning, elementData, removePlaceCallback, classes, addTransportCallback}) => (\r\n    <div>\r\n        <TourPlaceComponent removeCallback={removePlaceCallback} classes={{root: classes.tourPlaceComponent}}\r\n                            addTransportCallback={addTransportCallback} elementData={elementData}\r\n                            displayNoTransportWarning={displayNoTransportWarning}/>\r\n    </div>\r\n));\r\nconst TransportItemSortable = SortableElement(({transportId, transportChangeCallback, transportRemoveCallback}) => (\r\n    <div>\r\n        <TransportItem transportId={transportId} transportRemoveCallback={transportRemoveCallback} transportChangeCallback={transportChangeCallback}/>\r\n    </div>\r\n));\r\n\r\nconst SortableList = SortableContainer(({currentDay, removeElementCallback, tourInfo, classes, addTransportCallback, transportChangeCallback}) => {\r\n\r\n    const shouldDisplayNoTransportWarning = (index) => {\r\n        let elements = tourInfo.days[currentDay].tour\r\n        return ((elements.length -1 ) > index) && elements[index + 1].type !== ElementType.transport\r\n    }\r\n\r\n    return (\r\n\r\n        <ul>\r\n            {tourInfo.days[currentDay].tour.map((item, index) => {\r\n\r\n                switch (item.type) {\r\n                    case ElementType.place:\r\n                        return <TourPlaceSortable key={item.data.details.placeId} index={index}\r\n                                                  addTransportCallback={addTransportCallback} elementData={item}\r\n                                                  classes={classes}\r\n                                                  displayNoTransportWarning={shouldDisplayNoTransportWarning(index)}\r\n                                                  removePlaceCallback={() => removeElementCallback(index)}/>\r\n                    case ElementType.transport:\r\n                        return <TransportItemSortable key={item.data.elementIdentifier} index={index}\r\n                                                      transportId={item.data.transport}\r\n                                                      transportRemoveCallback = {() => removeElementCallback(index)}\r\n                                                      transportChangeCallback={(transport) => transportChangeCallback(index, transport)}/>\r\n                }\r\n            })}\r\n        </ul>\r\n    )\r\n});\r\n\r\nfunction TourPlacesWrapper({classes, tourInfo, tourInfoReducer, currentDay, errorInfo, setErrorInfo}) {\r\n\r\n    const removeElementCallback = (index) => {\r\n        tourInfoReducer({\r\n            type: 'REMOVE_ELEMENT',\r\n            day: currentDay,\r\n            index: index\r\n        })\r\n    }\r\n\r\n    const onSortEnd = ({oldIndex, newIndex}) => {\r\n        tourInfoReducer({\r\n            type: 'MOVE_ELEMENT',\r\n            day: currentDay,\r\n            oldIndex: oldIndex,\r\n            newIndex: newIndex\r\n        })\r\n    }\r\n\r\n    const handleTransportChange = (index, data) => {\r\n        tourInfoReducer({\r\n            type: 'UPDATE_ELEMENT',\r\n            day: currentDay,\r\n            index: index,\r\n            data: data\r\n        })\r\n    }\r\n\r\n    const addTransportCallback = (details) => {\r\n        tourInfoReducer({\r\n            type: 'INSERT_TRANSPORT_FOR_PLACE',\r\n            placeId: details.data.details.placeId,\r\n            day: currentDay,\r\n            data: {type: ElementType.transport, data: {transport: 0, elementIdentifier: shortid.generate()}}\r\n        })\r\n    }\r\n\r\n    useEffect(() => {\r\n        console.log(tourInfo.days[currentDay].tour)\r\n    }, [tourInfo])\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            {tourInfo.days[currentDay].tour.length === 0 &&\r\n            <Alert severity=\"warning\">You have not added any places for the currently selected day.</Alert>}\r\n            <SortableList\r\n                distance={10}\r\n                currentDay={currentDay}\r\n                tourInfo={tourInfo}\r\n                transportChangeCallback={handleTransportChange}\r\n                onSortEnd={onSortEnd}\r\n                classes={classes}\r\n                addTransportCallback={addTransportCallback}\r\n                removeElementCallback={removeElementCallback}/>\r\n        </div>\r\n    )\r\n}\r\n\r\nTourPlacesWrapper.propTypes = {\r\n    tourInfo: PropTypes.object.isRequired,\r\n    tourInfoReducer: PropTypes.func.isRequired,\r\n    currentDay: PropTypes.number.isRequired,\r\n};\r\n\r\nexport default withStyles(styles)(TourPlacesWrapper)\r\n","import {withStyles} from \"@material-ui/core/styles\";\r\nimport React, {useState} from \"react\";\r\nimport SearchInputComponent from \"../SearchInputComponent\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport AddIcon from \"@material-ui/icons/Add\";\r\nimport Tooltip from \"@material-ui/core/Tooltip\";\r\nimport LocalLibraryIcon from \"@material-ui/icons/LocalLibrary\";\r\nimport DnsIcon from \"@material-ui/icons/Dns\";\r\nimport ApiPlaceCard from \"../ApiPlaceCard\";\r\nimport API from \"../../Networking/API\";\r\n\r\nconst styles = theme => ({\r\n    searchInputComponent: {\r\n\r\n    },\r\n    placeCard: {\r\n        margin: theme.spacing(1, 8, 1, 8),\r\n    },\r\n})\r\n\r\n\r\nfunction PlaceSearch({classes, addPlaceCallback, apiPlacesFound, setApiPlacesFound, localPlacesFound, setLocalPlacesFound}) {\r\n\r\n    const [apiPlacesLoading, setApiPlacesLoading] = useState(false)\r\n    const [localPlacesLoading, setLocalPlacesLoading] = useState(false)\r\n\r\n    const placeType = {\r\n        local: 0,\r\n        api: 1\r\n    }\r\n\r\n    const generatePlaceCards = () => {\r\n        let genProps = (placeInfo, type) => {\r\n            return {\r\n                classes: {root: classes.placeCard},\r\n                key: placeInfo.placeId,\r\n                renderActionArea: () => {\r\n                    return (\r\n                        <div>\r\n                            <Button color=\"primary\" onClick={() => addPlaceCallback(placeInfo, type)}>\r\n                                <AddIcon/>\r\n                            </Button>\r\n                            <Tooltip title={type === placeType.local ? \"This place is from our database\" : \"This place is from API\"} aria-label=\"add\">\r\n                                {type === placeType.local ? <LocalLibraryIcon/> : <DnsIcon/>}\r\n                            </Tooltip>\r\n                        </div>\r\n                    )\r\n                },\r\n                placeData : placeInfo\r\n            }\r\n        }\r\n\r\n        let mappedPlaces = []\r\n        localPlacesFound.forEach(item => {\r\n            mappedPlaces.push(<ApiPlaceCard {...genProps(item, placeType.local)}/>)\r\n        })\r\n        apiPlacesFound.forEach(item => {\r\n            mappedPlaces.push( <ApiPlaceCard {...genProps(item, placeType.api)}/>)\r\n        })\r\n        return mappedPlaces\r\n    }\r\n\r\n    const searchCallback = (keyword) => {\r\n        setLocalPlacesFound([])\r\n        setApiPlacesFound([])\r\n        setApiPlacesLoading(true)\r\n        setLocalPlacesLoading(true)\r\n        API.Places.getAllPlacesAdmin(\"?keyword=\" + keyword).then(response=>{\r\n            setLocalPlacesFound(response.list)\r\n            setLocalPlacesLoading(false)\r\n        }).catch(error=>{\r\n            console.log(error)\r\n        })\r\n\r\n        API.Places.searchApiPlaces(\"?keyword=\" + keyword).then(response => {\r\n            setApiPlacesFound(response)\r\n            setApiPlacesLoading(false)\r\n        }).catch(error => {\r\n            console.log(error)\r\n        })\r\n    }\r\n\r\n    return(\r\n        <React.Fragment>\r\n            <SearchInputComponent hint=\"Search for a place\" searchCallback={searchCallback} className={classes.searchInputComponent}/>\r\n            {(localPlacesLoading || apiPlacesLoading) ?\r\n                <CircularProgress  /> :\r\n                <React.Fragment>\r\n                    {generatePlaceCards()}\r\n                </React.Fragment>\r\n            }\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nexport default withStyles(styles)(PlaceSearch)\r\n","import {withStyles} from \"@material-ui/core/styles\";\r\nimport React, {useEffect, useState} from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport Radio from \"@material-ui/core/Radio\";\r\nimport Card from \"@material-ui/core/Card\";\r\nimport CardContent from \"@material-ui/core/CardContent\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport CardHeader from \"@material-ui/core/CardHeader\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport RemoveIcon from '@material-ui/icons/Remove';\r\nimport Button from \"@material-ui/core/Button\";\r\n\r\n\r\nconst styles = theme => ({\r\n    root: {\r\n        display: \"flex\",\r\n        margin: theme.spacing(2)\r\n    },\r\n    radioButtonArea: {\r\n        marginRight: theme.spacing(1)\r\n    },\r\n    cardArea: {\r\n        flex: 1,\r\n        display: \"flex\"\r\n    },\r\n    content: {\r\n        flex: '1 0 auto',\r\n    },\r\n    descriptionInput: {\r\n        marginTop: theme.spacing(2),\r\n        width: \"100%\",\r\n        height: \"auto\"\r\n    },\r\n    headerWrap: {}\r\n})\r\n\r\nfunction DayCard({classes, onSelectCallback, index, currentDay, tourInfoReducer, description, handleRemoveDay}) {\r\n\r\n    const updateDescriptionGlobally = (e) => {\r\n        tourInfoReducer({\r\n            type: 'UPDATE_DAY',\r\n            day: index,\r\n            data: {\r\n                description: e\r\n            }\r\n        })\r\n    }\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            <div className={classes.radioButtonArea}>\r\n                <Radio checked={index === currentDay} onChange={(e) => {\r\n                    onSelectCallback(index)\r\n                }}/>\r\n            </div>\r\n            <Card className={classes.cardArea}>\r\n                <CardContent className={classes.content}>\r\n                    <Typography component=\"h5\" variant=\"h5\">\r\n                        Day {index + 1}\r\n                    </Typography>\r\n\r\n                    <TextField\r\n                        className={classes.descriptionInput}\r\n                        multiline\r\n                        label=\"Description\"\r\n                        value={description}\r\n                        variant=\"outlined\"\r\n                        onChange={(e) => {\r\n                            updateDescriptionGlobally(e.target.value)\r\n                        }}\r\n                    />\r\n                </CardContent>\r\n                <CardHeader\r\n                    action={\r\n                        <Button startIcon={<RemoveIcon/>} aria-label=\"remove\" onClick={() => handleRemoveDay(index)}/>\r\n                    }\r\n                />\r\n            </Card>\r\n        </div>\r\n    )\r\n}\r\n\r\nDayCard.propTypes = {\r\n    onSelectCallback: PropTypes.func.isRequired,\r\n    tourInfoReducer: PropTypes.func.isRequired,\r\n    index: PropTypes.number.isRequired,\r\n    currentDay: PropTypes.number.isRequired,\r\n    description: PropTypes.string.isRequired,\r\n};\r\n\r\nexport default withStyles(styles)(DayCard)\r\n","import {withStyles} from \"@material-ui/core/styles\";\r\nimport React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport DayCard from \"./DayCard\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport AddIcon from \"@material-ui/icons/Add\";\r\nimport {SortableContainer, SortableElement} from \"react-sortable-hoc\";\r\nimport shortid from 'shortid';\r\nimport UseAlertDialogContext from \"../../contexts/UseAlertDialogContext\";\r\n\r\nconst styles = theme => ({\r\n    root: {\r\n        margin: theme.spacing(2)\r\n    },\r\n    addDayButton: {\r\n        marginTop: theme.spacing(1)\r\n    },\r\n    footerWrapper: {\r\n        display: \"flex\",\r\n        width: \"100%\",\r\n        justifyContent: \"flex-end\"\r\n    }\r\n})\r\n\r\nconst DayCardSortable = SortableElement(({dayInfo, day, currentDay, onSelectCallback, tourInfoReducer, removeDayCallback}) => (\r\n    <DayCard\r\n        description={dayInfo.description}\r\n        currentDay={currentDay}\r\n        index={day}\r\n        handleRemoveDay={removeDayCallback}\r\n        onSelectCallback={onSelectCallback}\r\n        tourInfoReducer={tourInfoReducer}/>\r\n));\r\n\r\nconst SortableList = SortableContainer(({elements, currentDay, onSelectCallback, tourInfoReducer, removeDayCallback}) => {\r\n\r\n    return (\r\n        <ul>\r\n            {elements.map((item, index) => {\r\n                return <DayCardSortable\r\n                    currentDay={currentDay}\r\n                    day={index}\r\n                    index={index}\r\n                    removeDayCallback={removeDayCallback}\r\n                    key={item.elementIdentifier}\r\n                    dayInfo={item}\r\n                    onSelectCallback={onSelectCallback}\r\n                    tourInfoReducer={tourInfoReducer}/>\r\n            })}\r\n        </ul>\r\n    );\r\n});\r\n\r\nfunction DaysWrapper({classes, currentDay, setCurrentDay, tourInfo, tourInfoReducer}) {\r\n\r\n    const { addAlertConfig } = UseAlertDialogContext();\r\n\r\n    const handleSelect = (index) => {\r\n        setCurrentDay(index)\r\n    }\r\n\r\n    const addDayHandler = () => {\r\n        tourInfoReducer({\r\n            type: 'ADD_DAY',\r\n            data: {\r\n                description: \"\",\r\n                elementIdentifier: shortid.generate(),\r\n                tour: []\r\n            }\r\n        })\r\n    }\r\n\r\n    const removeDay = (day) => {\r\n        tourInfoReducer({\r\n                type: 'REMOVE_DAY',\r\n                day: day,\r\n            }\r\n        )\r\n        if(day === currentDay)\r\n            setCurrentDay(day - 1)\r\n    }\r\n\r\n    const removeDayCallback = (day) => {\r\n        if(tourInfo.days.length === 1){\r\n            addAlertConfig(\"Warning\", \"The tour has to have at least one day\", [])\r\n        }else{\r\n            if(tourInfo.days[day].tour.length > 0){ //This day has at least one place/transport added to it\r\n                addAlertConfig(\"Warning\", \"Are you sure you want to remove this day?\",[{name: \"yes\", action: ()=>{\r\n                    removeDay(day)\r\n                    }}],() => {\r\n                })\r\n            }else removeDay(day)\r\n        }\r\n    }\r\n\r\n    const onSortEnd = ({oldIndex, newIndex}) => {\r\n        tourInfoReducer({\r\n            type: 'MOVE_DAY',\r\n            oldIndex: oldIndex,\r\n            newIndex: newIndex\r\n        })\r\n        setCurrentDay(newIndex)\r\n    }\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            <SortableList\r\n                elements={tourInfo.days}\r\n                currentDay={currentDay}\r\n                onSortEnd={onSortEnd}\r\n                removeDayCallback={removeDayCallback}\r\n                distance={10}\r\n                onSelectCallback={handleSelect}\r\n                tourInfoReducer={tourInfoReducer}/>\r\n            <div className={classes.footerWrapper}>\r\n                <Button\r\n                    variant=\"text\"\r\n                    color=\"secondary\"\r\n                    size=\"large\"\r\n                    className={classes.addDayButton}\r\n                    onClick={addDayHandler}\r\n                    startIcon={<AddIcon/>}>\r\n                    Add another day\r\n                </Button>\r\n            </div>\r\n\r\n        </div>\r\n    )\r\n}\r\n\r\nDaysWrapper.propTypes = {\r\n    setCurrentDay: PropTypes.func.isRequired,\r\n    currentDay: PropTypes.number.isRequired,\r\n    tourInfoReducer: PropTypes.func.isRequired,\r\n    tourInfo: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default withStyles(styles)(DaysWrapper)\r\n","import {arrayMove} from \"react-sortable-hoc\";\r\nimport {array} from \"prop-types\";\r\nimport {ElementType} from \"./Tour\";\r\n\r\nexport default function TourDataReducer(state, action) {\r\n\r\n    let days = []\r\n\r\n    switch (action.type) {\r\n        case 'ADD_ELEMENT':\r\n            state.days.forEach((item, index) => {\r\n                if (index === action.day) {\r\n                    days.push({\r\n                        ...item,\r\n                        tour: [\r\n                            ...item.tour,\r\n                            action.data\r\n                        ]\r\n                    })\r\n                } else days.push(item)\r\n            })\r\n            return {\r\n                ...state,\r\n                days: [\r\n                    ...days\r\n                ]\r\n            }\r\n        case 'UPDATE_ELEMENT':\r\n            state.days.forEach((item, index) => {\r\n                if (index === action.day) {\r\n                    let tour = item.tour\r\n                    tour[action.index] = {...tour[action.index], data: {...tour[action.index].data, ...action.data}}\r\n                    days.push({\r\n                        ...item,\r\n                        tour: tour\r\n                    })\r\n                } else days.push(item)\r\n            })\r\n            return {\r\n                ...state,\r\n                days: [\r\n                    ...days\r\n                ]\r\n            }\r\n        case 'INSERT_TRANSPORT_FOR_PLACE':\r\n            state.days.forEach((item, index) => {\r\n                if (index === action.day) {\r\n                    let tour = item.tour\r\n                    let index = tour.findIndex((item) => item.type === ElementType.place && item.data.details.placeId === action.placeId)\r\n                    tour.splice(index + 1, 0, action.data)\r\n                    days.push({\r\n                        ...item,\r\n                        tour: tour\r\n                    })\r\n                } else days.push(item)\r\n            })\r\n            return {\r\n                ...state,\r\n                days: [\r\n                    ...days\r\n                ]\r\n            }\r\n        case 'ADD_DAY':\r\n            return {\r\n                ...state,\r\n                days: [\r\n                    ...state.days,\r\n                    action.data\r\n                ]\r\n            }\r\n        case 'MOVE_DAY':\r\n            return {\r\n                ...state,\r\n                days: arrayMove(state.days, action.oldIndex, action.newIndex)\r\n            }\r\n        case 'MOVE_ELEMENT':\r\n            days = state.days.map((item, index) => {\r\n                if (index === action.day)\r\n                    return {...item, tour: arrayMove(item.tour, action.oldIndex, action.newIndex)}\r\n                else return item\r\n            })\r\n            return {\r\n                ...state,\r\n                days: [\r\n                    ...days\r\n                ]\r\n            }\r\n        case 'UPDATE_DAY':\r\n            days = state.days.map((item, index) => {\r\n                if (index === action.day) {\r\n                    return {...item, ...action.data}\r\n                } else return item\r\n            })\r\n            return {\r\n                ...state,\r\n                days: [\r\n                    ...days\r\n                ]\r\n            }\r\n        case 'REMOVE_ELEMENT':\r\n            days = state.days.map((item, index) => {\r\n                if (index === action.day)\r\n                    return {...item, tour: item.tour.filter((value, index) => index !== action.index)}\r\n                else return item\r\n            })\r\n            return {\r\n                ...state,\r\n                days: [\r\n                    ...days\r\n                ]\r\n            }\r\n        case 'REMOVE_DAY':\r\n            days = state.days.filter((item, index) => index !== action.day)\r\n            return {\r\n                ...state,\r\n                days: days\r\n            }\r\n        case 'UPDATE_TOUR':\r\n            return {\r\n                ...state,\r\n                ...action.data\r\n            }\r\n        case 'SET_ALL':\r\n            return action.data\r\n\r\n        default:\r\n            return state\r\n    }\r\n\r\n}\r\n","import React, {useEffect} from \"react\";\r\nimport withStyles from \"@material-ui/core/styles/withStyles\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport CardContent from \"@material-ui/core/CardContent\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nconst styles = theme => ({\r\n    root: {\r\n        margin: theme.spacing(4),\r\n    },\r\n    nameField: {\r\n        width: \"100%\"\r\n    },\r\n    descriptionField: {\r\n        marginTop: theme.spacing(2),\r\n        width: \"100%\",\r\n        height: \"auto\"\r\n    }\r\n});\r\n\r\nfunction TourInfoComponent({classes, tourInfo, tourInfoReducer, errorInfo, setErrorInfo}) {\r\n\r\n    const handleDescriptionChange = (e) => {\r\n        tourInfoReducer({\r\n            type: 'UPDATE_TOUR',\r\n            data: {description: e.target.value}\r\n        })\r\n    }\r\n    const handleTitleChange = (e) => {\r\n        tourInfoReducer({\r\n            type: 'UPDATE_TOUR',\r\n            data:  {name: e.target.value}\r\n        })\r\n    }\r\n\r\n    useEffect(()=>{\r\n        if(tourInfo.name === \"\")\r\n            setErrorInfo(state => {return {...state, errors: {...state.errors, titleMissing: true}}})\r\n        else\r\n            setErrorInfo(state => {return {...state, errors: {...state.errors, titleMissing: false}}})\r\n    }, [tourInfo.name])\r\n\r\n    let shouldDisplayTitleMissingError = errorInfo.showErrors && errorInfo.errors.titleMissing\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            <TextField label=\"Tour name\"\r\n                       variant=\"outlined\"\r\n                       error={shouldDisplayTitleMissingError}\r\n                       helperText={shouldDisplayTitleMissingError ? \"Please provide a title for your tour\" : \"\"}\r\n                       value={tourInfo.name}\r\n                       onChange={handleTitleChange}\r\n                       defaultValue=\"My tour name\" className={classes.nameField}/>\r\n            <TextField\r\n                className={classes.descriptionField}\r\n                multiline\r\n                label=\"Description\"\r\n                value={tourInfo.description}\r\n                variant=\"outlined\"\r\n                onChange={handleDescriptionChange}\r\n            />\r\n        </div>\r\n    )\r\n}\r\n\r\nTourInfoComponent.propTypes = {\r\n    tourInfo: PropTypes.object.isRequired,\r\n    tourInfoReducer: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default withStyles(styles)(TourInfoComponent)","import React from \"react\";\r\nimport withStyles from \"@material-ui/core/styles/withStyles\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nconst styles = theme => ({\r\n    root: {\r\n        margin: theme.spacing(4),\r\n    },\r\n});\r\n\r\nfunction TourMap({classes, tourInfo, currentDay}) {\r\n\r\n    /*\r\n    Example of getting 0th place and 0th day lat and lng\r\n    let lat = tourInfo.days[0].tour[0].details.latitude\r\n    let lng = tourInfo.days[0].tour[0].details.longitude\r\n\r\n    Keep in mind, that you want to only look for elements, that are of place (not of transport) type.\r\n    So you'd do something like this to get current day's places:\r\n    let places = tourInfo.days[currentDay].tour.filter(item => item.type === ElementType.place)\r\n    and then something like this\r\n    places.forEach(item => {\r\n        let lat = item.details.latitude\r\n        let lng = item.details.longitude\r\n    })\r\n    */\r\n    return (\r\n        <div className={classes.root}>\r\n            {/*Map placeholder*/}\r\n        </div>\r\n    )\r\n}\r\n\r\nTourMap.propTypes = {\r\n    tourInfo: PropTypes.object.isRequired,\r\n    currentDay: PropTypes.number.isRequired,\r\n};\r\n\r\nexport default withStyles(styles)(TourMap)","import {withStyles} from \"@material-ui/core/styles\";\r\nimport React, {useEffect, useMemo, useState} from \"react\";\r\nimport useTheme from \"@material-ui/core/styles/useTheme\";\r\nimport useMediaQuery from \"@material-ui/core/useMediaQuery\";\r\nimport TourPlaceComponent from \"./TourPlaceComponent\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport TourPlacesWrapper from \"./TourPlacesWrapper\";\r\nimport PlaceSearch from \"./PlaceSearch\";\r\nimport DaysWrapper from \"./DaysWrapper\";\r\nimport TourReducer from \"./TourReducer\";\r\nimport TourDataReducer from \"./TourReducer\";\r\nimport TourInfoComponent from \"./TourInfoComponent\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\nimport TourMap from \"./TourMap\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport API from \"../../Networking/API\";\r\nimport UseSnackbarContext from \"../../contexts/UseSnackbarContext\";\r\nimport shortid from 'shortid';\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport Backdrop from \"@material-ui/core/Backdrop\";\r\n\r\nexport const ElementType = {\r\n    place: 0,\r\n    transport: 1\r\n}\r\nexport const PlaceType = {\r\n    api: 1,\r\n    local: 0\r\n}\r\n\r\nconst styles = theme => ({\r\n    root: {\r\n        [theme.breakpoints.down(\"lg\")]: {\r\n            overflow: \"scroll\",\r\n        },\r\n        [theme.breakpoints.only(\"lg\")]: {\r\n            overflow: \"initial\",\r\n            display: \"flex\",\r\n        },\r\n        height: `calc(100% - 64px)`,\r\n        width: \"100%\",\r\n        '&::-webkit-scrollbar': {\r\n            display: \"none\"\r\n        },\r\n    },\r\n    loader: {\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        justifyContent: \"center\",\r\n        width: \"100vw\",\r\n        height: \"100vh\"\r\n    },\r\n    rightLayout: {\r\n        flex: 2,\r\n        overflowY: \"scroll\",\r\n        // flexDirection: \"row\",\r\n        '&::-webkit-scrollbar': {\r\n            display: \"none\"\r\n        },\r\n        [theme.breakpoints.only(\"lg\")]: {\r\n            height: \"100%\",\r\n        },\r\n    },\r\n    leftLayout: {\r\n        [theme.breakpoints.only(\"lg\")]: {\r\n            height: \"100%\",\r\n        },\r\n        overflowY: \"scroll\",\r\n\r\n        flex: 1,\r\n        '&::-webkit-scrollbar': {\r\n            display: \"none\"\r\n        },\r\n    },\r\n    actionsArea: {\r\n        margin: theme.spacing(1),\r\n        display: \"flex\",\r\n        justifyContent: \"flex-end\"\r\n    },\r\n\r\n})\r\n\r\nconst sampleTourData = {\r\n    name: \"\",\r\n    description: \"\",\r\n    days: [\r\n        {\r\n            description: \"\",\r\n            elementIdentifier: \"jkasfbjkdsbjk\",\r\n            tour: []\r\n        }\r\n    ]\r\n}\r\n\r\nfunction Tour({classes, match}) {\r\n\r\n    const [localPlacesFound, setLocalPlacesFound] = useState([])\r\n    const [apiPlacesFound, setApiPlacesFound] = useState([])\r\n    const [currentDay, setCurrentDay] = useState(0)\r\n    const [tourId, setTourId] = useState(match.params.tourId)\r\n    const [isLoading, setIsLoading] = useState(false)\r\n\r\n    const [errorInfo, setErrorInfo] = useState({\r\n            errors: {\r\n                titleMissing: false,\r\n                /* Any client-side verification errors may by added here, and handled in individual components */\r\n            },\r\n            showErrors: false\r\n        }\r\n    )\r\n\r\n    const [tourInfo, dispatchTourInfo] = React.useReducer(TourDataReducer, sampleTourData)\r\n    const {addConfig} = UseSnackbarContext();\r\n\r\n    const handleAddPlaceClick = (placeInfo, type) => {\r\n        dispatchTourInfo({\r\n            type: 'ADD_ELEMENT',\r\n            day: currentDay,\r\n            data: {\r\n                type: ElementType.place,\r\n                data: {\r\n                    type: type,\r\n                    details: {...placeInfo}\r\n                }\r\n            }\r\n        })\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (tourId !== undefined) {\r\n            setIsLoading(true)\r\n            loadData()\r\n        }\r\n    }, [])\r\n\r\n    const loadData = () => {\r\n        API.Tour.getTour(\"?id=\" + tourId).then((response) => {\r\n            let aggregatedDays = []\r\n            response.days.forEach(day => {\r\n                let aggregatedElements = []\r\n                day.data.forEach(place => {\r\n                    let aggregatedPlace = {\r\n                        type: ElementType.place,\r\n                        data: {details: place.place, type: place.place.type}\r\n                    }\r\n                    delete aggregatedPlace.data.details.type\r\n                    aggregatedElements.push(aggregatedPlace)\r\n                    place.transport.forEach(transport => {\r\n                        aggregatedElements.push({\r\n                            type: ElementType.transport,\r\n                            data: {transport: transport.fk_transportId - 1, elementIdentifier: shortid.generate()}\r\n                        })\r\n                    })\r\n                })\r\n                let aggregatedDay = {...day, tour: aggregatedElements, elementIdentifier: shortid.generate()}\r\n                delete aggregatedDay.data\r\n                aggregatedDays.push(aggregatedDay)\r\n            })\r\n            let aggregatedTour = {...response, days: aggregatedDays}\r\n            dispatchTourInfo({type: 'SET_ALL', data: aggregatedTour})\r\n        }).catch((error) => {\r\n            addConfig(false, \"Tour has failed to load\")\r\n        }).finally(() => {\r\n            setIsLoading(false)\r\n        })\r\n    }\r\n\r\n    const handleSave = () => {\r\n        let containsErrors = false;\r\n        Object.keys(errorInfo.errors).map(function(keyName, keyIndex) {\r\n            if(errorInfo.errors[keyName]){\r\n                setErrorInfo(state => {return {...state, showErrors: true}})\r\n                containsErrors = true;\r\n            }\r\n        })\r\n        if(containsErrors) return\r\n        setErrorInfo(state => {return {...state, showErrors: false}})\r\n\r\n        const aggregatedDays = []\r\n        tourInfo.days.forEach(day => {\r\n            let aggregatedDay = {...day, data: []}\r\n            delete aggregatedDay.tour\r\n            delete aggregatedDay.elementIdentifier\r\n            for (let i = 0; i < day.tour.length; i++) {\r\n                let element = day.tour[i]\r\n                if (element.type !== ElementType.place)\r\n                    continue;\r\n                let transport = []\r\n                for (let j = i + 1; j < day.tour.length && day.tour[j].type === ElementType.transport; j++) {\r\n                    transport.push({fk_transportId: day.tour[j].data.transport + 1})\r\n                }\r\n                let aggregatedPlace = {\r\n                    place: {\r\n                        type: element.data.type,\r\n                        placeId: element.data.details.placeId\r\n                    },\r\n                    transport: transport\r\n                }\r\n                aggregatedDay.data.push(aggregatedPlace)\r\n            }\r\n            aggregatedDays.push(aggregatedDay)\r\n        })\r\n        let aggregatedTour = {...tourInfo, days: aggregatedDays}\r\n\r\n        if (tourId === undefined) {\r\n            API.Tour.insertTour(aggregatedTour).then((response) => {\r\n                addConfig(true, \"Tour has been inserted successfully!\")\r\n                setTourId(response)\r\n            }).catch((error) => {\r\n                addConfig(false, \"Something went wrong while saving this tour.\")\r\n            })\r\n        } else {\r\n            API.Tour.updateTour(aggregatedTour, \"?id=\" + tourId).then((response) => {\r\n                addConfig(true, \"Tour has been updated successfully!\")\r\n            }).catch((error) => {\r\n                addConfig(false, \"Something went wrong while saving this tour.\")\r\n            })\r\n        }\r\n\r\n    }\r\n\r\n    const leftLayout = useMemo(() => (\r\n        <div className={classes.leftLayout}>\r\n            <PlaceSearch addPlaceCallback={handleAddPlaceClick} localPlacesFound={localPlacesFound}\r\n                         setLocalPlacesFound={setLocalPlacesFound} apiPlacesFound={apiPlacesFound}\r\n                         setApiPlacesFound={setApiPlacesFound}/>\r\n        </div>\r\n    ), [localPlacesFound, apiPlacesFound, currentDay])\r\n\r\n\r\n    const tourDaysComponents = useMemo(() => (\r\n        <React.Fragment>\r\n            <DaysWrapper currentDay={currentDay} setCurrentDay={setCurrentDay} tourInfo={tourInfo}\r\n                         tourInfoReducer={dispatchTourInfo}/>\r\n            <Divider variant=\"middle\"/>\r\n            <TourPlacesWrapper errorInfo={errorInfo} setErrorInfo={setErrorInfo}\r\n                               currentDay={currentDay} tourInfoReducer={dispatchTourInfo} tourInfo={tourInfo}/>\r\n            <TourMap tourInfo={tourInfo} currentDay={currentDay}/>\r\n        </React.Fragment>\r\n    ), [tourInfo.days, currentDay, errorInfo])\r\n\r\n    const rightLayout = useMemo(() => (\r\n        <Paper className={classes.rightLayout}>\r\n            <TourInfoComponent tourInfo={tourInfo} tourInfoReducer={dispatchTourInfo} errorInfo={errorInfo} setErrorInfo={setErrorInfo}/>\r\n            <Divider variant=\"middle\"/>\r\n            {tourDaysComponents}\r\n            <div className={classes.actionsArea}>\r\n                <Button variant=\"contained\" color=\"primary\" onClick={handleSave}>\r\n                    Save this tour\r\n                </Button>\r\n            </div>\r\n        </Paper>\r\n    ), [tourInfo, currentDay, errorInfo])\r\n\r\n    const theme = useTheme();\r\n    const largeScreen = useMediaQuery(theme.breakpoints.only('lg'));\r\n\r\n    const content = (\r\n        <React.Fragment>\r\n            {largeScreen ?\r\n                <React.Fragment>\r\n                    {leftLayout}\r\n                    {rightLayout}\r\n                </React.Fragment> :\r\n                <React.Fragment>\r\n                    {rightLayout}\r\n                    {leftLayout}\r\n                </React.Fragment>\r\n            }\r\n        </React.Fragment>\r\n    )\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            {isLoading ? <div className={classes.loader}><CircularProgress/></div> : content}\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\nexport default withStyles(styles)(Tour)\r\n","import React, {useEffect, useState} from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport {withStyles} from \"@material-ui/core/styles\";\r\nimport TableComponent from \"../components/TableComponent\";\r\nimport API from \"../Networking/API\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport AddIcon from \"@material-ui/icons/Add\"\r\nimport Box from \"@material-ui/core/Box\";\r\nimport history from \"../helpers/history\";\r\nimport UseAlertDialogContext from \"../contexts/UseAlertDialogContext\";\r\nimport Strings from \"../helpers/stringResources\";\r\nimport UseSnackbarContext from \"../contexts/UseSnackbarContext\";\r\nimport Tooltip from \"@material-ui/core/Tooltip\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport FilterListIcon from \"@material-ui/icons/FilterList\";\r\nimport Popover from \"@material-ui/core/Popover\";\r\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\r\nimport Checkbox from \"@material-ui/core/Checkbox\";\r\n\r\nconst styles = theme => ({\r\n    button: {\r\n        margin: theme.spacing(2)\r\n    },\r\n    input: {\r\n        display: \"none\"\r\n    },\r\n\r\n    sortingButtons: {\r\n        padding: theme.spacing(2),\r\n        display: \"flex\",\r\n        flexDirection: \"column\"\r\n\r\n    },\r\n    root:{\r\n        height:\"100vh\",\r\n        width:\"100%\",\r\n        overflow: \"auto\"\r\n    },\r\n    buttonsDiv: {\r\n        backgroundColor: \"red\",\r\n        justifyContent: \"flex-end\"\r\n    },\r\n    content:{\r\n        display: 'flex',\r\n        flexDirection: \"column\",\r\n        justifyContent: \"center\",\r\n        alignItems: \"center\",\r\n        [theme.breakpoints.down(\"lg\")]: {\r\n            padding: theme.spacing(1),\r\n        },\r\n        [theme.breakpoints.up(\"lg\")]: {\r\n            padding: theme.spacing(8),\r\n        },\r\n    }\r\n});\r\n\r\n\r\nconst headCells = [\r\n    { id: 'name', numeric: false, disablePadding: false, label: 'Tour name', isId: true},\r\n    { id: 'description', numeric: false, disablePadding: false, label: 'Tour description',isId: false},\r\n    { id: 'actions', numeric: false, disablePadding: false, label: 'Actions', isId: false }\r\n];\r\n\r\nfunction Tours(props) {\r\n\r\n    const [data, setData] = useState([]);\r\n    const [pageData, setPageData] = useState([]);\r\n    const [isLoading, setIsLoading] = useState(true);\r\n    const { classes } = props;\r\n\r\n    const [filterOptions, setFilterOptions] = useState([\r\n        {filterLabel: \"Unverified\", filter: false, filterName: \"unverified\"},\r\n        {filterLabel: \"Unpublished\", filter: false, filterName: \"unpublished\"}]);\r\n\r\n    const [filterQuery, setFilterQuery] = useState(\"\");\r\n\r\n\r\n    const { addAlertConfig } = UseAlertDialogContext();\r\n    const { addConfig } = UseSnackbarContext();\r\n\r\n    useEffect(()=>{\r\n        if(!isLoading){\r\n            getAllTours(\"?o=\"+filterQuery);\r\n            console.log(\"Filter query\", filterQuery);\r\n        }\r\n    },[filterQuery]);\r\n\r\n    function parseData(data){\r\n        console.log(\"deita\", data.list)\r\n        setIsLoading(false);\r\n        let placesData = [];\r\n        data.list.map(row => {\r\n            placesData.push(row)\r\n        });\r\n\r\n        delete data.list;\r\n        setData(placesData);\r\n        setPageData(data);\r\n    }\r\n\r\n    function updatePlaceCallback(id){\r\n        history.push(\"/app/addtour/\"+id)\r\n    }\r\n    function removePlaceCallback(id){\r\n        console.log(\"tour id\", id)\r\n        setIsLoading(true);\r\n        addAlertConfig(Strings.DIALOG_TOUR_DELETE_TITLE, Strings.DIALOG_TOUR_DELETE_MESSAGE, function () {\r\n            API.Tour.removeTour(\"?id=\"+id).then(response=>{\r\n                let tmp = [];\r\n                data.map(row=>{\r\n                    if(row.placeId !== id){\r\n                        tmp.push(row)\r\n                    }\r\n                });\r\n                setData(tmp);\r\n                addConfig(true, Strings.SNACKBAR_TOUR_REMOVE_SUCCESS)\r\n                setIsLoading(false)\r\n            }).catch(error=>{\r\n                setIsLoading(false);\r\n                addConfig(false, Strings.SNACKBAR_ERROR)\r\n            })\r\n        }, ()=>{setIsLoading(false)})\r\n    }\r\n\r\n    const changePageCallback = (p=0, keyword=\"\") => {\r\n        setIsLoading(true);\r\n        getAllTours(\"?p=\"+p+\"&s=\"+10+\"&keyword=\"+keyword+\"&o=\"+filterQuery)\r\n    };\r\n\r\n\r\n    //Sorting stuff\r\n    const [anchorEl, setAnchorEl] = React.useState(null);\r\n    const open = Boolean(anchorEl);\r\n    const id = open ? 'simple-popover' : undefined;\r\n    const handleClick = (event) => {\r\n        setAnchorEl(event.currentTarget);\r\n    };\r\n\r\n    const filterOptionsChanged = (name) =>{\r\n        let filters = [];\r\n        let fq = [];\r\n        filterOptions.map(row=>{\r\n            if(row.filterName === name){\r\n                row.filter = !row.filter\r\n            }\r\n            if(row.filter){\r\n                fq.push(row.filterName)\r\n            }\r\n            filters.push(row)\r\n        });\r\n\r\n        setFilterQuery(fq.join(\",\"));\r\n        setFilterOptions(filters)\r\n    };\r\n\r\n    const customToolbarElements = () =>{\r\n        return <div>\r\n            <Tooltip aria-describedby={id} title=\"Filter list\">\r\n                <IconButton  aria-label=\"filter list\" onClick={handleClick}>\r\n                    <FilterListIcon />\r\n                </IconButton>\r\n            </Tooltip>\r\n            <Popover\r\n                id={id}\r\n                open={open}\r\n                anchorEl={anchorEl}\r\n                onClose={()=>{setAnchorEl(null)}}\r\n                anchorOrigin={{\r\n                    vertical: 'bottom',\r\n                    horizontal: 'center',\r\n                }}\r\n                transformOrigin={{\r\n                    vertical: 'top',\r\n                    horizontal: 'center',\r\n                }}\r\n            >\r\n                <div className={classes.sortingButtons}>\r\n                    {filterOptions.map(row=>{\r\n                        return <FormControlLabel\r\n                            control={<Checkbox checked={row.filter} onChange={()=>filterOptionsChanged(row.filterName)} name={row.filterName} />}\r\n                            label={row.filterLabel}\r\n                        />\r\n                    })}\r\n                </div>\r\n\r\n            </Popover>\r\n        </div>\r\n    };\r\n    /*------------------------------------------------------------------------------------------------------*/\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            <div className={classes.content} >\r\n                <TableComponent\r\n                    title={\"Tours\"}\r\n                    headCells={headCells}\r\n                    data={data}\r\n                    pagingInfo={pageData}\r\n                    checkable={false}\r\n                    changePageCallback={changePageCallback}\r\n                    updateCallback={updatePlaceCallback}\r\n                    removeCallback={removePlaceCallback}\r\n                    id={\"tourId\"}\r\n                    isLoading={isLoading}\r\n                    customToolbarElements={customToolbarElements()}\r\n                />\r\n\r\n                <Box display=\"flex\" justifyContent=\"flex-end\">\r\n                    <Button\r\n                        onClick={()=>{history.push(\"/app/addtour\")}}\r\n                        variant=\"text\"\r\n                        color=\"secondary\"\r\n                        size=\"large\"\r\n                        className={classes.button}\r\n                        startIcon={<AddIcon />}>\r\n                        Add\r\n                    </Button>\r\n                </Box>\r\n            </div>\r\n\r\n        </div>\r\n    );\r\n\r\n    function getAllTours(urlParams=\"\") {\r\n        API.Tour.getAllToursAdmin(urlParams).then(response=>{\r\n            console.log(response);\r\n            parseData(response)\r\n        }).catch(error=>{\r\n            console.log(error)\r\n        })\r\n    }\r\n}\r\n\r\nTours.propTypes = {\r\n    classes: PropTypes.object.isRequired\r\n};\r\n\r\nexport default withStyles(styles)(Tours);","import React, {Fragment, useEffect, useState} from 'react';\r\nimport clsx from 'clsx';\r\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\r\nimport Drawer from '@material-ui/core/Drawer';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport List from '@material-ui/core/List';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport ChevronLeftIcon from '@material-ui/icons/ChevronLeft';\r\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport { Router, Route, Link, Switch } from \"react-router-dom\";\r\nimport Home from \"../pages/Home\";\r\nimport Places from \"../pages/Places\";\r\nimport AddPlace from \"../pages/AddPlace\";\r\nimport history from \"../helpers/history\";\r\nimport ApiPlaces from \"../pages/ApiPlaces\";\r\nimport UseSnackbarContext from \"../contexts/UseSnackbarContext\";\r\nimport UseAppBarTitleContext from \"../contexts/UseAppBarTitleContext\";\r\nimport NotFoundPage from \"../pages/NotFoundPage\";\r\nimport Redirect from \"react-router-dom/es/Redirect\";\r\n\r\nimport Tour from \"./tour_components/Tour\";\r\nimport { useLocation } from 'react-router-dom'\r\nimport Tours from \"../pages/Tours\";\r\nconst drawerWidth = 240;\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root1: {\r\n        overflow: \"hidden\",\r\n        display: 'flex',\r\n        height: \"100vh\",\r\n        background: \"#F1F1F1\"\r\n    },\r\n    appBar: {\r\n        height: \"64px\",\r\n        transition: theme.transitions.create(['margin', 'width'], {\r\n            easing: theme.transitions.easing.sharp,\r\n            duration: theme.transitions.duration.leavingScreen,\r\n        }),\r\n    },\r\n    appBarShift: {\r\n        width: `calc(100% - ${drawerWidth}px)`,\r\n        marginLeft: drawerWidth,\r\n        transition: theme.transitions.create(['margin', 'width'], {\r\n            easing: theme.transitions.easing.easeOut,\r\n            duration: theme.transitions.duration.enteringScreen,\r\n        }),\r\n    },\r\n    menuButton: {\r\n        marginRight: theme.spacing(2),\r\n    },\r\n    hide: {\r\n        display: 'none',\r\n    },\r\n    drawer: {\r\n        width: drawerWidth,\r\n        flexShrink: 0,\r\n    },\r\n    drawerPaper: {\r\n        width: drawerWidth,\r\n    },\r\n    drawerHeader: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        padding: theme.spacing(0, 1),\r\n        // necessary for content to be below app bar\r\n        ...theme.mixins.toolbar,\r\n        justifyContent: 'flex-end',\r\n    },\r\n    content: {\r\n        width: \"100vw\",\r\n        height: \"100%\",\r\n        //padding: theme.spacing(3),\r\n        transition: theme.transitions.create('margin', {\r\n            easing: theme.transitions.easing.sharp,\r\n            duration: theme.transitions.duration.leavingScreen,\r\n        }),\r\n        marginLeft: -drawerWidth,\r\n    },\r\n    contentShift: {\r\n        width: \"100vw\",\r\n        height: \"100%\",\r\n        transition: theme.transitions.create('margin', {\r\n            easing: theme.transitions.easing.easeOut,\r\n            duration: theme.transitions.duration.enteringScreen,\r\n        }),\r\n        marginLeft: 0\r\n    },\r\n}));\r\n\r\n\r\nexport default function Appbar(props) {\r\n    const classes = useStyles();\r\n    const theme = useTheme();\r\n    const [open, setOpen] = useState(false);\r\n    const { title, setTitle } = UseAppBarTitleContext();\r\n    let location = useLocation();\r\n\r\n    const handleDrawerOpen = () => {\r\n        setOpen(true);\r\n    };\r\n\r\n    const handleDrawerClose = () => {\r\n        setOpen(false);\r\n    };\r\n\r\n    const handleListItemClick = (url,title) =>{\r\n        handleDrawerClose();\r\n        setTitle(title);\r\n\r\n        if(location.pathname === url){\r\n            history.go(0)\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className={classes.root1}>\r\n            <CssBaseline />\r\n            <AppBar\r\n                position=\"fixed\"\r\n                className={clsx(classes.appBar, {\r\n                    [classes.appBarShift]: open,\r\n                })}\r\n            >\r\n                <Toolbar>\r\n                    <IconButton\r\n                        color=\"inherit\"\r\n                        aria-label=\"open drawer\"\r\n                        onClick={handleDrawerOpen}\r\n                        edge=\"start\"\r\n                        className={clsx(classes.menuButton, open && classes.hide)}\r\n                    >\r\n                        <MenuIcon />\r\n                    </IconButton>\r\n                    <Typography variant=\"h6\" noWrap>\r\n                        {title}\r\n                    </Typography>\r\n                </Toolbar>\r\n            </AppBar>\r\n\r\n            <Drawer\r\n                className={classes.drawer}\r\n                variant=\"persistent\"\r\n                anchor=\"left\"\r\n                open={open}\r\n                classes={{\r\n                    paper: classes.drawerPaper,\r\n                }}\r\n            >\r\n                <div className={classes.drawerHeader}>\r\n                    <IconButton onClick={handleDrawerClose}>\r\n                        {theme.direction === 'ltr' ? <ChevronLeftIcon /> : <ChevronRightIcon />}\r\n                    </IconButton>\r\n                </div>\r\n\r\n                <Divider />\r\n                <List>\r\n                    <ListItem button component={Link} to=\"/app/\" onClick={()=>handleListItemClick(\"/app/\",\"Home\")}>\r\n                        <ListItemText>Home</ListItemText>\r\n                    </ListItem>\r\n                    <Divider light />\r\n                    <ListItem button component={Link} to=\"/app/places\" onClick={()=>handleListItemClick(\"/app/places\",\"Places\")} >\r\n                        <ListItemText>Places</ListItemText>\r\n                    </ListItem>\r\n                    <ListItem button component={Link} to=\"/app/tours\" onClick={()=>handleListItemClick(\"/app/tours\",\"Tours\")} >\r\n                        <ListItemText>Tours</ListItemText>\r\n                    </ListItem>\r\n                    <ListItem button component={Link} to=\"/app/apiplaces\" onClick={()=>handleListItemClick(\"/app/apiplaces\",\"Api places\")} >\r\n                        <ListItemText>Explore API places</ListItemText>\r\n                    </ListItem>\r\n                    <ListItem button component={Link} to=\"/app/addplace\" onClick={()=>handleListItemClick(\"/app/addplace\",\"Add Place\")} >\r\n                        <ListItemText>Add place</ListItemText>\r\n                    </ListItem>\r\n                    <ListItem button component={Link} to=\"/app/addtour\" onClick={()=>setTitle(\"Add tour\")} >\r\n                        <ListItemText>Add tour</ListItemText>\r\n                    </ListItem>\r\n                </List>\r\n            </Drawer>\r\n            <main\r\n                className={clsx(classes.content, {\r\n                    [classes.contentShift]: open,\r\n                })}\r\n            >\r\n                <div className={classes.drawerHeader} />\r\n                <Switch>\r\n                    <Route exact path=\"/app\" component={Home} />\r\n                    <Route path=\"/app/places\" component={Places} />\r\n                    <Route path=\"/app/tours\" component={Tours} />\r\n                    <Route path=\"/app/addplace/:placeId?\" component={AddPlace} />\r\n                    <Route path=\"/app/apiplaces\" component={ApiPlaces} />\r\n                    <Route path=\"/app/addplace\" component={AddPlace} />\r\n                    <Route path=\"/app/addtour/:tourId?\" component={Tour} />\r\n                    <Route path=\"/app/addtour\" component={Tour} />\r\n                    <Redirect from=\"*\" to=\"/404\"/>\r\n                </Switch>\r\n\r\n            </main>\r\n        </div>\r\n    );\r\n}\r\n","import React, { Component } from 'react';\r\nimport Appbar from './components/Appbar.js';\r\nimport AppBarTitleProvider from \"./contexts/AppBarTitleContext\";\r\nimport { MuiPickersUtilsProvider } from \"@material-ui/pickers\";\r\nimport DateFnsUtils from '@date-io/date-fns';\r\n\r\nclass App extends Component {\r\n    render() {\r\n        return (\r\n            <React.Fragment>\r\n                    <MuiPickersUtilsProvider utils={DateFnsUtils}>\r\n                    <AppBarTitleProvider>\r\n                        <Appbar />\r\n                    </AppBarTitleProvider>\r\n                    </MuiPickersUtilsProvider>\r\n            </React.Fragment>\r\n        );\r\n    }\r\n}\r\nexport default App;","import React, {useEffect, useState} from \"react\";\r\nimport app from \"../helpers/firebaseInit\"\r\nexport const AuthContext = React.createContext();\r\n\r\nexport const AuthProvider = ({children}) => {\r\n    const [currentUser, setCurrentUser] = useState(null);\r\n    const [isLoading, setIsLoading] = useState(true);\r\n\r\n    useEffect(()=>{\r\n        app.auth().onAuthStateChanged(function (user) {\r\n            if (user) {\r\n                setCurrentUser(user);\r\n\r\n            }\r\n            setIsLoading(false)\r\n        });\r\n    },[]);\r\n\r\n\r\n    return (\r\n        <AuthContext.Provider\r\n            value={{\r\n                currentUser,\r\n                isLoading\r\n            }}\r\n        >\r\n            {children}\r\n        </AuthContext.Provider>\r\n    );\r\n};","import React, {useContext, useEffect, useState} from 'react';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport Button from '@material-ui/core/Button';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Box from '@material-ui/core/Box';\r\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Container from '@material-ui/core/Container';\r\nimport Cookies from 'js-cookie'\r\nimport * as firebase from \"firebase\";\r\nimport history from \"../helpers/history\";\r\nimport UseSnackbarContext from \"../contexts/UseSnackbarContext\";\r\nimport LinearProgress from \"@material-ui/core/LinearProgress\";\r\nimport app from \"../helpers/firebaseInit\";\r\nimport {AuthContext} from \"../contexts/AuthContext\";\r\nimport Redirect from \"react-router-dom/es/Redirect\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport {isAuthenticated} from \"../helpers/tokens\";\r\n\r\nfunction Copyright() {\r\n    return (\r\n        <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">\r\n            {'Copyright © '}\r\n                Traveldirection {' '}\r\n            {new Date().getFullYear()}\r\n            {'.'}\r\n        </Typography>\r\n    );\r\n}\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    paper: {\r\n        marginTop: theme.spacing(8),\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n    },\r\n    avatar: {\r\n        margin: theme.spacing(1),\r\n        backgroundColor: theme.palette.secondary.main,\r\n    },\r\n    form: {\r\n        width: '100%', // Fix IE 11 issue.\r\n        marginTop: theme.spacing(1),\r\n    },\r\n    submit: {\r\n        margin: theme.spacing(3, 0, 2),\r\n    },\r\n    loaderMain: {\r\n        width: \"100%\",\r\n        height: \"100%\",\r\n        alignItems:\"center\",\r\n        justifyContent: \"center\",\r\n        backgroundColor: \"red\"\r\n    }\r\n}));\r\n\r\n\r\nexport default function LoginPage() {\r\n    const classes = useStyles();\r\n    const [email, setEmail] = useState(\"\");\r\n    const [password, setPassword] = useState(\"\");\r\n    const [loading, setIsLoading] = useState(false);\r\n    const { addConfig } = UseSnackbarContext();\r\n    const { currentUser, isLoading } = useContext(AuthContext);\r\n\r\n\r\n    const handleLogin = () =>{\r\n        setIsLoading(true);\r\n        app.auth().signInWithEmailAndPassword(email , password)\r\n            .then(function(user) {\r\n                setIsLoading(false)\r\n                app.auth().currentUser.getIdToken(true).then(function (idToken) {\r\n                    console.log(\"Getting new access token\");\r\n                    Cookies.set(\"access_token\", idToken);\r\n                    history.push(\"/app\");\r\n                }).catch(function (error) {\r\n                    addConfig(false, \"Error receiving access token\")\r\n                });\r\n            })\r\n            .catch(function(error) {\r\n                setIsLoading(false);\r\n                addConfig(false, error.message)\r\n            });\r\n    };\r\n\r\n\r\n    if (isAuthenticated()) {\r\n        return <Redirect to=\"/app\" />;\r\n    }\r\n\r\n    const handleKeyPress = (event) =>{\r\n        if (event.which === 13 || event.keyCode === 13) {\r\n            handleLogin();\r\n            return false;\r\n        }\r\n        return true;\r\n    };\r\n\r\n    return <Container component=\"main\" maxWidth=\"xs\" onKeyPress={(e)=>handleKeyPress(e)}>\r\n\r\n                            {loading && <LinearProgress />}\r\n                            <CssBaseline />\r\n                            <div className={classes.paper}>\r\n                                <Avatar className={classes.avatar}>\r\n                                    <LockOutlinedIcon />\r\n                                </Avatar>\r\n                                <Typography component=\"h1\" variant=\"h5\">\r\n                                    Sign in\r\n                                </Typography>\r\n                                <TextField\r\n                                    variant=\"outlined\"\r\n                                    margin=\"normal\"\r\n                                    required\r\n                                    fullWidth\r\n                                    value={email}\r\n                                    onChange={(e)=>{setEmail(e.target.value)}}\r\n                                    id=\"email\"\r\n                                    label=\"Email Address\"\r\n                                    name=\"email\"\r\n                                    autoComplete=\"email\"\r\n                                    autoFocus\r\n                                />\r\n                                <TextField\r\n                                    variant=\"outlined\"\r\n                                    margin=\"normal\"\r\n                                    required\r\n                                    value={password}\r\n                                    onChange={(e)=>{setPassword(e.target.value)}}\r\n                                    fullWidth\r\n                                    name=\"password\"\r\n                                    label=\"Password\"\r\n                                    type=\"password\"\r\n                                    id=\"password\"\r\n                                    autoComplete=\"current-password\"\r\n                                />\r\n                                <Button\r\n                                    onClick={()=>{handleLogin()}}\r\n                                    fullWidth\r\n                                    variant=\"contained\"\r\n                                    color=\"primary\"\r\n                                    className={classes.submit}\r\n                                >\r\n                                    Sign In\r\n                                </Button>\r\n                            </div>\r\n                            <Box mt={8}>\r\n                                <Copyright />\r\n                            </Box>\r\n                        </Container>\r\n\r\n}","import Route from \"react-router-dom/es/Route\";\r\nimport React, {useContext} from \"react\";\r\nimport Redirect from \"react-router-dom/es/Redirect\";\r\nimport {isAuthenticated} from \"../helpers/tokens\";\r\n\r\nexport const AuthenticatedRoute = ({ component: Component, ...rest }) => {\r\n    return (\r\n        <Route\r\n            {...rest}\r\n            render={routeProps =>\r\n                isAuthenticated() === true ? (\r\n                    <Component {...routeProps} />\r\n                ) : (\r\n                    <Redirect to={\"/login\"} />\r\n                )\r\n            }\r\n        />\r\n    );\r\n};","import React, {useState} from \"react\";\r\nimport Snackbar from \"@material-ui/core/Snackbar\";\r\nimport Alert from \"@material-ui/lab/Alert\";\r\nimport UseSnackbarContext from \"../../contexts/UseSnackbarContext\";\r\n\r\n\r\nexport default function SnackbarFeedback(props){\r\n\r\n    const { config, removeConfig } = UseSnackbarContext();\r\n\r\n    return(\r\n        <Snackbar anchorOrigin={{vertical:'bottom', horizontal:'left'}} open={!!config} autoHideDuration={4000} onClose={removeConfig}>\r\n            <Alert onClose={removeConfig} severity={!!config ? (config.success ? \"success\" : \"error\") : \"\"}>\r\n                {!!config && config.message}\r\n            </Alert>\r\n        </Snackbar>\r\n    )\r\n}\r\n","import React from \"react\";\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport UseAlertDialogContext from \"../../contexts/UseAlertDialogContext\"\r\n\r\nconst AlertDialogFeedback = () => {\r\n\r\n    const {alertConfig, removeAlertConfig} = UseAlertDialogContext();\r\n\r\n    function remove() {\r\n        if(alertConfig.onClose !== undefined){\r\n            alertConfig.onClose()\r\n        }\r\n        removeAlertConfig()\r\n    }\r\n\r\n    return(\r\n        <Dialog\r\n            open={!!alertConfig}\r\n            onClose={remove}\r\n            aria-labelledby=\"alert-dialog-title\"\r\n            aria-describedby=\"alert-dialog-description\"\r\n        >\r\n            <DialogTitle id=\"alert-dialog-title\">{!!alertConfig ? alertConfig.title : \"\"}</DialogTitle>\r\n            <DialogContent>\r\n                <DialogContentText id=\"alert-dialog-description\">\r\n                    {!!alertConfig ? alertConfig.message : \"\"}\r\n                </DialogContentText>\r\n            </DialogContent>\r\n            <DialogActions>\r\n                <Button onClick={remove}\r\n                        color=\"primary\">\r\n                    Close\r\n                </Button>\r\n                {!!alertConfig && alertConfig.actions.map(row=>{\r\n                    return <Button onClick={()=>{\r\n                        remove();\r\n                        row.action();\r\n                    }}\r\n                    color=\"primary\"\r\n                    >\r\n                            {row.name}\r\n                    </Button>\r\n                })}\r\n            </DialogActions>\r\n        </Dialog>\r\n    )\r\n};\r\n\r\n\r\nexport default AlertDialogFeedback\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport history from \"./helpers/history\";\r\nimport LoginPage from \"./pages/LoginPage\";\r\nimport { Router, Route, Link, Switch} from \"react-router-dom\";\r\nimport {AuthenticatedRoute} from \"./components/AuthenticatedRoute\";\r\nimport NotFoundPage from \"./pages/NotFoundPage\";\r\nimport Redirect from \"react-router-dom/es/Redirect\";\r\nimport SnackbarProvider from \"./contexts/SnackbarContext\";\r\nimport SnackbarFeedback from \"./components/feedback/SnackbarFeedback\";\r\nimport AlertDialogProvider from \"./contexts/AlertDialogContext\";\r\nimport AlertDialogFeedback from \"./components/feedback/AlertDialogFeedback\";\r\nimport {AuthProvider} from \"./contexts/AuthContext\";\r\n\r\nrequire('dotenv').config();\r\n\r\nReactDOM.render(\r\n    <AuthProvider>\r\n        <Router history={history}>\r\n            <SnackbarProvider>\r\n                <AlertDialogProvider>\r\n                    <SnackbarFeedback/>\r\n                    <AlertDialogFeedback/>\r\n                    <Switch>\r\n                        <Redirect exact from=\"/\" to=\"/app\"/>\r\n                        <AuthenticatedRoute path=\"/app\" component={App} />\r\n                        <Route path=\"/login\" component={LoginPage} />\r\n                        <Route path=\"*\" component={NotFoundPage}/>\r\n                        <Redirect from=\"*\" to=\"/404\" />\r\n                    </Switch>\r\n                </AlertDialogProvider>\r\n            </SnackbarProvider>\r\n        </Router>\r\n    </AuthProvider>\r\n   , document.getElementById('root'));\r\n"],"sourceRoot":""}