(this["webpackJsonptravelling-admin"]=this["webpackJsonptravelling-admin"]||[]).push([[0],{492:function(e,t,a){e.exports=a(912)},762:function(e,t,a){e.exports=a.p+"static/media/selectedParking.102bdd14.svg"},763:function(e,t,a){e.exports=a.p+"static/media/availableParking.6ac3f9ec.svg"},912:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(21),i=a.n(l),o=a(422),c=a(423),s=a(464),u=a(463),d=a(13),m=a(4),p=a(7),f=a(2),g=a(96),b=a(41),E=a(1005),h=a(988),v=a(990),y=a(963),O=a(967),j=a(63),C=a(986),S=a(467),k=a(298),I=a.n(k),w=a(458),P=a.n(w),T=a(459),x=a.n(T),D=a(972),A=a(991),N=a(80),L=a(35),R=a(5),_=a(424),M=(a(500),_.initializeApp({apiKey:"AIzaSyBRhTGXvKq0RD-ajkbOndOIK9c03wg9vRo",authDomain:"travel-fd76c.firebaseapp.com",databaseURL:"https://travel-fd76c.firebaseio.com",projectId:"travel-fd76c",storageBucket:"travel-fd76c.appspot.com",messagingSenderId:"654752782594",appId:"1:654752782594:web:478b4a1d8a17c52975ca1b"})),F=a(93),W=a.n(F),B=Object(R.a)((function(e){return{button:{margin:e.spacing(1)},input:{display:"none"}}}))((function(e){e.classes;return r.a.createElement("div",null)})),q=a(11),U=a(970),z=a(971),H=a(962),G=a(969),Y=a(960),V=a(994),K=a(961),$=a(1008),J=a(170),Z=a(996),X=a(964),Q=a(89),ee=a.n(Q),te=a(294),ae=a.n(te),ne=a(999);var re=a(968);function le(e,t,a){return t[a]<e[a]?-1:t[a]>e[a]?1:0}function ie(e){var t=e.classes,a=e.onSelectAllClick,n=e.order,l=e.orderBy,i=e.numSelected,o=e.rowCount,c=e.onRequestSort,s=e.headCells,u=e.checkable;return r.a.createElement(Y.a,null,r.a.createElement(K.a,null,u?r.a.createElement(H.a,{padding:"checkbox"},r.a.createElement(Z.a,{indeterminate:i>0&&i<o,checked:o>0&&i===o,onChange:a,inputProps:{"aria-label":"select all desserts"}})):null,s.map((function(e){return r.a.createElement(H.a,{key:e.id,align:e.numeric?"right":"left",padding:e.disablePadding?"none":"default",sortDirection:l===e.id&&n},r.a.createElement($.a,{active:l===e.id,direction:l===e.id?n:"asc",onClick:(a=e.id,function(e){c(e,a)})},e.label,l===e.id?r.a.createElement("span",{className:t.visuallyHidden},"desc"===n?"sorted descending":"sorted ascending"):null));var a}))))}var oe=Object(g.a)((function(e){return{root:{paddingLeft:e.spacing(2),paddingRight:e.spacing(1)},highlight:"light"===e.palette.type?{color:e.palette.secondary.main,backgroundColor:Object(q.e)(e.palette.secondary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},title:{flex:"1 1 100%"}}})),ce=function(e){var t=oe(),a=e.numSelected,l=e.title,i=e.changePageCallback,o=e.keyword,c=e.setKeyword,s=e.customToolbarElements,u=function(e,t){var a=Object(n.useState)(e),r=Object(m.a)(a,2),l=r[0],i=r[1];return Object(n.useEffect)((function(){var a=setTimeout((function(){i(e)}),t);return function(){clearTimeout(a)}}),[e]),l}(o,300);return Object(n.useEffect)((function(){i(1,o)}),[u]),r.a.createElement(y.a,{className:Object(f.a)(t.root,Object(d.a)({},t.highlight,a>0))},a>0?r.a.createElement(j.a,{className:t.title,color:"inherit",variant:"subtitle1",component:"div"},a," selected"):r.a.createElement(j.a,{className:t.title,variant:"h6",id:"tableTitle",component:"div"},l),a>0?r.a.createElement(X.a,{title:"Delete"},r.a.createElement(S.a,{"aria-label":"delete"},r.a.createElement(ee.a,null))):r.a.createElement("div",{style:{display:"flex",alignItems:"center"}},r.a.createElement(ne.a,{id:"standard-basic",label:"Search",onChange:function(e){c(e.target.value)}}),s||null))},se=Object(g.a)((function(e){return{root:{width:"100%"},paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:750},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1},centerCell:{textAlign:"center",width:"100%"},rowNotPublished:{backgroundColor:"#ffcdd2"},rowNotVerified:{backgroundColor:"#fff9c4"},rowBasic:{backgroundColor:"#FFFFFF"}}}));function ue(e){var t=e.title,a=e.searchFunction,l=e.headCells,i=e.pagingInfo,o=e.data,c=e.checkable,s=e.changePageCallback,u=e.updateCallback,d=e.removeCallback,p=e.id,f=e.isLoading,g=e.customToolbarElements,b=se(),E=r.a.useState("asc"),h=Object(m.a)(E,2),v=h[0],y=h[1],O=r.a.useState("calories"),C=Object(m.a)(O,2),k=C[0],I=C[1],w=r.a.useState([]),P=Object(m.a)(w,2),T=P[0],x=P[1],D=r.a.useState(0),A=Object(m.a)(D,2),N=A[0],L=A[1],R=r.a.useState(!1),_=Object(m.a)(R,2),M=_[0],F=(_[1],r.a.useState(10)),W=Object(m.a)(F,2),B=W[0],q=W[1],Y=Object(n.useState)(""),$=Object(m.a)(Y,2),X=$[0],Q=$[1],te=B-Math.min(B,o.length-N*B);return r.a.createElement("div",{className:b.root},r.a.createElement(J.a,{className:b.paper},f?r.a.createElement(re.a,null):null,r.a.createElement(ce,{title:t,numSelected:T.length,changePageCallback:s,keyword:X,setKeyword:Q,customToolbarElements:g}),r.a.createElement(G.a,null,r.a.createElement(U.a,{className:b.table,"aria-labelledby":"tableTitle",size:M?"small":"medium","aria-label":"enhanced table"},r.a.createElement(ie,{classes:b,numSelected:T.length,order:v,orderBy:k,onSelectAllClick:function(e){if(e.target.checked){var t=o.map((function(e){return e.name}));x(t)}else x([])},onRequestSort:function(e,t){y(k===t&&"asc"===v?"desc":"asc"),I(t)},rowCount:o.length,headCells:l,checkable:c}),r.a.createElement(z.a,null,function(e,t){var a=e.map((function(e,t){return[e,t]}));return a.sort((function(e,a){var n=t(e[0],a[0]);return 0!==n?n:e[1]-a[1]})),a.map((function(e){return e[0]}))}(o,function(e,t){return"desc"===e?function(e,a){return le(e,a,t)}:function(e,a){return-le(e,a,t)}}(v,k)).filter((function(e){return void 0===a||a(X,e)})).slice(N*B,N*B+B).map((function(e,t){var a,n=(a=e.name,-1!==T.indexOf(a)),i="enhanced-table-checkbox-".concat(t),o=void 0!==e.isVerified&&!1===e.isVerified?b.rowNotVerified:void 0!==e.isPublic&&!1===e.isPublic?b.rowNotPublished:b.rowBasic;return r.a.createElement(K.a,{className:o,hover:!0,onClick:function(t){e.name},role:"checkbox","aria-checked":n,tabIndex:-1,key:e[p],selected:n},c?r.a.createElement(H.a,{padding:"checkbox"},r.a.createElement(Z.a,{checked:n,onChange:function(t){return function(e,t){var a=T.indexOf(t),n=[];-1===a?n=n.concat(T,t):0===a?n=n.concat(T.slice(1)):a===T.length-1?n=n.concat(T.slice(0,-1)):a>0&&(n=n.concat(T.slice(0,a),T.slice(a+1))),x(n)}(0,e.name)},inputProps:{"aria-labelledby":i}})):null,l.map((function(t){return t.isId?r.a.createElement(H.a,{component:"th",id:i,scope:"row"},e[t.id]):"actions"===t.id?r.a.createElement(H.a,null,r.a.createElement("div",null,r.a.createElement(S.a,{onClick:function(){return u(e[p])},size:"small","aria-label":"edit"},r.a.createElement(ae.a,{fontSize:"small"})),r.a.createElement(S.a,{size:"small","aria-label":"delete"},r.a.createElement(ee.a,{onClick:function(){return d(e[p])},fontSize:"small"})))):r.a.createElement(H.a,{align:t.numeric?"right":"left"},e[t.id])})))})),te>0&&r.a.createElement(K.a,{style:{height:(M?33:53)*te}},o.length>0?r.a.createElement(H.a,{colSpan:6}):!f&&r.a.createElement(H.a,{colSpan:6,className:b.centerCell},r.a.createElement(j.a,{variant:"h6",noWrap:!0},"No results")))))),r.a.createElement(V.a,{rowsPerPageOptions:[10],component:"div",count:null!==i?i.total:o.length,rowsPerPage:B,page:null!==i?i.pageNum-1:N,onChangePage:function(e,t){null!==i?s(t+1,X):L(t)},onChangeRowsPerPage:function(e){q(parseInt(e.target.value,10)),L(0),console.log("handleChangeRowsPerPage")}})))}var de=a(232),me=a.n(de),pe=a(430),fe=a(299),ge=a.n(fe),be=a(66),Ee=Object(be.a)(),he=function(){return W.a.get("access_token")},ve=function(){return!!he()},ye=function(){var e=Object(pe.a)(me.a.mark((function e(t,a){var n,r,l;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=ge.a.create({baseURL:"https://www.traveldirection.ax.lt:8080/",headers:{"Content-Type":null==a?"application/json":a,Accept:"application/json","Access-Control-Allow-Origin":"*",Authorization:he()}})).interceptors.response.use((function(e){return e}),(function(e){var t=e.config,a=e.response.status;return!M.auth().currentUser||401!==a&&403!==a||void 0!==t._retry?Promise.reject(e):M.auth().currentUser.getIdToken(!0).then((function(e){return t._retry=!0,t.headers.Authorization=e,W.a.set("access_token",e),ge()(t)}))})),r=function(e){return console.log("Request Successful!",e),e.data},l=function(e){return console.debug("Request Failed:",e.config),e.response?(console.debug("Status:",e.response.status),403===e.response.status&&Ee.push("/login"),console.debug("Data:",e.response.data),console.debug("Headers:",e.response.headers)):console.debug("Error Message:",e.message),Promise.reject(e.response||e.message)},e.abrupt("return",n(t).then(r).catch(l));case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Oe={getRequest:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return ye({url:e+t,method:"GET"})},postRequest:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return ye({url:e+a,method:"POST",data:t})},postMultipartRequest:function(e,t){return ye({url:e,method:"POST",data:t},"multipart/form-data")}},je={Tour:{insertTour:function(e){return Oe.postRequest("api/v1/tour/insert",e)},getTour:function(e){return Oe.getRequest("api/v1/tour",e)},updateTour:function(e,t){return Oe.postRequest("api/v1/tour/update",e,t)},getAllToursAdmin:function(e){return Oe.getRequest("api/v1/tour/searchadmin",e)},removeTour:function(e){return Oe.getRequest("api/v1/tour/delete",e)}},SourcePlace:{updateSourcesForPlace:function(e,t){return Oe.postRequest("api/v1/sourceplace/update",e,t)}},Source:{getSources:function(){return Oe.getRequest("api/v1/source/all")},addSource:function(e){return Oe.postRequest("api/v1/source/insert",e)}},Places:{getAllCities:function(){return Oe.getRequest("api/v1/place/city/all")},getAllCounties:function(){return Oe.getRequest("api/v1/place/county/all")},getAllCountries:function(){return Oe.getRequest("api/v1/place/country/all")},getAllMunicipalities:function(){return Oe.getRequest("api/v1/place/municipality/all")},getAllPlaces:function(e){return Oe.getRequest("api/v1/place/search",e)},insertPlace:function(e){return Oe.postRequest("api/v1/place/insert",e)},updatePlace:function(e){return Oe.postRequest("api/v1/place/update",e)},getPlaceById:function(e){return Oe.getRequest("api/v1/place/getplace",e)},getAllPlacesAdmin:function(e){return Oe.getRequest("api/v1/place/searchadmin",e)},searchApiPlaces:function(e){return Oe.getRequest("api/v1/placeApi/search",e)},removePlace:function(e){return Oe.getRequest("api/v1/place/delete",e)}},Tags:{getAllTags:function(){return Oe.getRequest("api/v1/tags/all")},addTag:function(e){return Oe.postRequest("api/v1/tags/insert",e)},removeTags:function(e){return Oe.postRequest("api/v1/tags/delete",e)},updateTags:function(e){return Oe.postRequest("api/v1/tags/update",e)}},Categories:{addCategory:function(e){return Oe.postRequest("api/v1/categories/insert",e)},getAllCategories:function(){return Oe.getRequest("api/v1/categories/all")},removeCategory:function(e){return Oe.postRequest("api/v1/categories/delete",e)},updateCategory:function(e){return Oe.postRequest("api/v1/categories/update",e)}},Photos:{addPhoto:function(e){return Oe.postRequest("api/v1/photo/insert",e)},uploadPhoto:function(e){return Oe.postMultipartRequest("api/v1/photo/upload",e)}},Parking:{getParkingByLocation:function(e){return Oe.getRequest("api/v1/parking/searchAdmin",e)},insertNewParking:function(e){return Oe.postRequest("api/v1/parking/insert",e)}},TagsPlace:{updateTagsForPlace:function(e,t){return Oe.postRequest("api/v1/tagsplace/update",e,t)}},CategoriesPlace:{updateCategoriesForPlace:function(e,t){return Oe.postRequest("api/v1/categoryplace/update",e,t)}},ParkingPlace:{updateParkingForPlace:function(e,t){return Oe.postRequest("api/v1/parkingplace/update",e,t)}},PhotoPlace:{updatePhotoForPlace:function(e,t){return Oe.postRequest("api/v1/photoplace/update",e,t)}},Schedule:{updateScheduleForPlace:function(e,t){return Oe.postRequest("api/v1/ws/update",e,t)}},Reviews:{getPlaceReviews:function(e){return Oe.getRequest("api/v1/reviews/all",e)}}},Ce=a(244),Se=a(29),ke=a.n(Se),Ie=a(1e3),we=r.a.createContext({alertConfig:null,addAlertConfig:function(){},removeAlertConfig:function(){}});function Pe(e){var t=e.children,a=Object(n.useState)(null),l=Object(m.a)(a,2),i=l[0],o=l[1],c={alertConfig:i,addAlertConfig:function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;return o({title:e,message:t,actions:a,onClose:n})},removeAlertConfig:function(){return o(null)}};return r.a.createElement(we.Provider,{value:c},t)}function Te(){var e=Object(n.useContext)(we);return{alertConfig:e.alertConfig,addAlertConfig:e.addAlertConfig,removeAlertConfig:e.removeAlertConfig}}var xe={DIALOG_PLACE_PUBLISH_TITLE:"Place publicity",DIALOG_PLACE_PUBLISH_MESSAGE:"This place will be visible for all users. Are you sure?",DIALOG_PLACE_UNPUBLISH_MESSAGE:"This place will not be visible anymore. Are you sure?",DIALOG_PLACE_INSERT_TITLE:"Insert place",DIALOG_PLACE_INSERT:"Are you sure you want to insert this place?",DIALOG_PLACE_UPDATE_TITLE:"Update place",DIALOG_PLACE_UPDATE:"Are you sure you want to make changes to this place?",DIALOG_PLACE_VERIFY_TITLE:"Place verification",DIALOG_PLACE_VERIFY_MESSAGE:"This is a user's suggested place. Are you sure you want to verify this place and make it visible to others?",DIALOG_PLACE_DELETE_TITLE:"Delete place",DIALOG_PLACE_DELETE_MESSAGE:"This action will remove this place permanently. Are you sure you want to proceed?",DIALOG_TOUR_DELETE_TITLE:"Delete tour",DIALOG_TOUR_DELETE_MESSAGE:"This action will remove this tour permanently. Are you sure you want to proceed?",SNACKBAR_PLACE_INSERTED_SUCCESS:"Place inserted successfully",SNACKBAR_PLACE_REMOVE_SUCCESS:"Place was removed successfully",SNACKBAR_TOUR_INSERTED_SUCCESS:"Tour inserted successfully",SNACKBAR_TOUR_REMOVE_SUCCESS:"Tour was removed successfully",SNACKBAR_ERROR:"Something went wrong!",SNACKBAR_CHANGES_SAVED:"All changes saved!"},De=r.a.createContext({config:null,addConfig:function(){},removeConfig:function(){}});function Ae(e){var t=e.children,a=Object(n.useState)(null),l=Object(m.a)(a,2),i=l[0],o=l[1],c={config:i,addConfig:function(e,t){return function(e,t){return o({success:e,message:t})}(e,t)},removeConfig:function(){return o(null)}};return r.a.createElement(De.Provider,{value:c},t)}function Ne(){var e=Object(n.useContext)(De);return{config:e.config,addConfig:e.addConfig,removeConfig:e.removeConfig}}var Le=a(148),Re=a.n(Le),_e=a(921),Me=a(974),Fe=a(975),We=a(976),Be=a(17),qe=a(998),Ue=a(1009);var ze=Object(R.a)((function(e){return{autoComplete:{margin:e.spacing(1)},chip:{margin:e.spacing(.5)},root:{display:"flex",justifyContent:"left",flexWrap:"wrap",listStyle:"none",padding:e.spacing(1),margin:0},autoCompleteChipContainer:{padding:e.spacing(1)}}}))((function(e){var t=e.options,a=e.setOptions,l=e.selectedOptions,i=e.setSelectedOptions,o=e.classes,c=e.label,s=e.id,u=Object(n.useState)({name:""}),d=Object(m.a)(u,2),p=d[0],f=d[1],g=Object(n.useState)(!0),b=Object(m.a)(g,2),E=b[0],h=b[1];function v(e){i(l.filter((function(t){return t!==e}))),a([].concat(Object(Be.a)(t),[e]))}return Object(n.useEffect)((function(){if(E&&t.length>0){var e=[];t.map((function(t){var a=!1;l.map((function(e){JSON.stringify(t)===JSON.stringify(e)&&(a=!0)})),a||e.push(t)})),a(e),h(!1)}}),[t]),r.a.createElement("div",null,r.a.createElement(Ie.a,{className:o.autoCompleteChipContainer},0!==l.length&&r.a.createElement(Ie.a,{component:"ul",className:o.root},l.map((function(e){return void 0!==s?r.a.createElement("li",{key:e[s]},r.a.createElement(Ue.a,{variant:"outlined",label:e.name,onDelete:function(){return v(e)},className:o.chip})):r.a.createElement("li",{key:e},r.a.createElement(Ue.a,{variant:"outlined",label:e,onDelete:function(){return v(e)},className:o.chip}))}))),r.a.createElement(qe.a,{className:o.autoComplete,value:p,options:t,onChange:function(e,n){f({name:""}),i([].concat(Object(Be.a)(l),[n])),a(t.filter((function(e){return e!==n})))},disableClearable:!0,getOptionLabel:function(e){return void 0!==s?e.name:e},renderInput:function(e){return r.a.createElement(ne.a,Object.assign({},e,{label:c,variant:"outlined"}))}})))})),He=a(28),Ge=a.n(He),Ye=a(24),Ve=a.n(Ye),Ke=a(240),$e=a(431),Je=a.n($e),Ze=r.a.createContext(),Xe=a(524),Qe={insertionStart:Ye(new Date("2020-05-01T21:11:54")).format("YYYY-MM-DD"),insertionEnd:Ye(new Date).format(),modificationStart:Ye(new Date("2014-05-01T21:11:54")).format("YYYY-MM-DD"),modificationEnd:Ye(new Date).format()},et=function(e){var t=e.children,a=Object(n.useState)([]),l=Object(m.a)(a,2),i=l[0],o=l[1],c=Object(n.useState)([]),s=Object(m.a)(c,2),u=s[0],d=s[1],p=Object(n.useState)([]),f=Object(m.a)(p,2),g=f[0],b=f[1],E=Object(n.useState)([]),h=Object(m.a)(E,2),v=h[0],y=h[1],O=Object(n.useState)([]),j=Object(m.a)(O,2),C=j[0],S=j[1],k=Object(n.useState)([]),I=Object(m.a)(k,2),w=I[0],P=I[1],T=Object(n.useState)([]),x=Object(m.a)(T,2),D=x[0],A=x[1],N=Object(n.useState)([]),L=Object(m.a)(N,2),R=L[0],_=L[1],M=Object(n.useState)([]),F=Object(m.a)(M,2),W=F[0],B=F[1],q=Object(n.useState)([]),U=Object(m.a)(q,2),z=U[0],H=U[1],G=Object(n.useState)(!0),Y=Object(m.a)(G,2),V=Y[0],K=Y[1],$=Object(n.useState)(!1),J=Object(m.a)($,2),Z=J[0],X=J[1],Q=Object(n.useState)([{filterLabel:"Unverified",filter:!1,filterName:"unverified"},{filterLabel:"Unpublished",filter:!1,filterName:"unpublished"}]),ee=Object(m.a)(Q,2),te=ee[0],ae=ee[1],ne=Object(n.useState)(Qe),re=Object(m.a)(ne,2),le=re[0],ie=re[1],oe=Object(n.useState)(Xe(null,{queryParams:{di:[le.insertionStart,le.insertionEnd],dm:[le.modificationStart,le.modificationEnd],filterOptions:me(),categories:de(),countries:w,cities:v}})),ce=Object(m.a)(oe,2),se=ce[0],ue=ce[1];function de(){var e=[];return u.map((function(t){e.push(t.name)})),e}function me(){var e=[];return te.map((function(t){!0===t.filter&&e.push(t.filterName)})),e}Object(n.useEffect)((function(){console.log("Fetching..."),Promise.all([void je.Categories.getAllCategories().then((function(e){o(e),console.log(e)})).catch((function(e){console.log(e)})),void je.Places.getAllCities().then((function(e){b(e)})).catch((function(e){})),void je.Places.getAllCountries().then((function(e){S(e)})).catch((function(e){})),void je.Places.getAllCounties().then((function(e){B(e)})).catch((function(e){})),void je.Places.getAllMunicipalities().then((function(e){A(e)})).catch((function(e){}))]).then((function(e){K(!1),console.log("All data received!")})).catch((function(e){}))}),[]),Object(n.useEffect)((function(){V||(Z?(console.log("Clearing filters"),function(){var e=!0;return te.map((function(t){t.filter&&(e=!1)})),e&&0===u.length&&0===v.length&&0===w.length&&le.insertionStart===Qe.insertionStart&&le.modificationStart===Qe.modificationStart}()&&(console.log("All filters cleared"),X(!1))):ue(Xe(null,{queryParams:{di:[le.insertionStart,le.insertionEnd],dm:[le.modificationStart,le.modificationEnd],o:me(),c:de(),countries:w,cities:v}})))}),[u,v,w,le,te,Z]);var pe={filterQuery:se,setResetFilterOptions:X,dates:le,setDates:ie,filterOptions:te,setFilterOptions:ae,categories:i,setCategories:o,selectedCategories:u,setSelectedCategories:d,counties:W,setCounties:B,selectedCounties:z,setSelectedCounties:H,cities:g,setCities:b,selectedCities:v,setSelectedCities:y,countries:C,setCountries:S,selectedCountries:w,setSelectedCountries:P,municipalities:D,setMunicipalities:A,selectedMunicipalities:R,setSelectedMunicipalities:_};return r.a.createElement(Ze.Provider,{value:pe},t)};var tt=Ge()((function(e){return{filterDiv:{display:"flex",flexDirection:"row"},sortingButtons:{display:"flex",flexDirection:"column",padding:e.spacing(2),height:"100%"},rightLayout:{boxShadow:"0 0 1px 0 #666",display:"flex",flexDirection:"column",padding:e.spacing(2)},datesLayout:{padding:e.spacing(2),display:"flex",flexDirection:"row",justifyContent:"space-between"}}}))((function(e){var t=e.classes,a=Object(n.useContext)(Ze),l=a.categories,i=a.setCategories,o=a.selectedCategories,c=a.setSelectedCategories,s=a.cities,u=a.setCities,d=a.selectedCities,m=a.setSelectedCities,p=a.countries,f=a.setCountries,g=a.selectedCountries,b=a.setSelectedCountries,E=a.filterOptions,h=a.setFilterOptions,v=a.setResetFilterOptions,y=a.dates,O=a.setDates;function C(e,t){var a=Object.assign({},y);a[t]=Ve()(e).format("YYYY-MM-DD"),O(a)}return r.a.createElement("div",{className:t.filterDiv},r.a.createElement("div",{className:t.sortingButtons},E.map((function(e){return r.a.createElement(Me.a,{control:r.a.createElement(Z.a,{checked:e.filter,onChange:function(){return function(e){var t=Object.assign([],E);t.map((function(t){t.filterName===e&&(t.filter=!t.filter)})),h(t)}(e.filterName)},name:e.filterName}),label:e.filterLabel})}))),r.a.createElement("div",{className:t.rightLayout},r.a.createElement(j.a,{variant:"h6"},"Filter by dates"),r.a.createElement(j.a,{variant:"subtitle1"},"Insertion dates between"),r.a.createElement(Fe.a,{container:!0,justify:"space-around"},r.a.createElement(Je.a,{utils:Ke.a},r.a.createElement(We.b,{disableToolbar:!0,variant:"inline",format:"MM-dd-yyyy",margin:"normal",id:"insertionStart",onChange:function(e){return C(e,"insertionStart")},value:y.insertionStart,label:"Date start",KeyboardButtonProps:{"aria-label":"change date"}}),r.a.createElement(We.b,{disableToolbar:!0,variant:"inline",format:"MM-dd-yyyy",margin:"normal",value:y.insertionEnd,onChange:function(e){return C(e,"insertionEnd")},id:"insertionEnd",label:"Date end",KeyboardButtonProps:{"aria-label":"change date"}}))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(j.a,{variant:"subtitle1"},"Modification dates between"),r.a.createElement(Fe.a,{container:!0,justify:"space-around"},r.a.createElement(We.b,{disableToolbar:!0,variant:"inline",format:"MM-dd-yyyy",margin:"normal",value:y.modificationStart,onChange:function(e){return C(e,"modificationStart")},id:"modificationStart",label:"Date start",KeyboardButtonProps:{"aria-label":"change date"}}),r.a.createElement(We.b,{disableToolbar:!0,variant:"inline",format:"MM-dd-yyyy",margin:"normal",value:y.modificationEnd,onChange:function(e){return C(e,"modificationEnd")},id:"modificationEnd",label:"Date end",KeyboardButtonProps:{"aria-label":"change date"}})),r.a.createElement("br",null),r.a.createElement(j.a,{variant:"h6"},"Filter by categories"),r.a.createElement(ze,{label:"Select categories",id:"categoryId",options:l,setOptions:i,selectedOptions:o,setSelectedOptions:c}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(j.a,{variant:"h6"},"Filter by countries"),r.a.createElement(ze,{label:"Select countries",options:p,setOptions:f,selectedOptions:g,setSelectedOptions:b}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(j.a,{variant:"h6"},"Filter by cities"),r.a.createElement(ze,{label:"Select cities",options:s,setOptions:u,selectedOptions:d,setSelectedOptions:m}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(Ce.a,{variant:"contained",color:"primary",onClick:function(){return function(){v(!0),m([]),b([]),c([]);var e=Object.assign(E,[]);e.map((function(e){e.filter=!1})),h(e),O({insertionStart:Ve()(new Date("2020-05-01T21:11:54")).format("YYYY-MM-DD"),insertionEnd:Ve()(new Date).format(),modificationStart:Ve()(new Date("2014-05-01T21:11:54")).format("YYYY-MM-DD"),modificationEnd:Ve()(new Date).format()})}()}},"Clear filters")))})),at=[{id:"name",numeric:!1,disablePadding:!1,label:"Place name",isId:!0},{id:"address",numeric:!1,disablePadding:!1,label:"Address",isId:!1},{id:"city",numeric:!1,disablePadding:!1,label:"City",isId:!1},{id:"country",numeric:!1,disablePadding:!1,label:"Country",isId:!1},{id:"dateModified",numeric:!1,disablePadding:!1,label:"Date modified",isId:!1},{id:"actions",numeric:!1,disablePadding:!1,label:"Actions",isId:!1}];var nt=Object(R.a)((function(e){var t;return{button:{margin:e.spacing(2)},input:{display:"none"},root:{height:"100vh",width:"100%",overflow:"auto"},buttonsDiv:{backgroundColor:"red",justifyContent:"flex-end"},content:(t={display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},Object(d.a)(t,e.breakpoints.down("lg"),{padding:e.spacing(1)}),Object(d.a)(t,e.breakpoints.up("lg"),{padding:e.spacing(8)}),t),autocomplete:{width:"200px",height:"40px",fontSize:"14px",border:"0",borderBottom:"2px solid grey",outline:"0",marginBottom:"4px"}}}))((function(e){var t=Object(n.useState)([]),a=Object(m.a)(t,2),l=a[0],i=a[1],o=Object(n.useState)([]),c=Object(m.a)(o,2),s=c[0],u=c[1],d=Object(n.useState)(!0),p=Object(m.a)(d,2),f=p[0],g=p[1],b=e.classes,E=Object(n.useContext)(Ze).filterQuery,h=Te().addAlertConfig,v=Ne().addConfig;function y(e){for(var t=0;t<l.length;t++)if(l[t].placeId===e)return l[t].name}function O(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";console.log(E+"&p="+e+"&s=10&keyword="+t),D(E+"&p="+e+"&s=10&keyword="+t)}function j(e){g(!1);var t=[];e.list.map((function(e){t.push(e)})),delete e.list,i(t),console.log(t),u(e)}Object(n.useEffect)((function(){g(!0),O()}),[E]);var C=r.a.useState(null),k=Object(m.a)(C,2),I=k[0],w=k[1],P=Boolean(I),T=P?"simple-popover":void 0,x=function(e){w(e.currentTarget)};return r.a.createElement("div",{className:b.root},r.a.createElement("div",{className:b.content},r.a.createElement(ue,{title:"Places",headCells:at,data:l,pagingInfo:s,checkable:!1,changePageCallback:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";g(!0),O(e,t)},updateCallback:function(e){Ee.push("/app/addplace/"+e)},removeCallback:function(e){console.log("Name",y(e)),g(!0),h(xe.DIALOG_PLACE_DELETE_TITLE+" - "+y(e),xe.DIALOG_PLACE_DELETE_MESSAGE,[{name:"Remove",action:function(){je.Places.removePlace("?p="+e).then((function(t){var a=[];l.map((function(t){t.placeId!==e&&a.push(t)})),i(a),v(!0,xe.SNACKBAR_PLACE_REMOVE_SUCCESS),g(!1)})).catch((function(e){g(!1),v(!1,xe.SNACKBAR_ERROR)}))}}],(function(){g(!1)}))},id:"placeId",isLoading:f,customToolbarElements:r.a.createElement("div",null,r.a.createElement(X.a,{"aria-describedby":T,title:"Filter list"},r.a.createElement(S.a,{"aria-label":"filter list",onClick:x},r.a.createElement(Re.a,null))),r.a.createElement(_e.a,{id:T,open:P,anchorEl:I,onClose:function(){w(null)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},r.a.createElement(tt,null)))}),r.a.createElement(Ie.a,{display:"flex",justifyContent:"flex-end"},r.a.createElement(Ce.a,{onClick:function(){Ee.push("/app/addplace")},variant:"text",color:"secondary",size:"large",className:b.button,startIcon:r.a.createElement(ke.a,null)},"Add"))),r.a.createElement(Ce.a,null,"Clear filters"));function D(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";je.Places.getAllPlacesAdmin(e).then((function(e){g(!1),j(e)})).catch((function(e){g(!1),console.log(e)}))}})),rt=a(1010),lt=[{value:0,label:"FREE"},{value:25,label:"$"},{value:50,label:"$$"},{value:75,label:"$$$"},{value:100,label:"$$$$"},{value:125,label:"$$$$$"}],it=[{value:5,label:5},{value:10,label:10},{value:15,label:15},{value:30,label:30},{value:45,label:45},{value:60,label:60},{value:90,label:90},{value:120,label:120},{value:150,label:150},{value:180,label:180},{value:210,label:210},{value:240,label:240},{value:270,label:270}],ot=a(966),ct=a(1007),st=a(997),ut=a(922),dt=a(925),mt=a(978),pt=a(924);var ft=Object(R.a)((function(e){return{root:{margin:0,padding:e.spacing(2)},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}}))((function(e){e.classes;var t=e.open,a=e.action,l=e.setDialogOpen,i=Object(n.useState)(""),o=Object(m.a)(i,2),c=o[0],s=o[1],u=Object(n.useState)(""),d=Object(m.a)(u,2),p=d[0],f=d[1],g=Object(n.useState)(!1),b=Object(m.a)(g,2),E=b[0],h=b[1];return r.a.createElement("div",null,r.a.createElement(ut.a,{"aria-labelledby":"customized-dialog-title",open:t,fullWidth:!0},r.a.createElement(mt.a,{id:"customized-dialog-title"},"Insert source"),r.a.createElement(pt.a,{dividers:!0},r.a.createElement(ne.a,{error:E,onChange:function(e){s(e.target.value)},label:"Source name",variant:"outlined",fullWidth:!0}),r.a.createElement(ne.a,{style:{marginTop:"16px"},error:E,onChange:function(e){f(e.target.value)},label:"Source url",variant:"outlined",fullWidth:!0})),r.a.createElement(dt.a,null,r.a.createElement(Ce.a,{onClick:function(){return l(!1)},color:"primary"},"Cancel"),r.a.createElement(Ce.a,{autoFocus:!0,color:"primary",onClick:function(){!function(){var e=!1;return(c.length<=3||p.length<=3)&&(e=!0),h(e),e}()&&a(c,p),l(!1)}},"Add"))))}));var gt=Object(R.a)((function(e){return{}}))((function(e){var t=e.classes,a=e.placeInfo,l=e.setPlaceInfo,i=e.selectedSources,o=e.setSelectedSources,c=function(e,t){var n=e.target,r=n.name,i=n.value,o=n.id,c=Object.assign({},a,{});""!==o?c[o]=h(t[0]):c[r]=i,console.log("Updated place",c),l(c)};Object(n.useEffect)((function(){je.Source.getSources().then((function(e){E(e)})).catch((function(e){}))}),[]);var s=Object(n.useState)(!1),u=Object(m.a)(s,2),d=u[0],p=u[1],f=Object(n.useState)([]),g=Object(m.a)(f,2),b=g[0],E=g[1];function h(e){var t="";return lt.map((function(a){a.value===e&&(t=a.label)})),t}return r.a.createElement("div",null,r.a.createElement(j.a,{variant:"h6"},"Basic place information"),r.a.createElement("br",null),r.a.createElement(ne.a,{required:!0,label:"Place name",style:{margin:8},placeholder:"Enter the place name",fullWidth:!0,value:a.name,name:"name",onChange:function(e){return c(e)},variant:"outlined",margin:"normal",InputLabelProps:{shrink:!0}}),r.a.createElement(ne.a,{label:"Place description",style:{margin:8},placeholder:"Describe the place thoroughly",fullWidth:!0,multiline:!0,name:"description",value:a.description,onChange:function(e){return c(e)},variant:"outlined",rows:4,margin:"normal",InputLabelProps:{shrink:!0}}),r.a.createElement(ne.a,{label:"Phone number",style:{margin:8},placeholder:"Enter phone number",fullWidth:!0,name:"phoneNumber",value:a.phoneNumber,onChange:function(e){return c(e)},variant:"outlined",margin:"normal",InputLabelProps:{shrink:!0}}),r.a.createElement(ne.a,{label:"Website",style:{margin:8},placeholder:"Enter website",fullWidth:!0,name:"website",value:a.website,onChange:function(e){return c(e)},variant:"outlined",margin:"normal",InputLabelProps:{shrink:!0}}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(ze,{id:"source",label:"Select sources",options:b,setOptions:E,setSelectedOptions:o,selectedOptions:i}),r.a.createElement(Ce.a,{variant:"text",color:"primary",size:"small",className:t.button,onClick:function(){return p(!0)},startIcon:r.a.createElement(ke.a,null)},"Add missing source"),r.a.createElement(ft,{action:function(e,t){je.Source.addSource({name:e,url:t}).then((function(e){E([].concat(Object(Be.a)(b),[e])),o([].concat(Object(Be.a)(i),[e]))})).catch((function(e){console.log(e)}))},open:d,setDialogOpen:p}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(j.a,null,"Price"),r.a.createElement(rt.a,{id:"price",onChange:c,value:lt.map((function(e){if(e.label===a.price)return e.value})),style:{width:"60%",marginLeft:"48px"},defaultValue:0,getAriaValueText:h,"aria-labelledby":"discrete-slider-always",step:25,max:125,marks:lt})),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(j.a,null,"Average time spent"),r.a.createElement(ot.a,{variant:"outlined",style:{width:"60%",marginLeft:"48px"}},r.a.createElement(ct.a,null,"Minutes"),r.a.createElement(st.a,{native:!0,value:parseInt(a.averageTimeSpent,10),onChange:c,label:"Average Time spent",inputProps:{name:"averageTimeSpent"}},r.a.createElement("option",{value:"-1"},"None"),it.map((function(e){return r.a.createElement("option",{value:parseInt(e.value,10)}," ",e.value)}))))))})),bt=a(47),Et=a(432),ht=a(980),vt=a(979),yt=a(981),Ot=function(e){e.index;var t=e.onItemDelete,a=e.photo,n=e.margin,l=e.direction,i=e.top,o=e.left,c={imgContainer:{margin:n,display:"inline",position:"relative",width:"300px",height:"300px"}};"column"===l&&(c.imgContainer.position="absolute",c.imgContainer.imgStyle.left=o,c.imgContainer.imgStyle.top=i);return r.a.createElement(vt.a,{style:c.imgContainer},r.a.createElement(ht.a,{style:{height:0,paddingTop:"80%"},image:a.src}),r.a.createElement(yt.a,{disableSpacing:!0},r.a.createElement(Ce.a,{variant:"contained",color:"secondary",startIcon:r.a.createElement(ee.a,null),onClick:function(e){t(a)}},"Delete")))},jt=Object(bt.b)((function(e){return r.a.createElement(Ot,e)})),Ct=Object(bt.a)((function(e){var t=e.items,a=e.onItemDelete;return r.a.createElement(Et.a,{photos:t,renderImage:function(e){return r.a.createElement(jt,Object.assign({},e,{onItemDelete:a}))}})}));var St=function(e){var t=e.setPhotos,a=e.photos,n=e.srcName,l=e.keyName,i=a.map((function(e){return{key:e[l].toString(),src:e[n],width:1,height:1}}));return r.a.createElement("div",null,r.a.createElement(Ct,{pressDelay:200,disableAutoscroll:!1,items:i,onSortEnd:function(e){var n=e.oldIndex,r=e.newIndex;t(Object(bt.c)(a,n,r))},axis:"xy",onItemDelete:function(e){t(a.filter((function(t){return t[l].toString()!==e.key})))}}))},kt=a(462),It=["image/jpeg","image/png","image/bmp","image/jpg"];var wt=Object(R.a)((function(e){return{dropzoneArea:{overflow:"hidden"}}}))((function(e){var t=e.onCloseCallback,a=e.open,l=e.onFinishCallback,i=e.classes,o=Object(n.useState)(!1),c=Object(m.a)(o,2),s=c[0],u=c[1],d=Object(n.useState)([]),p=Object(m.a)(d,2),f=p[0],g=p[1];return r.a.createElement("div",null,r.a.createElement(ut.a,{"aria-labelledby":"customized-dialog-title",open:a,fullWidth:!0},r.a.createElement(mt.a,{id:"customized-dialog-title"},"Photo upload"),s&&r.a.createElement(re.a,{variant:"query"}),r.a.createElement(pt.a,{dividers:!0},r.a.createElement(kt.a,{className:i.dropzoneArea,acceptedFiles:It,maxFileSize:25e6,dropzoneProps:{disabled:s},filesLimit:5,onDrop:g})),r.a.createElement(dt.a,null,r.a.createElement(Ce.a,{onClick:t,color:"primary"},"Cancel"),r.a.createElement(Ce.a,{onClick:function(){u(!0),Promise.all(f.map((function(e){var t=new FormData;return t.append("image",e),je.Photos.uploadPhoto(t)}))).then((function(e){console.log(e),l(e)})).catch((function(e){l()})).finally((function(){u(!1)}))},color:"primary"},"Submit"))))}));var Pt=Ge()((function(e){return{outline:{margin:e.spacing(1),padding:e.spacing(1),width:"100%"},button:{margin:e.spacing(2)}}}))((function(e){var t=e.classes,a=e.setPhotos,l=e.photos,i=Object(n.useState)(!1),o=Object(m.a)(i,2),c=o[0],s=o[1];return r.a.createElement("div",null,r.a.createElement(j.a,{variant:"h6"},"Photos"),r.a.createElement(vt.a,{variant:"outlined",className:t.outline},l.length>0&&r.a.createElement(St,{keyName:"photoId",srcName:"url",setPhotos:a,photos:l}),r.a.createElement(Ce.a,{variant:"text",color:"primary",size:"small",style:{width:"15%"},className:t.button,onClick:function(){return s(!0)},startIcon:r.a.createElement(ke.a,null)},"Add photo"),r.a.createElement(wt,{open:c,onFinishCallback:function(e){return function(e){s(!1),null!=e&&a([].concat(Object(Be.a)(l),Object(Be.a)(e)))}(e)},onCloseCallback:function(){return s(!1)}})))})),Tt=a(57),xt=a(169),Dt=a.n(xt);Dt.a.setApiKey("AIzaSyDGFjZHSoRrZ2AEO0ONXvjuN4RiCmknXf8"),Dt.a.enableDebug();var At=function(e){if(void 0!==e)for(var t=0;t<e.length;t++)if(e[t].types[0]&&"country"===e[t].types[0])return e[t].long_name},Nt=function(e){if(void 0!==e){console.log("Address array",e);for(var t="",a=0;a<e.length;a++)if(e[a].types[0]&&"locality"===e[a].types[0])return t=e[a].long_name;return t}},Lt=function(e){if(void 0!==e){for(var t="",a=0;a<e.length;a++)if(e[a].types[0]&&"administrative_area_level_1"===e[a].types[0])return t=e[a].long_name;return t}},Rt=function(e){if(void 0!==e){for(var t="",a=0;a<e.length;a++)if(e[a].types[0]&&"administrative_area_level_2"===e[a].types[0])return t=e[a].long_name;return t}};function _t(e,t){return Dt.a.fromLatLng(e,t).then((function(a){var n=a.results[0].formatted_address,r=a.results[0].address_components;if(void 0!==r){var l=Nt(r),i=At(r),o=Lt(r),c=Rt(r);return{address:n,city:l,country:i,latitude:e,longitude:t,county:o,municipality:c}}return null}),(function(e){console.error(e)}))}var Mt=a(444),Ft=a.n(Mt),Wt=a(445),Bt=a.n(Wt);a(394);var qt=Ge()((function(e){return{content:{margin:e.spacing(1)},autocomplete:{width:"200px",height:"40px",fontSize:"14px",border:"0",borderBottom:"2px solid grey",outline:"0",marginBottom:"4px"},root:{display:"flex",flexDirection:"column",marginTop:"8px",padding:e.spacing(1)}}}))((function(e){var t=e.classes,a=e.isLocked,l=e.locationCallback,i=Object(n.useState)(!1),o=Object(m.a)(i,2),c=o[0],s=o[1];function u(e){var t,a=e.target.value;if(13===e.which||13===e.keyCode){if(s(!0),/[a-zA-Z]+/.test(a))(t=a,Dt.a.fromAddress(t).then((function(e){var t=e.results[0].geometry.location,a=t.lat,n=t.lng,r=e.results[0].formatted_address,l=e.results[0].address_components;return void 0!==l?{address:r,city:Nt(l),country:At(l),latitude:a,longitude:n,county:Lt(l),municipality:Rt(l)}:null}),(function(e){console.log(e)}))).then((function(e){l(e),s(!1)}));else{var n=a.split(/[ ,]+/);2===n.length&&_t(parseFloat(n[0]),parseFloat(n[1])).then((function(e){l(e),s(!1)}))}return!1}return!0}return r.a.createElement("div",{className:t.root},r.a.createElement("div",{className:t.content},r.a.createElement(Ft.a,{onKeyPress:function(e){a||u(e)},onPlaceSelected:function(e){a||function(e){s(!0);var t=e.formatted_address,a=e.address_components;if(void 0!==a){var n=Nt(a),r=At(a),i=Lt(a),o=Rt(a),c=e.geometry.location.lat(),u=e.geometry.location.lng();s(!1),l({address:t,city:n,country:r,latitude:c,longitude:u,county:i,municipality:o})}}(e)},className:t.autocomplete,types:["(regions)"]}),r.a.createElement(S.a,{"aria-label":"delete",className:t.margin,size:"small"},r.a.createElement(Bt.a,{onClick:function(){a||(s(!0),navigator.geolocation.getCurrentPosition((function(e){_t(e.coords.latitude,e.coords.longitude).then((function(e){s(!1),l(e)}))}),(function(e){s(!1),alert(e.message+"\n"+JSON.stringify(e))})))},fontSize:"large",color:"primary"}))),c?r.a.createElement(re.a,null):null)})),Ut=a(983),zt=a(993);var Ht=Ge()((function(e){return{root:{display:"flex",flexDirection:"column",marginTop:"8px",padding:e.spacing(1)}}}))((function(e){var t=e.classes,a=e.isLocked,n=e.setIsLocked;return r.a.createElement("div",{className:t.root},r.a.createElement(Me.a,{control:r.a.createElement(Ut.a,null),label:"Lock",checked:a,onChange:function(){n((function(e){return!e}))}}),a?r.a.createElement(zt.a,{severity:"error"},"Map is currently locked. If you want to do any changes unlock it."):null)})),Gt=a(42),Yt=a(6),Vt=a.n(Yt);function Kt(e,t){var a=e.position,i=void 0===a?window.google.maps.ControlPosition.TOP_LEFT:a,o=e.children,c=t[Gt.MAP],s=document.createElement("div");return Object(n.useEffect)((function(){var e=c.controls[i],t=e.length;return e.push(s),function(){e.removeAt(t)}})),Object(l.createPortal)(r.a.createElement("div",{style:{marginBottom:8}},o),s)}Kt.contextTypes=Object(d.a)({},Gt.MAP,Vt.a.object);var $t=a(235),Jt=a.n($t),Zt=Object(Tt.withGoogleMap)((function(e){return r.a.createElement(Tt.GoogleMap,{defaultZoom:12,ref:e.refInstance,center:{lat:e.position.latitude,lng:e.position.longitude},defaultCenter:{lat:e.position.latitude,lng:e.position.longitude}},r.a.createElement(Tt.Marker,{name:"Dolores park",visible:!0,draggable:!e.isLocked,onDragEnd:function(t){return function(e,t){var a=e.latLng.lat(),n=e.latLng.lng();_t(a,n).then((function(e){t(e)}))}(t,e.setPosition)},position:{lat:e.position.latitude,lng:e.position.longitude}}),r.a.createElement(Kt,{position:window.google.maps.ControlPosition.BOTTOM_CENTER},r.a.createElement("div",null,r.a.createElement(S.a,{"aria-label":"delete",onClick:function(){if(!e.isLocked){var t=e.refInstance.current.getCenter();_t(t.lat(),t.lng()).then((function(t){e.setPosition(t)}))}}},r.a.createElement(Jt.a,{fontSize:"large"})))))}));var Xt=Ge()((function(e){return{}}))((function(e){var t=e.placeInfo,a=e.locationMarker,l=e.setLocationMarker,i=Object(n.useState)(""!==t.placeId),o=Object(m.a)(i,2),c=o[0],s=o[1],u=Object(n.useRef)(null);return r.a.createElement(r.a.Fragment,null,r.a.createElement(qt,{isLocked:c,locationCallback:function(e){l(e)}}),r.a.createElement(Zt,{loadingElement:r.a.createElement("div",{style:{height:"100%"}}),containerElement:r.a.createElement("div",{style:{height:"400px"}}),mapElement:r.a.createElement("div",{style:{height:"100%"}}),refInstance:u,isLocked:c,position:a,setPosition:l}),r.a.createElement(Ht,{isLocked:c,setIsLocked:s}))}));var Qt=Ge()((function(e){return{outline:{margin:e.spacing(1),padding:e.spacing(1),width:"100%"},button:{margin:e.spacing(2)}}}))((function(e){var t=e.locationData,a=e.setLocationData,n=e.placeInfo;function l(e){var n=e.target,r=n.name,l=n.value,i=Object.assign({},t,{});i[r]=l,a(i)}return r.a.createElement("div",null,r.a.createElement(j.a,{variant:"h6"},"Place location"),r.a.createElement("br",null),r.a.createElement(j.a,{variant:"subtitle1"},"Select place location from map"),r.a.createElement("br",null),r.a.createElement(Xt,{placeInfo:n,locationMarker:t,setLocationMarker:a}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(j.a,{variant:"subtitle1"},"Place location"),r.a.createElement("br",null),r.a.createElement(ne.a,{required:!0,label:"Address",style:{margin:8},placeholder:"Enter place address",fullWidth:!0,disabled:!0,value:t.address,name:"address",onChange:function(e){l(e)},variant:"outlined",margin:"normal",InputLabelProps:{shrink:!0}}),r.a.createElement(ne.a,{required:!0,label:"City",disabled:!0,style:{margin:8},placeholder:"Enter place city",fullWidth:!0,value:t.city,name:"city",onChange:function(e){l(e)},variant:"outlined",margin:"normal",InputLabelProps:{shrink:!0}}),r.a.createElement(ne.a,{required:!0,label:"County",disabled:!0,style:{margin:8},placeholder:"Enter place county",fullWidth:!0,value:t.county,name:"county",onChange:function(e){l(e)},variant:"outlined",margin:"normal",InputLabelProps:{shrink:!0}}),r.a.createElement(ne.a,{required:!0,label:"Municipality",disabled:!0,style:{margin:8},placeholder:"Enter place municipality",fullWidth:!0,value:t.municipality,name:"municipality",onChange:function(e){l(e)},variant:"outlined",margin:"normal",InputLabelProps:{shrink:!0}}),r.a.createElement(ne.a,{required:!0,label:"Country",style:{margin:8},placeholder:"Enter place country",fullWidth:!0,disabled:!0,value:t.country,name:"country",onChange:function(e){l(e)},variant:"outlined",rows:4,margin:"normal",InputLabelProps:{shrink:!0}}))})),ea=Object(Tt.withGoogleMap)((function(e){return r.a.createElement(Tt.GoogleMap,{ref:e.refInstance,defaultZoom:12,center:{lat:e.position.latitude,lng:e.position.longitude},defaultCenter:{lat:e.position.latitude,lng:e.position.longitude}},r.a.createElement(Tt.Marker,{onClick:function(){e.isLocked||e.setMainInfoWindow(!0)},name:"Dolores park",visible:!0,draggable:!e.isLocked,onDragEnd:function(t){return function(e,t){var a=e.latLng.lat(),n=e.latLng.lng();_t(a,n).then((function(e){t(e)}))}(t,e.setPosition)},position:{lat:e.position.latitude,lng:e.position.longitude}},e.mainInfoWindow&&r.a.createElement(Tt.InfoWindow,{onCloseClick:function(){e.setMainInfoWindow(!1)}},r.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},e.position.address,r.a.createElement(Ce.a,{onClick:function(){var t=function(e,t){for(var a=0,n=0;n<t.length;n++){aa(e.latitude,e.longitude,t[n].latitude,t[n].longitude)<=.15&&a++}return a}(e.position,e.parkingData);t>0&&e.addAlertConfig("Parkings nearby already exist!",t+" parking(-s) within 150 meter already exist(-s). Are you sure you don't want to use already existings parking locations?",[{name:"ADD NEW PARKING!",action:function(){e.addNewParking(e.position)}}])},variant:"text",color:"secondary",size:"large",startIcon:r.a.createElement(ke.a,null)},"Add new parking")))),r.a.createElement(Kt,{position:window.google.maps.ControlPosition.BOTTOM_CENTER},r.a.createElement("div",null,r.a.createElement(S.a,{"aria-label":"delete",onClick:function(){if(!e.isLocked){var t=Object.assign({},e.position,{}),a=e.refInstance.current.getCenter();t.latitude=a.lat(),t.longitude=a.lng(),e.setPosition(t)}}},r.a.createElement(Jt.a,{fontSize:"large"})))),e.parkingData.map((function(t,n){var l=parseFloat(t.latitude),i=parseFloat(t.longitude);return console.log(ta(t,e.selectedParkingData)),r.a.createElement(Tt.Marker,{key:t.parkingId,position:{lat:l,lng:i},icon:{url:ta(t,e.selectedParkingData)?a(762):a(763),scaledSize:new window.google.maps.Size(20,48),origin:new window.google.maps.Point(0,0),anchor:new window.google.maps.Point(10,35)},onClick:function(){if(!e.isLocked){var t=Object.assign({},e.parkingInfoWindows,{});t[n]=!0,e.setParkingInfoWindows(t)}}},e.parkingInfoWindows[n]&&r.a.createElement(Tt.InfoWindow,{onCloseClick:function(){var t=Object.assign({},e.parkingInfoWindows,{});t[n]=!1,e.setParkingInfoWindows(t)}},r.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},r.a.createElement(j.a,{variant:"h6"},t.address),ta(t,e.selectedParkingData)?r.a.createElement("div",null,r.a.createElement(zt.a,{severity:"success"},'This parking location is already attached! See below in "Selected parking locations" section.')):r.a.createElement(Ce.a,{onClick:function(){e.addExistingParking(t)},variant:"text",color:"secondary",size:"large",startIcon:r.a.createElement(ke.a,null)},"Add parking"))))})))}));function ta(e,t){for(var a=0;a<t.length;a++)if(t[a].address===e.address)return!0;return!1}function aa(e,t,a,n){var r=na(a-e),l=na(n-t),i=(e=na(e),a=na(a),Math.sin(r/2)*Math.sin(r/2)+Math.sin(l/2)*Math.sin(l/2)*Math.cos(e)*Math.cos(a));return 6371*(2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i)))}function na(e){return e*Math.PI/180}var ra=function(e){e.placeInfo;var t=e.locationMarker,a=e.setLocationMarker,l=e.addNewParking,i=e.addExistingParking,o=e.selectedParkingData,c=Object(n.useState)([]),s=Object(m.a)(c,2),u=s[0],d=s[1],p=Object(n.useState)(!1),f=Object(m.a)(p,2),g=f[0],b=f[1],E=Object(n.useState)(!1),h=Object(m.a)(E,2),v=h[0],y=h[1],O=Object(n.useState)(!1),j=Object(m.a)(O,2),C=j[0],S=(j[1],Object(n.useRef)(null)),k=Te().addAlertConfig;return Object(n.useEffect)((function(){console.log("Downloading new markers"),je.Parking.getParkingByLocation("?lat="+t.latitude+"&lng="+t.longitude).then((function(e){d(e)})).catch((function(e){}))}),[t]),r.a.createElement(r.a.Fragment,null,r.a.createElement(qt,{isLocked:C,locationCallback:function(e){b(!0),a(e)}}),r.a.createElement(ea,{loadingElement:r.a.createElement("div",{style:{height:"100%"}}),containerElement:r.a.createElement("div",{style:{height:"400px"}}),mapElement:r.a.createElement("div",{style:{height:"100%"}}),mainInfoWindow:g,setMainInfoWindow:b,addNewParking:l,addExistingParking:i,parkingInfoWindows:v,setParkingInfoWindows:y,parkingData:u,position:t,setPosition:a,isLocked:C,refInstance:S,selectedParkingData:o,addAlertConfig:k}))};var la=Ge()((function(e){return{outline:{margin:e.spacing(1),padding:e.spacing(1),width:"100%"},button:{margin:e.spacing(2)},paper:{padding:e.spacing(2),display:"flex",alignItems:"center",justifyContent:"space-between",marginTop:"8px"}}}))((function(e){var t=e.classes,a=e.locationData,n=e.setLocationData,l=e.allSelectedParkingData,i=e.setAllSelectedParkingData,o=e.placeInfo,c=Ne().addConfig;function s(e){for(var t=0;t<l.length;t++)if(l[t].address===e.address)return c(!1,"This parking is already attached!"),!0;return!1}var u=Object(bt.b)((function(e){var a=e.value;return r.a.createElement(J.a,{className:t.paper,elevation:3},r.a.createElement(j.a,null,a.address),r.a.createElement(S.a,{"aria-label":"delete",className:t.margin,onClick:function(){return i(l.filter((function(e){return e.parkingId!==a.parkingId})))}},r.a.createElement(ee.a,{fontSize:"small"})))})),d=Object(bt.a)((function(e){var t=e.items;return r.a.createElement("ul",null,t.map((function(e,t){return r.a.createElement(u,{key:t,index:t,value:e})})))}));return r.a.createElement("div",null,r.a.createElement(j.a,{variant:"h6"},"Add parking"),r.a.createElement("br",null),r.a.createElement(j.a,{variant:"subtitle1"},"Select parking"),r.a.createElement(ra,{selectedParkingData:l,placeInfo:o,locationMarker:a,setLocationMarker:n,addNewParking:function(e){s(e)||je.Parking.insertNewParking([e]).then((function(e){i((function(t){return[].concat(Object(Be.a)(t),[e[0]])})),c(!0)})).catch((function(e){c(!1)}))},addExistingParking:function(e){s(e)||i((function(t){return[].concat(Object(Be.a)(t),[e])}))}}),r.a.createElement("br",null),r.a.createElement(j.a,{variant:"subtitle1"},"Selected parking locations"),0===l.length?r.a.createElement(zt.a,{severity:"error"},"This place has no selected parking! To select parking for this place do the following:",r.a.createElement("br",null),"1. Select your current location or any other location",r.a.createElement("br",null),"2. Select already existing nearby parking locations and click add",r.a.createElement("br",null),"3. If none of the location is valid, click on the orange marker and add new parking"):r.a.createElement(d,{pressDelay:200,disableAutoscroll:!1,items:l,onSortEnd:function(e){var t=e.oldIndex,a=e.newIndex;i(Object(bt.c)(l,t,a))}}))}));Object(R.a)((function(e){return{root:{margin:0,padding:e.spacing(2)},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}}))((function(e){e.classes;var t=e.open,a=e.onCloseCallback,l=e.header,i=(e.description,e.textFieldLabel),o=e.action,c=Object(n.useState)(""),s=Object(m.a)(c,2),u=s[0],d=s[1],p=Object(n.useState)(!1),f=Object(m.a)(p,2),g=f[0],b=f[1];return r.a.createElement("div",null,r.a.createElement(ut.a,{"aria-labelledby":"customized-dialog-title",open:t,fullWidth:!0},r.a.createElement(mt.a,{id:"customized-dialog-title"},l),r.a.createElement(pt.a,{dividers:!0},r.a.createElement(ne.a,{error:g,onChange:function(e){d(e.target.value)},label:i,variant:"outlined",fullWidth:!0})),r.a.createElement(dt.a,null,r.a.createElement(Ce.a,{onClick:a,color:"primary"},"Cancel"),r.a.createElement(Ce.a,{autoFocus:!0,color:"primary",onClick:function(){!function(){var e=!1;return u.length<=3&&(e=!0),b(e),e}()&&o(u)}},"Add"))))}));var ia=r.a.createContext({dialogConfig:null,dialogOpen:null,setDialogOpen:null,addEditDialogConfig:function(){},removeEditDialogConfig:function(){}}),oa={title:"Sample title",errorMessages:{},explanation:"Sample explanation",onCloseCallback:function(){},onDoneCallback:function(e){},textFieldLabel:"Type here",validateInput:function(e){return 0},defaultText:""};function ca(e){var t=e.children,a=Object(n.useState)(oa),l=Object(m.a)(a,2),i=l[0],o=l[1],c=Object(n.useState)(!1),s=Object(m.a)(c,2),u=s[0],d=s[1],f={dialogConfig:i,dialogOpen:u,setDialogOpen:d,addEditDialogConfig:function(e){o(Object(p.a)(Object(p.a)({},oa),e)),d(!0)},removeEditDialogConfig:function(){return o(null)}};return r.a.createElement(ia.Provider,{value:f},t)}function sa(){var e=Object(n.useContext)(ia);return{dialogConfig:e.dialogConfig,addEditDialogConfig:e.addEditDialogConfig,removeEditDialogConfig:e.removeEditDialogConfig,dialogOpen:e.dialogOpen,setDialogOpen:e.setDialogOpen}}var ua=Ge()((function(e){return{outline:{margin:e.spacing(1),padding:e.spacing(1),width:"100%"},button:{margin:e.spacing(2)},paper:{padding:e.spacing(2),display:"flex",alignItems:"center",justifyContent:"space-between",marginTop:"8px"}}}))((function(e){var t=e.classes,a=e.selectedTags,l=e.setSelectedTags,i=e.selectedCategories,o=e.setSelectedCategories,c=Object(n.useState)([]),s=Object(m.a)(c,2),u=s[0],d=s[1],p=Object(n.useState)([]),f=Object(m.a)(p,2),g=f[0],b=f[1],E=sa().addEditDialogConfig,h=Ne().addConfig;return Object(n.useEffect)((function(){je.Tags.getAllTags().then((function(e){b(e),console.log(e)})).catch((function(e){console.log(e)})),je.Categories.getAllCategories().then((function(e){d(e),console.log(e)})).catch((function(e){console.log(e)}))}),[]),r.a.createElement("div",null,r.a.createElement(j.a,{variant:"h6"},"Place discovery settings"),r.a.createElement("br",null),r.a.createElement(j.a,{variant:"subtitle1"},"Select tags"),r.a.createElement(ze,{label:"Select tags",id:"tagId",options:g,setOptions:b,selectedOptions:a,setSelectedOptions:l}),r.a.createElement(Ce.a,{variant:"text",color:"primary",size:"small",className:t.button,onClick:function(){E({title:"Add tag",explanation:"Type the tag name",onDoneCallback:function(e){je.Tags.addTag([{name:e}]).then((function(t){var n={tagId:t[0],name:e};b([].concat(Object(Be.a)(g),[n])),l([].concat(Object(Be.a)(a),[n]))})).catch((function(){h(!1,"Failed to add tag.")}))},errorMessages:{1:"The tag name is too short",2:"A tag with identical name already exists. You should choose the existing tag instead"},validateInput:function(e){return e.length<4?1:0!==g.filter((function(t){return t.name===e})).length?2:0},textFieldLabel:"Warm, quick, cozy..."})},startIcon:r.a.createElement(ke.a,null)},"Add missing tag"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(j.a,{variant:"subtitle1"},"Select categories"),r.a.createElement(ze,{label:"Select categories",id:"categoryId",options:u,setOptions:d,selectedOptions:i,setSelectedOptions:o}),r.a.createElement(Ce.a,{variant:"text",color:"primary",size:"small",className:t.button,onClick:function(){E({title:"Add category",explanation:"Type the category name",onDoneCallback:function(e){je.Categories.addCategory([{name:e}]).then((function(t){var a={categoryId:t[0],name:e};d([].concat(Object(Be.a)(u),[a])),o([].concat(Object(Be.a)(i),[a]))})).catch((function(e){h(!1,"Failed to add category.")}))},errorMessages:{1:"The category name is too short",2:"A category with identical name already exists. You should choose the existing category instead"},validateInput:function(e){return e.length<4?1:0!==u.filter((function(t){return t.name===e})).length?2:0},textFieldLabel:"Restaurant, hotel, hiking..."})},startIcon:r.a.createElement(ke.a,null)},"Add missing category"))})),da=[{scheduleDefault:!0,periods:[{openDay:0,closeDay:0,openTime:"08:00",closeTime:"17:00"},{openDay:1,closeDay:1,openTime:"08:00",closeTime:"17:00"},{openDay:2,closeDay:2,openTime:"08:00",closeTime:"17:00"},{openDay:3,closeDay:3,openTime:"08:00",closeTime:"17:00"},{openDay:4,closeDay:4,openTime:"08:00",closeTime:"17:00"}]}],ma=a(977),pa=a(127),fa=a.n(pa),ga=a(1011),ba=a(984),Ea=a(1002),ha=Object(g.a)({root:{minWidth:275,width:"20%",padding:"2px",marginRight:"16px"}});function va(e){var t=e.review,a=ha();return r.a.createElement(vt.a,{className:a.root,variant:"outlined"},r.a.createElement(ba.a,null,r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(Ea.a,{alt:"Cindy Baker",src:t.photoUrl?t.photoUrl:"/broken-image.jpg"}),r.a.createElement("div",{style:{display:"flex",flexDirection:"column",marginLeft:"8px"}},r.a.createElement(j.a,{title:"subtitle1"},t.name," ",t.surname),r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},r.a.createElement(ga.a,{size:"small",name:"read-only",value:t.rating,readOnly:!0}),r.a.createElement(j.a,{title:"subtitle1"},"+"+t.upvotes)))),r.a.createElement(j.a,{title:"subtitle1"},Ve()(t.timeAdded).format("LL")),r.a.createElement("div",{style:{marginTop:"16px"}},t.title),r.a.createElement(j.a,{title:"subtitle1"},t.review)))}var ya=a(297),Oa=a.n(ya),ja=a(1012),Ca=a(995);var Sa=Ge()((function(e){return{reviewsInfo:{display:"flex"},reviews:{display:"flex",width:"100%",margin:e.spacing(2),overflowX:"scroll"},sortingButtons:{padding:e.spacing(2)}}}))((function(e){var t=e.classes,a=e.placeInfo,l=Object(n.useState)([]),i=Object(m.a)(l,2),o=i[0],c=i[1],s=Object(n.useState)(!0),u=Object(m.a)(s,2),d=u[0],p=u[1],f=Object(n.useState)(1),g=Object(m.a)(f,2),b=(g[0],g[1]),E=r.a.useState(null),h=Object(m.a)(E,2),v=h[0],y=h[1],O=Boolean(v),C=O?"simple-popover":void 0,k=Object(n.useState)("mostRated"),I=Object(m.a)(k,2),w=I[0],P=I[1];function T(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"?p="+a.placeId;je.Reviews.getPlaceReviews(e).then((function(e){c((function(t){return[].concat(Object(Be.a)(t),Object(Be.a)(e.list))})),p(!1)})).catch((function(e){p(!1)}))}Object(n.useEffect)((function(){T("?p="+a.placeId+"&page=1&o="+w)}),[w]);var x=Oa()((function(e){return function(e){Math.round(e.target.scrollWidth-e.target.scrollLeft-0)<=e.target.clientWidth&&!d&&o.length>0&&o.length<a.totalReviews&&(p(!0),b((function(e){return T("?p="+a.placeId+"&page="+(e+1)+"&o="+w),e+1})))}(e)}),200),D=function(){y(null)};return r.a.createElement("div",null,r.a.createElement(j.a,{variant:"h6"},"Reviews",r.a.createElement("br",null),o.length>0?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},r.a.createElement("div",{className:t.reviewsInfo},r.a.createElement(ga.a,{name:"read-only",value:a.overallStarRating,precision:.2,readOnly:!0}),r.a.createElement(j.a,{style:{marginLeft:"8px"},variant:"subtitle1"},a.totalReviews," reviews")),r.a.createElement(X.a,{"aria-describedby":C,title:"Filter list"},r.a.createElement(S.a,{"aria-label":"filter list",onClick:function(e){y(e.currentTarget)}},r.a.createElement(Re.a,null))),r.a.createElement(_e.a,{id:C,open:O,anchorEl:v,onClose:D,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},r.a.createElement(ja.a,{className:t.sortingButtons,"aria-label":"gender",value:w,name:"gender1",onChange:function(e){var t=e.target,a=(t.name,t.value);P(a),c([]),b(1),D()}},r.a.createElement(Me.a,{value:"mostRated",control:r.a.createElement(Ca.a,null),label:"Most rated"}),r.a.createElement(Me.a,{value:"newest",control:r.a.createElement(Ca.a,null),label:"Newest"})))),r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},r.a.createElement(j.a,null,"Showing: ",o.length," out of ",a.totalReviews),r.a.createElement(j.a,null,"Sorting by: ",w)),r.a.createElement("div",{className:t.reviews,onScroll:function(e){return function(e){e.persist(),x(e)}(e)}},o.map((function(e){return r.a.createElement(va,{review:e})})))):r.a.createElement(j.a,null," No reviews for this place")),r.a.createElement("br",null),d?r.a.createElement(re.a,null):null)})),ka=r.a.createContext({title:"",setTitle:function(){}});function Ia(e){var t=e.children,a=Object(n.useState)("Home"),l=Object(m.a)(a,2),i=l[0],o=l[1],c={title:i,setTitle:function(e){return o(e)}};return r.a.createElement(ka.Provider,{value:c},t)}function wa(){var e=Object(n.useContext)(ka);return{title:e.title,setTitle:e.setTitle}}var Pa=a(110),Ta=a.n(Pa),xa=a(1003),Da=a(306),Aa=a.n(Da),Na=a(234),La=a.n(Na),Ra=(a(772),a(985)),_a=a(237),Ma=a.n(_a);var Fa=Object(R.a)((function(e){return{root:{display:"flex",justifyContent:"space-between",margin:e.spacing(.5),alignItems:"center",flexFlow:"row wrap"},picker:{margin:e.spacing(.5),width:"30%"},intervalRightSide:{display:"flex",alignItems:"center"},intervalLeftSide:{}}}))((function(e){var t=e.classes,a=e.intervals,l=e.index,i=e.setIntervals,o=a[l],c=Object(n.useState)(null!=o.lastAccommodation),s=Object(m.a)(c,2),u=s[0],d=s[1],f=Object(n.useState)(null==o.lastAccommodation?o.closeTime:o.lastAccommodation),g=Object(m.a)(f,2),b=g[0],E=g[1],h=function(e,t){var n=a[l];return Ve()(e,"HH:mm").isBefore(Ve()(t,"HH:mm"))?n.openDay+1>6?0:n.openDay+1:n.openDay},v=function(){i((function(e){return e.filter((function(e,t){return t!==l}))}))};Object(n.useEffect)((function(){i((function(e){return e.map((function(e,t){return l===t?Object(p.a)(Object(p.a)({},e),{},{lastAccommodation:u?b.toString():null}):e}))}))}),[b,u]);var y=Ma()(),O=Object(Ra.a)(y.breakpoints.only("lg"));return r.a.createElement("div",{className:t.root},r.a.createElement("div",{className:t.intervalLeftSide},r.a.createElement(xa.a,{margin:"normal",ampm:!1,label:"Opens",className:t.picker,format:"HH:mm",value:Ve()(o.openTime,"HH:mm"),onChange:function(e){i((function(t){return t.map((function(t,a){return l===a?Object(p.a)(Object(p.a)({},t),{},{openTime:Ve()(e).format("HH:mm").toString(),closeDay:h(t.closeTime,e)}):t}))}))},InputProps:{disableUnderline:!0}}),r.a.createElement(xa.a,{margin:"normal",ampm:!1,className:t.picker,label:"Closes",format:"HH:mm",value:Ve()(o.closeTime,"HH:mm"),onChange:function(e){i((function(t){return t.map((function(t,a){return l===a?Object(p.a)(Object(p.a)({},t),{},{closeTime:Ve()(e).format("HH:mm").toString(),closeDay:h(e,t.openTime)}):t}))}))},InputProps:{disableUnderline:!0}}),a[l].closeDay!==a[l].openDay&&r.a.createElement(r.a.Fragment,null,r.a.createElement(j.a,{variant:"subtitle1"},r.a.createElement(La.a,{style:{marginRight:"10px"}}),"Closes the next day")),!O&&r.a.createElement(Ce.a,{color:"primary",onClick:v},r.a.createElement(Aa.a,null))),r.a.createElement("div",{className:t.intervalRightSide},r.a.createElement(Z.a,{checked:u,onChange:function(){return d((function(e){return!e}))}}),r.a.createElement(xa.a,{margin:"normal",ampm:!1,label:"Last accommodation",format:"HH:mm",disabled:!u,value:Ve()(b.toString(),"HH:mm"),onChange:function(e){return E(Ve()(e).format("HH:mm").toString())},InputProps:{disableUnderline:!0}}),O&&r.a.createElement(Ce.a,{color:"primary",onClick:v},r.a.createElement(Aa.a,null))))}));var Wa=Object(R.a)((function(e){return{header:{display:"flex",justifyContent:"space-between"},root:{margin:e.spacing(.5),padding:e.spacing(.5)}}}))((function(e){var t=e.classes,a=e.scheduleData,l=(e.setScheduleData,e.openDay),i=e.onChange,o=e.globalTime,c=Object(n.useState)(a.periods.filter((function(e){return e.openDay===l}))),s=Object(m.a)(c,2),u=s[0],d=s[1],f=Object(n.useState)({ignoreOpenTime:!0,ignoreCloseTime:!0}),g=Object(m.a)(f,2),b=g[0],E=g[1];return Object(n.useEffect)((function(){i(u,l)}),[u]),Object(n.useEffect)((function(){b.ignoreOpenTime?E((function(e){return Object(p.a)(Object(p.a)({},e),{},{ignoreOpenTime:!1})})):d((function(e){return e.map((function(e){return Object(p.a)(Object(p.a)({},e),{},{openTime:o.openTime})}))}))}),[o.openTime]),Object(n.useEffect)((function(){b.ignoreCloseTime?E((function(e){return Object(p.a)(Object(p.a)({},e),{},{ignoreCloseTime:!1})})):d((function(e){return e.map((function(e){return Object(p.a)(Object(p.a)({},e),{},{closeTime:o.closeTime})}))}))}),[o.closeTime]),r.a.createElement("div",{className:t.root},r.a.createElement("div",{className:t.header},r.a.createElement(j.a,{variant:"h6"},["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"][l]),r.a.createElement(Ce.a,{color:"secondary",onClick:function(){d((function(e){return[].concat(Object(Be.a)(e),[{openDay:l,closeDay:l,openTime:"08:00",closeTime:"18:00"}])}))}},r.a.createElement(ke.a,null))),u.map((function(e,t){return r.a.createElement(r.a.Fragment,null,r.a.createElement(C.a,{variant:"middle"}),r.a.createElement(Fa,{index:t,intervals:u,setIntervals:d}))})))}));var Ba=Object(R.a)((function(e){return{header:{display:"flex",justifyContent:"space-between"},root:{padding:e.spacing(2),margin:e.spacing(1)},pickerStyle:{margin:e.spacing(1)},headerLeft:{width:"100%",display:"flex",justifyContent:"left"},globalTimeEditLayout:{display:"flex",justifyContent:"space-between",margin:e.spacing(.5),alignItems:"center",flexFlow:"row wrap"},globalTimeEditLeft:{},globalTimePicker:{margin:e.spacing(.5),width:"30%"}}}))((function(e){var t=e.classes,a=e.data,l=e.setData,i=e.index,o=Object(n.useState)(Object(Be.a)(a.periods)),c=Object(m.a)(o,2),s=c[0],u=c[1],d=Object(n.useState)({openTime:"07:00",closeTime:"19:00"}),f=Object(m.a)(d,2),g=f[0],b=f[1],E=function(e,t){u((function(a){var n=a.filter((function(e){return e.openDay!==t}));return 0===e.length?Object(Be.a)(n):[].concat(Object(Be.a)(n),Object(Be.a)(e))}))};return Object(n.useEffect)((function(){l((function(e){return e.map((function(e,t){return t===i?Object(p.a)(Object(p.a)({},e),{},{periods:s}):e}))}))}),[s]),r.a.createElement(J.a,{className:t.root},r.a.createElement("div",{className:t.header},r.a.createElement("div",{className:t.headerLeft},a.scheduleDefault&&r.a.createElement(j.a,{variant:"h6"},"Date: Year round"),!a.scheduleDefault&&r.a.createElement(r.a.Fragment,null,r.a.createElement(We.a,{className:t.pickerStyle,views:["month","date"],label:"From",value:Ve()(a.from,"MM-DD"),onChange:function(e){l((function(t){return t.map((function(t,a){return a===i?Object(p.a)(Object(p.a)({},t),{},{from:Ve()(e).format("MM-DD").toString()}):t}))}))}}),r.a.createElement(We.a,{className:t.pickerStyle,views:["month","day"],label:"To",value:Ve()(a.to,"MM-DD"),onChange:function(e){l((function(t){return t.map((function(t,a){return a===i?Object(p.a)(Object(p.a)({},t),{},{to:Ve()(e).format("MM-DD").toString()}):t}))}))}}))),!a.scheduleDefault&&r.a.createElement(Ce.a,{color:"secondary",onClick:function(){l((function(e){return e.filter((function(e,t){return i!==t}))}))}},r.a.createElement(Ta.a,null))),r.a.createElement("br",null),r.a.createElement("div",{className:t.globalTimeEditLayout},r.a.createElement("div",{className:t.globalTimeEditLeft},r.a.createElement(xa.a,{margin:"normal",ampm:!1,label:"Opens",className:t.globalTimePicker,format:"HH:mm",value:Ve()(g.openTime,"HH:mm"),onChange:function(e){b((function(t){return Object(p.a)(Object(p.a)({},t),{},{openTime:Ve()(e).format("HH:mm").toString()})}))},InputProps:{disableUnderline:!0}}),r.a.createElement(xa.a,{margin:"normal",ampm:!1,className:t.globalTimePicker,label:"Closes",format:"HH:mm",value:Ve()(g.closeTime,"HH:mm"),onChange:function(e){b((function(t){return Object(p.a)(Object(p.a)({},t),{},{closeTime:Ve()(e).format("HH:mm").toString()})}))},InputProps:{disableUnderline:!0}}))),function(){for(var e=[],t=0;t<7;t++)e.push(r.a.createElement(Wa,{globalTime:g,scheduleData:a,onChange:E,setScheduleData:l,openDay:t,key:t}));return e}())}));var qa=Object(R.a)((function(e){return{header:{display:"flex",justifyContent:"space-between",flexWrap:"wrap"}}}))((function(e){var t=e.classes,a=e.scheduleData,n=e.setScheduleData,l=e.isScheduleEnabled,i=e.setIsScheduleEnabled;return r.a.createElement("div",null,r.a.createElement("div",{className:t.header},r.a.createElement(j.a,{variant:"h6"},"Working schedule"),r.a.createElement(Me.a,{control:r.a.createElement(Ut.a,{checked:l,onChange:function(){return i((function(e){return!e}))},color:"primary"}),label:"Enable schedule for this place?"})),r.a.createElement("br",null),l&&r.a.createElement(r.a.Fragment,null,a.map((function(e,t){return r.a.createElement(Ba,{data:e,index:t,setData:n})})),r.a.createElement(Ce.a,{style:{float:"right"},color:"secondary",onClick:function(){n((function(e){return[].concat(Object(Be.a)(e),[{scheduleDefault:!1,from:"01-01",to:"01-02",periods:[]}])}))}},r.a.createElement(ke.a,null))))}));var Ua=Object(R.a)((function(e){var t,a,n;return{button:{margin:e.spacing(2)},paperContent:(t={marginTop:e.spacing(4)},Object(d.a)(t,e.breakpoints.down("lg"),{width:"95%",padding:e.spacing(2)}),Object(d.a)(t,e.breakpoints.up("lg"),{width:"70%",padding:e.spacing(4)}),t),root:Object(d.a)({height:"100vh"},e.breakpoints.down("lg"),{height:"100%"}),loader:{display:"flex",alignItems:"center",justifyContent:"center",width:"100vw",height:"100vh"},content:(a={display:"flex",flexDirection:"column",alignItems:"center",height:"calc(93vh - 64px)"},Object(d.a)(a,e.breakpoints.down("lg"),{width:"100%",padding:e.spacing(1)}),Object(d.a)(a,e.breakpoints.up("lg"),{width:"auto",padding:e.spacing(8)}),Object(d.a)(a,"overflowY","auto"),a),bottom:(n={},Object(d.a)(n,e.breakpoints.down("lg"),{position:"fixed",height:"7vh",bottom:0,right:0}),Object(d.a)(n,"width","100%"),Object(d.a)(n,"zIndex",5),Object(d.a)(n,"display","flex"),Object(d.a)(n,"alignItems","center"),Object(d.a)(n,"justifyContent","space-around"),Object(d.a)(n,"padding",e.spacing(1)),n)}}))((function(e){var t=e.classes,a=e.match,l=Object(n.useState)({placeId:"",name:"",description:"",website:"",phoneNumber:"",hasSchedule:!1,isPublic:!1,isVerified:!0,overallStarRating:0,totalReviews:0,source:"",price:"",averageTimeSpent:"0"}),i=Object(m.a)(l,2),o=i[0],c=i[1],s=Object(n.useState)([]),u=Object(m.a)(s,2),d=u[0],p=u[1],f=Object(n.useState)([]),g=Object(m.a)(f,2),b=g[0],E=g[1],h=Object(n.useState)([]),v=Object(m.a)(h,2),y=v[0],O=v[1],j=Object(n.useState)({city:"",address:"",country:"",latitude:54.687157,longitude:25.279652,county:"",municipality:""}),C=Object(m.a)(j,2),S=C[0],k=C[1],I=Object(n.useState)({city:"",address:"",country:"",latitude:54.687157,longitude:25.279652,county:"",municipality:""}),w=Object(m.a)(I,2),P=w[0],T=w[1],x=Object(n.useState)([]),D=Object(m.a)(x,2),A=D[0],N=D[1],L=Object(n.useState)([]),_=Object(m.a)(L,2),M=_[0],F=_[1],W=Object(n.useState)(da),B=Object(m.a)(W,2),q=B[0],U=B[1],z=Object(n.useState)(!1),H=Object(m.a)(z,2),G=H[0],Y=H[1],V=Object(n.useState)(a.params.placeId),K=Object(m.a)(V,2),$=K[0],Z=K[1],X=Object(n.useState)(!0),Q=Object(m.a)(X,2),ee=Q[0],te=Q[1],ae=Object(n.useState)(!1),ne=Object(m.a)(ae,2),le=ne[0],ie=ne[1],oe=Object(n.useState)({name:!1}),ce=Object(m.a)(oe,2),se=ce[0],ue=ce[1],de=Object(n.useState)(!1),me=Object(m.a)(de,2),pe=me[0],fe=(me[1],Ne().addConfig),ge=Te().addAlertConfig,be=wa(),Ee=(be.title,be.setTitle),he=Object(R.a)((function(e){return{root:{color:e.palette.getContrastText(fa.a[500]),backgroundColor:fa.a[500],"&:hover":{backgroundColor:fa.a[700]}}}}))(Ce.a);function ve(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:xe.SNACKBAR_ERROR;fe(e,t),ie(!1)}function ye(){void 0===$?ge(xe.DIALOG_PLACE_INSERT_TITLE,xe.DIALOG_PLACE_INSERT,[{name:"Insert",action:function(){ie(!0),je.Places.insertPlace(Ae()).then((function(e){Z(e)})).catch((function(e){}))}}]):ge(xe.DIALOG_PLACE_UPDATE_TITLE,xe.DIALOG_PLACE_UPDATE,[{name:"save and publish",action:function(){var e=Object.assign({},o,{});e.isPublic=1,c(e),ie(!0),Oe()}},{name:"save",action:function(){ie(!0),Oe()}}])}function Oe(){Promise.all([void je.Places.updatePlace(Ae()).then((function(e){})).catch((function(e){})),ke($),Pe($),we($),Se($),De($),Ie($)]).then((function(e){ve(!0,xe.SNACKBAR_CHANGES_SAVED)})).catch((function(e){ve(!1)}))}function Se(e){je.ParkingPlace.updateParkingForPlace(A,"?p="+e).then((function(e){})).catch((function(e){}))}function ke(e){je.TagsPlace.updateTagsForPlace(d,"?p="+e).then((function(e){})).catch((function(e){}))}function Ie(e){je.SourcePlace.updateSourcesForPlace(M,"?p="+e).then((function(e){})).catch((function(e){}))}function we(e){je.CategoriesPlace.updateCategoriesForPlace(b,"?p="+e).then((function(e){})).catch((function(e){}))}function Pe(e){je.PhotoPlace.updatePhotoForPlace(y,"?p="+e).then((function(e){})).catch((function(e){}))}function De(e){je.Schedule.updateScheduleForPlace(G?q:[],"?id="+e).then((function(e){})).catch((function(e){}))}function Ae(){return Object.assign(o,S)}return Object(n.useEffect)((function(){void 0!==$&&(console.log("Getting place location"),je.Places.getPlaceById("?full=true&p="+$).then((function(e){var t;c({placeId:(t=e).placeId,name:t.name,description:t.description,website:t.website,phoneNumber:t.phoneNumber,hasSchedule:t.hasSchedule,isPublic:t.isPublic,isVerified:t.isVerified,overallStarRating:t.overallStarRating,totalReviews:t.totalReviews,price:t.price,averageTimeSpent:t.averageTimeSpent}),k({city:t.city,address:t.address,country:t.country,latitude:t.latitude,longitude:t.longitude}),T({city:t.city,address:t.address,country:t.country,latitude:t.latitude,longitude:t.longitude}),F(t.sources),p(t.tags),E(t.categories),t.schedule.length>0?(U(Object(Be.a)(t.schedule)),Y(!0)):Y(!1),N(t.parking),O(t.photos),te(!1),Ee("Editing place/"+e.name)})).catch((function(e){ve(!1)})))}),[]),Object(n.useEffect)((function(){void 0===$&&(Ee("Add new place"),console.log("Came here to add new place"),te(!1)),void 0!==$&&!1===ee&&(console.log("Just added new place"),Promise.all([ke($),Se($),we($),Pe($),De($),Ie($)]).then((function(e){ve(!0,xe.SNACKBAR_PLACE_INSERTED_SUCCESS)})).catch((function(e){ve(!1)})))}),[$]),Object(n.useEffect)((function(){!1===ee&&(console.log("Making this place public"),Oe())}),[o.isPublic]),r.a.createElement("div",{className:t.root},ee?r.a.createElement("div",{className:t.loader},r.a.createElement(ma.a,null)):r.a.createElement("div",{className:t.content},r.a.createElement(J.a,{elevation:4,className:t.paperContent},r.a.createElement(gt,{error:se,setError:ue,checkErrors:pe,placeInfo:o,setPlaceInfo:c,selectedSources:M,setSelectedSources:F})),void 0!==$?r.a.createElement(J.a,{elevation:4,className:t.paperContent},r.a.createElement(Sa,{placeInfo:o})):null,r.a.createElement(J.a,{elevation:4,className:t.paperContent},r.a.createElement(Pt,{photos:y,setPhotos:O})),r.a.createElement(J.a,{elevation:4,className:t.paperContent},r.a.createElement(Qt,{placeInfo:o,locationData:S,setLocationData:k})),r.a.createElement(J.a,{elevation:4,className:t.paperContent},r.a.createElement(la,{placeInfo:o,allSelectedParkingData:A,setAllSelectedParkingData:N,locationData:P,setLocationData:T})),r.a.createElement(J.a,{elevation:4,className:t.paperContent},r.a.createElement(ua,{selectedTags:d,setSelectedTags:p,selectedCategories:b,setSelectedCategories:E})),r.a.createElement(J.a,{elevation:4,className:t.paperContent},r.a.createElement(qa,{isScheduleEnabled:G,setIsScheduleEnabled:Y,setScheduleData:U,scheduleData:q}))),le?r.a.createElement(re.a,null):null,r.a.createElement(J.a,{elevation:1,className:t.bottom},!1===o.isVerified&&void 0!==$?r.a.createElement(he,{variant:"contained",color:"primary",onClick:function(){ge(xe.DIALOG_PLACE_VERIFY_TITLE,xe.DIALOG_PLACE_VERIFY_MESSAGE,[{name:"agree",action:function(){var e=Object.assign({},o,{});e.isPublic=1,e.isVerified=1,c(e)}}])},className:t.button},"Verify place"):r.a.createElement(Me.a,{control:r.a.createElement(Ut.a,{checked:o.isPublic,onChange:function(){ge(xe.DIALOG_PLACE_PUBLISH_TITLE,o.isPublic?xe.DIALOG_PLACE_UNPUBLISH_MESSAGE:xe.DIALOG_PLACE_PUBLISH_MESSAGE,[{name:"Agree",action:function(){var e=Object.assign({},o,{});e.isPublic=!e.isPublic,c(e)}}])},name:"isPublic"}),label:"Make this place public"}),r.a.createElement(Ce.a,{variant:"contained",color:"primary",onClick:function(){return ye()},className:t.button},"Save")))})),za=a(987),Ha=a(295),Ga=a.n(Ha);function Ya(e){var t=e.categories;return null!=t&&r.a.createElement(Ie.a,{component:"ul",style:{display:"flex",justifyContent:"left",flexWrap:"wrap",listStyle:"none",padding:"0px"}},t.map((function(e,t){return r.a.createElement("li",{key:t},r.a.createElement(Ue.a,{variant:"outlined",style:{margin:"5px"},label:e.name}))})))}function Va(e){var t=e.city,a=e.address,l=e.priceRange,i=e.rating;return r.a.createElement("div",null,null!=i&&r.a.createElement(n.Fragment,null,r.a.createElement(ga.a,{readOnly:!0,value:i}),r.a.createElement("br",null)),(null!=a?a:"")+" "+(null!=t?t:"")," ",r.a.createElement("div",{style:{color:"green"}},l))}var Ka=Ge()((function(e){return{root:{},media:{height:0,paddingTop:"56.25%"},expand:{transform:"rotate(0deg)",marginLeft:"auto",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"},avatar:{backgroundColor:Ga.a[500]}}}))((function(e){var t,a=e.classes,n=e.placeData,l=e.renderActionArea;return r.a.createElement(vt.a,{className:a.root},r.a.createElement(za.a,{action:null!=l&&l(),title:n.name,subheader:r.a.createElement(Va,{city:n.city,address:n.address,priceRange:n.priceRange,rating:n.overallStarRating})}),null!=n.photos&&n.photos.length>0&&r.a.createElement(ht.a,{className:a.media,image:n.photos[0].url}),r.a.createElement(ba.a,null,r.a.createElement(j.a,{variant:"body2",color:"textSecondary",component:"p"},null==(t=n.description)?"":t.length>500?t.substring(0,500)+"...":t),r.a.createElement(Ya,{categories:n.categories}),r.a.createElement(j.a,{variant:"body2",color:"textSecondary",component:"p"},n.website)),r.a.createElement(yt.a,{disableSpacing:!0}))})),$a=a(446),Ja=a.n($a),Za=a(472),Xa=a(447),Qa=a.n(Xa),en=a(146),tn=Object(g.a)((function(e){return{root:{padding:"2px 4px",display:"flex",alignItems:"center",margin:e.spacing(2)},iconButton:{padding:10},input:{marginLeft:e.spacing(1),flex:1},divider:{margin:4}}}));function an(e){var t=e.hint,a=e.searchCallback,n=tn(),l=Object(en.a)((function(e){return function(e){a(e.target.value)}(e)}),500);return r.a.createElement(J.a,{component:"form",className:n.root},r.a.createElement(Za.a,{className:n.input,placeholder:t,inputProps:{"aria-label":t},onChange:function(e){e.persist(),l(e)}}),r.a.createElement(S.a,{className:n.iconButton,"aria-label":"search"},r.a.createElement(Qa.a,null)),r.a.createElement(C.a,{className:n.divider,orientation:"vertical"}))}var nn=Ge()((function(e){var t;return{root:{overflow:"scroll",width:"100%",padding:e.spacing(1),height:"calc(100vh - 64px)",paddingTop:"9vh"},topBar:{height:"8vh",position:"absolute",width:"60%",marginLeft:"auto",marginRight:"auto",left:0,right:0,justifyContent:"center",zIndex:1},searchBox:{margin:e.spacing(1)},placeApiCard:(t={},Object(d.a)(t,e.breakpoints.down("lg"),{width:"95%"}),Object(d.a)(t,e.breakpoints.up("lg"),{width:"28vw"}),Object(d.a)(t,"margin",e.spacing(1)),t)}}))((function(e){var t=e.classes,a=Object(n.useState)([]),l=Object(m.a)(a,2),i=l[0],o=l[1],c=Object(n.useState)(!1),s=Object(m.a)(c,2),u=s[0],d=s[1],p=Ne().addConfig;return r.a.createElement("div",{style:{position:"relative"}},r.a.createElement("div",{className:t.topBar},r.a.createElement(an,{searchCallback:function(e){var t;e.length>3&&(t=e,o([]),d(!0),je.Places.searchApiPlaces("?keyword="+encodeURI(t)).then((function(e){o(Object(Be.a)(e))})).catch((function(e){p(!1,"The request did not go through.")})).finally((function(){d(!1)})))},hint:"Search api places",style:t.searchBox})),r.a.createElement("div",{className:t.root},r.a.createElement(Ja.a,{style:{margin:"0 auto"},elementType:"div",options:{isFitWidth:!0},disableImagesLoaded:!1,updateOnEachImageLoad:!1},i.map((function(e){return r.a.createElement(Ka,{classes:{root:t.placeApiCard},key:e.placeId,placeData:e,style:{boxSizing:"border-box"}})})),0===i.length&&!u&&r.a.createElement(j.a,{variant:"subtitle1"},"No results"),u&&r.a.createElement(ma.a,null))))})),rn=a(989);function ln(){return r.a.createElement(j.a,{variant:"body2",color:"textSecondary"},"Copyright \xa9 ","Traveldirection "," ",(new Date).getFullYear(),".")}var on=Object(g.a)((function(e){return{root:{display:"flex",flexDirection:"column",minHeight:"100vh"},main:{marginTop:e.spacing(8),marginBottom:e.spacing(2)},footer:{padding:e.spacing(3,2),marginTop:"auto",backgroundColor:"light"===e.palette.type?e.palette.grey[200]:e.palette.grey[800]}}}));var cn=a(94);var sn=Object(R.a)((function(e){var t;return{cardRoot:Object(d.a)({},e.breakpoints.only("lg"),{display:"flex"}),details:{display:"flex",flexDirection:"column",flex:5},content:{flex:"1 0 auto"},cover:(t={},Object(d.a)(t,e.breakpoints.down("lg"),{height:"200px"}),Object(d.a)(t,e.breakpoints.only("lg"),{flex:1,height:"auto"}),t),root:{display:"flex",flexFlow:"column wrap"},addParkingWrapper:{display:"inline-block"}}}))((function(e){var t,a=e.classes,n=e.elementData,l=e.removeCallback,i=e.addTransportCallback,o=e.displayNoTransportWarning;return r.a.createElement("div",{className:a.root},r.a.createElement(vt.a,{className:a.cardRoot},null!=n.data.details.photos&&n.data.details.photos.length>0&&r.a.createElement(ht.a,{className:a.cover,image:n.data.details.photos[0].url}),r.a.createElement("div",{className:a.details},r.a.createElement(ba.a,{className:a.content},r.a.createElement(j.a,{component:"h5",variant:"h5"},n.data.details.name),r.a.createElement(j.a,{variant:"subtitle1",color:"textSecondary"},null==(t=n.data.details.description)?"":t.length>500?t.substring(0,500)+"...":t))),r.a.createElement(za.a,{action:r.a.createElement(S.a,{"aria-label":"remove",onClick:function(){return l(n)}},r.a.createElement(Ta.a,null))})),o&&r.a.createElement(zt.a,{severity:"error"},"No transport from this place specified"),r.a.createElement("div",{className:a.addParkingWrapper},r.a.createElement(Ce.a,{style:{display:"inline"},color:"secondary",onClick:function(){return i(n)}},r.a.createElement(ke.a,null)),r.a.createElement(j.a,{style:{display:"inline"},variant:"subtitle1"},"Add transport from this place")))})),un=a(238),dn=a.n(un),mn=a(450),pn=a.n(mn),fn=a(449),gn=a.n(fn),bn=a(451),En=a.n(bn),hn=a(452),vn=a.n(hn),yn=a(453),On=a.n(yn),jn=a(454),Cn=a.n(jn),Sn=a(455),kn=a.n(Sn),In=a(448),wn=a.n(In),Pn=a(429),Tn=[{icon:r.a.createElement(wn.a,null),label:"Walk"},{icon:r.a.createElement(gn.a,null),label:"Metro"},{icon:r.a.createElement(pn.a,null),label:"Bike"},{icon:r.a.createElement(En.a,null),label:"Bus"},{icon:r.a.createElement(vn.a,null),label:"Car"},{icon:r.a.createElement(On.a,null),label:"Train"},{icon:r.a.createElement(Cn.a,null),label:"Plane"},{icon:r.a.createElement(kn.a,null),label:"Tram"}];var xn=Ge()((function(e){return{root:{display:"flex",flexFlow:"column wrap"},transportSelectWrapper:{display:"flex",alignItems:"center"},transportSelect:{marginLeft:e.spacing(1),width:"100px"}}}))((function(e){var t=e.classes,a=e.transportId,l=e.transportChangeCallback,i=e.transportRemoveCallback,o=Object(n.useState)(null==a?0:a),c=Object(m.a)(o,2),s=c[0],u=c[1];return r.a.createElement("div",{className:t.root},r.a.createElement(dn.a,null),r.a.createElement("div",{className:t.transportSelectWrapper},Tn[s].icon,r.a.createElement(ot.a,{className:t.transportSelect},r.a.createElement(Pn.a,{value:s,onChange:function(e){u(e.target.value),l({transport:parseInt(e.target.value)})}},Tn.map((function(e,t){return r.a.createElement("option",{key:t,value:t}," ",e.label)})))),r.a.createElement(S.a,{"aria-label":"remove",onClick:function(){return i()}},r.a.createElement(Ta.a,null))),r.a.createElement(dn.a,null))})),Dn=a(128),An=a.n(Dn),Nn=Object(bt.b)((function(e){var t=e.displayNoTransportWarning,a=e.elementData,n=e.removePlaceCallback,l=e.classes,i=e.addTransportCallback;return r.a.createElement("div",null,r.a.createElement(sn,{removeCallback:n,classes:{root:l.tourPlaceComponent},addTransportCallback:i,elementData:a,displayNoTransportWarning:t}))})),Ln=Object(bt.b)((function(e){var t=e.transportId,a=e.transportChangeCallback,n=e.transportRemoveCallback;return r.a.createElement("div",null,r.a.createElement(xn,{transportId:t,transportRemoveCallback:n,transportChangeCallback:a}))})),Rn=Object(bt.a)((function(e){var t=e.currentDay,a=e.removeElementCallback,n=e.tourInfo,l=e.classes,i=e.addTransportCallback,o=e.transportChangeCallback,c=function(e){var a=n.days[t].tour;return a.length-1>e&&a[e+1].type!==Zn.transport};return r.a.createElement("ul",null,n.days[t].tour.map((function(e,t){switch(e.type){case Zn.place:return r.a.createElement(Nn,{key:e.data.details.placeId,index:t,addTransportCallback:i,elementData:e,classes:l,displayNoTransportWarning:c(t),removePlaceCallback:function(){return a(t)}});case Zn.transport:return r.a.createElement(Ln,{key:e.data.elementIdentifier,index:t,transportId:e.data.transport,transportRemoveCallback:function(){return a(t)},transportChangeCallback:function(e){return o(t,e)}})}})))}));var _n=Object(R.a)((function(e){return{tourPlaceComponent:{margin:e.spacing(2)},root:{display:"flex",flexFlow:"column wrap",margin:e.spacing(1)}}}))((function(e){var t=e.classes,a=e.tourInfo,l=e.tourInfoReducer,i=e.currentDay;return e.errorInfo,e.setErrorInfo,Object(n.useEffect)((function(){console.log(a.days[i].tour)}),[a]),r.a.createElement("div",{className:t.root},0===a.days[i].tour.length&&r.a.createElement(zt.a,{severity:"warning"},"You have not added any places for the currently selected day."),r.a.createElement(Rn,{pressDelay:200,disableAutoscroll:!1,currentDay:i,tourInfo:a,transportChangeCallback:function(e,t){l({type:"UPDATE_ELEMENT",day:i,index:e,data:t})},onSortEnd:function(e){var t=e.oldIndex,a=e.newIndex;l({type:"MOVE_ELEMENT",day:i,oldIndex:t,newIndex:a})},classes:t,addTransportCallback:function(e){l({type:"INSERT_TRANSPORT_FOR_PLACE",placeId:e.data.details.placeId,day:i,data:{type:Zn.transport,data:{transport:0,elementIdentifier:An.a.generate()}}})},removeElementCallback:function(e){l({type:"REMOVE_ELEMENT",day:i,index:e})}}))})),Mn=a(456),Fn=a.n(Mn),Wn=a(457),Bn=a.n(Wn);var qn=Object(R.a)((function(e){return{searchInputComponent:{},placeCard:{margin:e.spacing(1,8,1,8)}}}))((function(e){var t=e.classes,a=e.addPlaceCallback,l=e.apiPlacesFound,i=e.setApiPlacesFound,o=e.localPlacesFound,c=e.setLocalPlacesFound,s=Object(n.useState)(!1),u=Object(m.a)(s,2),d=u[0],p=u[1],f=Object(n.useState)(!1),g=Object(m.a)(f,2),b=g[0],E=g[1],h=0,v=1;return r.a.createElement(r.a.Fragment,null,r.a.createElement(an,{hint:"Search for a place",searchCallback:function(e){e.length<3||(c([]),i([]),p(!0),E(!0),je.Places.getAllPlacesAdmin("?keyword="+e).then((function(e){c(e.list),E(!1)})).catch((function(e){console.log(e)})),je.Places.searchApiPlaces("?keyword="+e).then((function(e){i(e),p(!1)})).catch((function(e){console.log(e)})))},className:t.searchInputComponent}),b||d?r.a.createElement(ma.a,null):r.a.createElement(r.a.Fragment,null,function(){var e=function(e,n){return{classes:{root:t.placeCard},key:e.placeId,renderActionArea:function(){return r.a.createElement("div",null,r.a.createElement(Ce.a,{color:"primary",onClick:function(){return a(e,n)}},r.a.createElement(ke.a,null)),r.a.createElement(X.a,{title:n===h?"This place is from our database":"This place is from API","aria-label":"add"},n===h?r.a.createElement(Fn.a,null):r.a.createElement(Bn.a,null)))},placeData:e}},n=[];return o.forEach((function(t){n.push(r.a.createElement(Ka,e(t,h)))})),l.forEach((function(t){n.push(r.a.createElement(Ka,e(t,v)))})),n}()))}));var Un=Object(R.a)((function(e){return{root:{display:"flex",margin:e.spacing(1)},radioButtonArea:{},cardArea:{flex:1,display:"flex"},content:{flex:"1 1 auto"},descriptionInput:{marginTop:e.spacing(2),width:"100%",height:"auto"},headerWrap:{}}}))((function(e){var t=e.classes,a=e.onSelectCallback,n=e.index,l=e.currentDay,i=e.tourInfoReducer,o=e.description,c=e.handleRemoveDay;return r.a.createElement("div",{className:t.root},r.a.createElement("div",{className:t.radioButtonArea},r.a.createElement(Ca.a,{checked:n===l,onChange:function(e){a(n)}})),r.a.createElement(vt.a,{className:t.cardArea},r.a.createElement(ba.a,{className:t.content},r.a.createElement(j.a,{component:"h5",variant:"h5"},"Day ",n+1),r.a.createElement(ne.a,{className:t.descriptionInput,multiline:!0,label:"Description",value:o,variant:"outlined",onChange:function(e){!function(e){i({type:"UPDATE_DAY",day:n,data:{description:e}})}(e.target.value)}})),r.a.createElement(za.a,{action:r.a.createElement(Ce.a,{startIcon:r.a.createElement(Ta.a,null),"aria-label":"remove",onClick:function(){return c(n)}})})))})),zn=Object(bt.b)((function(e){var t=e.dayInfo,a=e.day,n=e.currentDay,l=e.onSelectCallback,i=e.tourInfoReducer,o=e.removeDayCallback;return r.a.createElement(Un,{description:t.description,currentDay:n,index:a,handleRemoveDay:o,onSelectCallback:l,tourInfoReducer:i})})),Hn=Object(bt.a)((function(e){var t=e.elements,a=e.currentDay,n=e.onSelectCallback,l=e.tourInfoReducer,i=e.removeDayCallback;return r.a.createElement("ul",{style:{padding:"0px"}},t.map((function(e,t){return r.a.createElement(zn,{currentDay:a,day:t,index:t,removeDayCallback:i,key:e.elementIdentifier,dayInfo:e,onSelectCallback:n,tourInfoReducer:l})})))}));var Gn=Object(R.a)((function(e){return{root:{margin:e.spacing(1)},addDayButton:{marginTop:e.spacing(1)},footerWrapper:{display:"flex",width:"100%",justifyContent:"flex-end"}}}))((function(e){var t=e.classes,a=e.currentDay,n=e.setCurrentDay,l=e.tourInfo,i=e.tourInfoReducer,o=Te().addAlertConfig,c=function(e){i({type:"REMOVE_DAY",day:e}),e===a&&n(e-1)};return r.a.createElement("div",{className:t.root},r.a.createElement(Hn,{pressDelay:200,disableAutoscroll:!1,elements:l.days,currentDay:a,onSortEnd:function(e){var t=e.oldIndex,a=e.newIndex;i({type:"MOVE_DAY",oldIndex:t,newIndex:a}),n(a)},removeDayCallback:function(e){1===l.days.length?o("Warning","The tour has to have at least one day",[]):l.days[e].tour.length>0?o("Warning","Are you sure you want to remove this day?",[{name:"yes",action:function(){c(e)}}],(function(){})):c(e)},onSelectCallback:function(e){n(e)},tourInfoReducer:i}),r.a.createElement("div",{className:t.footerWrapper},r.a.createElement(Ce.a,{variant:"text",color:"secondary",size:"large",className:t.addDayButton,onClick:function(){i({type:"ADD_DAY",data:{description:"",elementIdentifier:An.a.generate(),tour:[]}})},startIcon:r.a.createElement(ke.a,null)},"Add another day")))}));function Yn(e,t){var a=[];switch(t.type){case"ADD_ELEMENT":return e.days.forEach((function(e,n){n===t.day?a.push(Object(p.a)(Object(p.a)({},e),{},{tour:[].concat(Object(Be.a)(e.tour),[t.data])})):a.push(e)})),Object(p.a)(Object(p.a)({},e),{},{days:Object(Be.a)(a)});case"UPDATE_ELEMENT":return e.days.forEach((function(e,n){if(n===t.day){var r=e.tour;r[t.index]=Object(p.a)(Object(p.a)({},r[t.index]),{},{data:Object(p.a)(Object(p.a)({},r[t.index].data),t.data)}),a.push(Object(p.a)(Object(p.a)({},e),{},{tour:r}))}else a.push(e)})),Object(p.a)(Object(p.a)({},e),{},{days:Object(Be.a)(a)});case"INSERT_TRANSPORT_FOR_PLACE":return e.days.forEach((function(e,n){if(n===t.day){var r=e.tour,l=r.findIndex((function(e){return e.type===Zn.place&&e.data.details.placeId===t.placeId}));r.splice(l+1,0,t.data),a.push(Object(p.a)(Object(p.a)({},e),{},{tour:r}))}else a.push(e)})),Object(p.a)(Object(p.a)({},e),{},{days:Object(Be.a)(a)});case"ADD_DAY":return Object(p.a)(Object(p.a)({},e),{},{days:[].concat(Object(Be.a)(e.days),[t.data])});case"MOVE_DAY":return Object(p.a)(Object(p.a)({},e),{},{days:Object(bt.c)(e.days,t.oldIndex,t.newIndex)});case"MOVE_ELEMENT":return a=e.days.map((function(e,a){return a===t.day?Object(p.a)(Object(p.a)({},e),{},{tour:Object(bt.c)(e.tour,t.oldIndex,t.newIndex)}):e})),Object(p.a)(Object(p.a)({},e),{},{days:Object(Be.a)(a)});case"UPDATE_DAY":return a=e.days.map((function(e,a){return a===t.day?Object(p.a)(Object(p.a)({},e),t.data):e})),Object(p.a)(Object(p.a)({},e),{},{days:Object(Be.a)(a)});case"REMOVE_ELEMENT":return a=e.days.map((function(e,a){return a===t.day?Object(p.a)(Object(p.a)({},e),{},{tour:e.tour.filter((function(e,a){return a!==t.index}))}):e})),Object(p.a)(Object(p.a)({},e),{},{days:Object(Be.a)(a)});case"REMOVE_DAY":return a=e.days.filter((function(e,a){return a!==t.day})),Object(p.a)(Object(p.a)({},e),{},{days:a});case"UPDATE_TOUR":return Object(p.a)(Object(p.a)({},e),t.data);case"SET_ALL":return t.data;default:return e}}var Vn=Ge()((function(e){return{root:{margin:e.spacing(4)},nameField:{width:"100%"},descriptionField:{marginTop:e.spacing(2),width:"100%",height:"auto"}}}))((function(e){var t=e.classes,a=e.tourInfo,l=e.tourInfoReducer,i=e.errorInfo,o=e.setErrorInfo;Object(n.useEffect)((function(){""===a.name?o((function(e){return Object(p.a)(Object(p.a)({},e),{},{errors:Object(p.a)(Object(p.a)({},e.errors),{},{titleMissing:!0})})})):o((function(e){return Object(p.a)(Object(p.a)({},e),{},{errors:Object(p.a)(Object(p.a)({},e.errors),{},{titleMissing:!1})})}))}),[a.name]);var c=i.showErrors&&i.errors.titleMissing;return r.a.createElement("div",{className:t.root},r.a.createElement(ne.a,{label:"Tour name",variant:"outlined",error:c,helperText:c?"Please provide a title for your tour":"",value:a.name,onChange:function(e){l({type:"UPDATE_TOUR",data:{name:e.target.value}})},defaultValue:"My tour name",className:t.nameField}),r.a.createElement(ne.a,{className:t.descriptionField,multiline:!0,label:"Description",value:a.description,variant:"outlined",onChange:function(e){l({type:"UPDATE_TOUR",data:{description:e.target.value}})}}))})),Kn=window.google,$n=Object(Tt.withGoogleMap)((function(e){return r.a.createElement(Tt.GoogleMap,{defaultZoom:8,defaultCenter:{lat:-34.397,lng:150.644}},r.a.createElement(Tt.DirectionsRenderer,{options:{suppressMarkers:!0,draggable:!1},draggable:!1,directions:e.directions}),e.places.map((function(t,a){var n={lat:t.latitude,lng:t.longitude};return r.a.createElement(Tt.Marker,{key:a,position:n,label:"".concat(a+1),onClick:function(){var t=Object.assign({},e.infoWindows,{});t[a]=!0,e.setInfoWindows(t)}},e.infoWindows[a]&&r.a.createElement(Tt.InfoWindow,{onCloseClick:function(){var t=Object.assign({},e.infoWindows,{});t[a]=!1,e.setInfoWindows(t)}},r.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},r.a.createElement(vt.a,null,r.a.createElement(j.a,null,t.name),t.photo?r.a.createElement(ht.a,{style:{height:"150px"},image:t.photo}):null))))})))}));var Jn=Ge()((function(e){var t;return{root:{margin:e.spacing(4)},cover:(t={},Object(d.a)(t,e.breakpoints.down("lg"),{height:"200px"}),Object(d.a)(t,e.breakpoints.only("lg"),{flex:1,height:"auto"}),t)}}))((function(e){var t=e.classes,a=e.tourInfo,l=e.currentDay,i=Object(n.useState)(),o=Object(m.a)(i,2),c=o[0],s=o[1],u=Object(n.useState)([]),d=Object(m.a)(u,2),p=d[0],f=d[1],g=Object(n.useState)([]),b=Object(m.a)(g,2),E=b[0],h=b[1];return Object(n.useEffect)((function(){var e=function(){var e=a.days[l].tour.filter((function(e){return e.type===Zn.place})),t=[],n=[];return e.forEach((function(e){var a=e.data.details.latitude,r=e.data.details.longitude,l=e.data.details.name,i=e.data.details.photos;t.push({latitude:a,longitude:r,name:l,photo:i.length>0?i[0].url:null}),n.push(!1)})),f(n),h(t),t}();if(e.length>0){var t=e.map((function(e){return{location:{lat:e.latitude,lng:e.longitude},stopover:!0}})),n=t.shift().location,r=null;r=t.length>0?t.pop().location:n,(new Kn.maps.DirectionsService).route({origin:n,destination:r,travelMode:Kn.maps.TravelMode.DRIVING,waypoints:t},(function(e,t){t===Kn.maps.DirectionsStatus.OK?s(e):alert(t)}))}}),[l,a.days]),r.a.createElement("div",{className:t.root},r.a.createElement($n,{loadingElement:r.a.createElement("div",{style:{height:"100%"}}),containerElement:r.a.createElement("div",{style:{height:"400px"}}),mapElement:r.a.createElement("div",{style:{height:"100%"}}),directions:c,places:E,infoWindows:p,setInfoWindows:f}))})),Zn={place:0,transport:1},Xn={name:"",description:"",days:[{description:"",elementIdentifier:"jkasfbjkdsbjk",tour:[]}]};var Qn=Object(R.a)((function(e){var t,a;return{root:(t={},Object(d.a)(t,e.breakpoints.down("lg"),{overflow:"scroll"}),Object(d.a)(t,e.breakpoints.only("lg"),{overflow:"initial",display:"flex"}),Object(d.a)(t,"height","calc(100% - 64px)"),Object(d.a)(t,"width","100%"),Object(d.a)(t,"&::-webkit-scrollbar",{display:"none"}),t),loader:{display:"flex",alignItems:"center",justifyContent:"center",width:"100vw",height:"100vh"},rightLayout:Object(d.a)({flex:2,"&::-webkit-scrollbar":{display:"none"}},e.breakpoints.only("lg"),{height:"100%",overflowY:"scroll"}),leftLayout:(a={},Object(d.a)(a,e.breakpoints.only("lg"),{height:"100%"}),Object(d.a)(a,"overflowY","scroll"),Object(d.a)(a,"flex",1),Object(d.a)(a,"&::-webkit-scrollbar",{display:"none"}),a),actionsArea:{padding:e.spacing(1),display:"flex",justifyContent:"flex-end"}}}))((function(e){var t=e.classes,a=e.match,l=Object(n.useState)([]),i=Object(m.a)(l,2),o=i[0],c=i[1],s=Object(n.useState)([]),u=Object(m.a)(s,2),d=u[0],f=u[1],g=Object(n.useState)(0),b=Object(m.a)(g,2),E=b[0],h=b[1],v=Object(n.useState)(a.params.tourId),y=Object(m.a)(v,2),O=y[0],j=y[1],S=Object(n.useState)(void 0!==a.params.tourId),k=Object(m.a)(S,2),I=k[0],w=k[1],P=Object(n.useState)({errors:{titleMissing:!1},showErrors:!1}),T=Object(m.a)(P,2),x=T[0],D=T[1],A=r.a.useReducer(Yn,Xn),N=Object(m.a)(A,2),L=N[0],R=N[1],_=Ne().addConfig,M=function(e,t){R({type:"ADD_ELEMENT",day:E,data:{type:Zn.place,data:{type:t,details:Object(p.a)({},e)}}})};Object(n.useEffect)((function(){void 0!==O&&F()}),[]);var F=function(){je.Tour.getTour("?id="+O).then((function(e){var t=[];e.days.forEach((function(e){var a=[];e.data.forEach((function(e){var t={type:Zn.place,data:{details:e.place,type:e.place.type}};delete t.data.details.type,a.push(t),e.transport.forEach((function(e){a.push({type:Zn.transport,data:{transport:e.fk_transportId-1,elementIdentifier:An.a.generate()}})}))}));var n=Object(p.a)(Object(p.a)({},e),{},{tour:a,elementIdentifier:An.a.generate()});delete n.data,t.push(n)}));var a=Object(p.a)(Object(p.a)({},e),{},{days:t});R({type:"SET_ALL",data:a})})).catch((function(e){_(!1,"Tour has failed to load"),j(void 0)})).finally((function(){w(!1)}))},W=function(){var e=!1;if(Object.keys(x.errors).map((function(t,a){x.errors[t]&&(D((function(e){return Object(p.a)(Object(p.a)({},e),{},{showErrors:!0})})),e=!0)})),!e){D((function(e){return Object(p.a)(Object(p.a)({},e),{},{showErrors:!1})}));var t=[];L.days.forEach((function(e){var a=Object(p.a)(Object(p.a)({},e),{},{data:[]});delete a.tour,delete a.elementIdentifier;for(var n=0;n<e.tour.length;n++){var r=e.tour[n];if(r.type===Zn.place){for(var l=[],i=n+1;i<e.tour.length&&e.tour[i].type===Zn.transport;i++)l.push({fk_transportId:e.tour[i].data.transport+1});var o={place:{type:r.data.type,placeId:r.data.details.placeId},transport:l};a.data.push(o)}}t.push(a)}));var a=Object(p.a)(Object(p.a)({},L),{},{days:t});void 0===O?je.Tour.insertTour(a).then((function(e){_(!0,"Tour has been inserted successfully!"),j(e)})).catch((function(e){_(!1,"Something went wrong while saving this tour.")})):je.Tour.updateTour(a,"?id="+O).then((function(e){_(!0,"Tour has been updated successfully!")})).catch((function(e){_(!1,"Something went wrong while saving this tour.")}))}},B=Object(n.useMemo)((function(){return r.a.createElement("div",{className:t.leftLayout},r.a.createElement(qn,{addPlaceCallback:M,localPlacesFound:o,setLocalPlacesFound:c,apiPlacesFound:d,setApiPlacesFound:f}))}),[o,d,E]),q=Object(n.useMemo)((function(){return r.a.createElement("div",null,r.a.createElement(Gn,{currentDay:E,setCurrentDay:h,tourInfo:L,tourInfoReducer:R}),r.a.createElement(C.a,{variant:"middle"}),r.a.createElement(_n,{errorInfo:x,setErrorInfo:D,currentDay:E,tourInfoReducer:R,tourInfo:L}),r.a.createElement(Jn,{tourInfo:L,currentDay:E}))}),[L.days,E,x]),U=Object(n.useMemo)((function(){return r.a.createElement(J.a,{className:t.rightLayout},r.a.createElement(Vn,{tourInfo:L,tourInfoReducer:R,errorInfo:x,setErrorInfo:D}),r.a.createElement(C.a,{variant:"middle"}),q,r.a.createElement("div",{className:t.actionsArea},r.a.createElement(Ce.a,{variant:"contained",color:"primary",onClick:W},"Save this tour")))}),[L,E,x]),z=Ma()(),H=Object(Ra.a)(z.breakpoints.only("lg")),G=r.a.createElement(r.a.Fragment,null,H?r.a.createElement(r.a.Fragment,null,B,U):r.a.createElement(r.a.Fragment,null,U,B));return r.a.createElement("div",{className:t.root},I?r.a.createElement("div",{className:t.loader},r.a.createElement(ma.a,null)):G)})),er=[{id:"name",numeric:!1,disablePadding:!1,label:"Tour name",isId:!0},{id:"description",numeric:!1,disablePadding:!1,label:"Tour description",isId:!1},{id:"actions",numeric:!1,disablePadding:!1,label:"Actions",isId:!1}];var tr=Object(R.a)((function(e){var t;return{button:{margin:e.spacing(2)},input:{display:"none"},sortingButtons:{padding:e.spacing(2),display:"flex",flexDirection:"column"},root:{height:"100vh",width:"100%",overflow:"auto"},buttonsDiv:{backgroundColor:"red",justifyContent:"flex-end"},content:(t={display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},Object(d.a)(t,e.breakpoints.down("lg"),{padding:e.spacing(1)}),Object(d.a)(t,e.breakpoints.up("lg"),{padding:e.spacing(8)}),t)}}))((function(e){var t=Object(n.useState)([]),a=Object(m.a)(t,2),l=a[0],i=a[1],o=Object(n.useState)([]),c=Object(m.a)(o,2),s=c[0],u=c[1],d=Object(n.useState)(!0),p=Object(m.a)(d,2),f=p[0],g=p[1],b=e.classes,E=Object(n.useState)([{filterLabel:"Unverified",filter:!1,filterName:"unverified"},{filterLabel:"Unpublished",filter:!1,filterName:"unpublished"}]),h=Object(m.a)(E,2),v=h[0],y=h[1],O=Object(n.useState)(""),j=Object(m.a)(O,2),C=j[0],k=j[1],I=Te().addAlertConfig,w=Ne().addConfig;function P(e){console.log("deita",e.list),g(!1);var t=[];e.list.map((function(e){t.push(e)})),delete e.list,i(t),u(e)}Object(n.useEffect)((function(){f||_("?o="+C)}),[C]);var T=r.a.useState(null),x=Object(m.a)(T,2),D=x[0],A=x[1],N=Boolean(D),L=N?"simple-popover":void 0,R=function(e){A(e.currentTarget)};return r.a.createElement("div",{className:b.root},r.a.createElement("div",{className:b.content},r.a.createElement(ue,{title:"Tours",headCells:er,data:l,pagingInfo:s,checkable:!1,changePageCallback:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";g(!0),_("?p="+e+"&s=10&keyword="+t+"&o="+C)},updateCallback:function(e){Ee.push("/app/addtour/"+e)},removeCallback:function(e){console.log("tour id",e),I(xe.DIALOG_TOUR_DELETE_TITLE,xe.DIALOG_TOUR_DELETE_MESSAGE,[{name:"Delete",action:function(){g(!0),je.Tour.removeTour("?id="+e).then((function(t){var a=[];l.map((function(t){t.tourId!==e&&a.push(t)})),i(a),w(!0,xe.SNACKBAR_TOUR_REMOVE_SUCCESS),g(!1)})).catch((function(e){g(!1),w(!1,xe.SNACKBAR_ERROR)}))}}],(function(){g(!1)}))},id:"tourId",isLoading:f,customToolbarElements:r.a.createElement("div",null,r.a.createElement(X.a,{"aria-describedby":L,title:"Filter list"},r.a.createElement(S.a,{"aria-label":"filter list",onClick:R},r.a.createElement(Re.a,null))),r.a.createElement(_e.a,{id:L,open:N,anchorEl:D,onClose:function(){A(null)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},r.a.createElement("div",{className:b.sortingButtons},v.map((function(e){return r.a.createElement(Me.a,{control:r.a.createElement(Z.a,{checked:e.filter,onChange:function(){return function(e){var t=[],a=[];v.map((function(n){n.filterName===e&&(n.filter=!n.filter),n.filter&&a.push(n.filterName),t.push(n)})),k(a.join(",")),y(t)}(e.filterName)},name:e.filterName}),label:e.filterLabel})})))))}),r.a.createElement(Ie.a,{display:"flex",justifyContent:"flex-end"},r.a.createElement(Ce.a,{onClick:function(){Ee.push("/app/addtour")},variant:"text",color:"secondary",size:"large",className:b.button,startIcon:r.a.createElement(ke.a,null)},"Add"))));function _(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";je.Tour.getAllToursAdmin(e).then((function(e){console.log(e),P(e)})).catch((function(e){console.log(e)}))}})),ar=[{id:"name",numeric:!1,disablePadding:!1,label:"Category name",isId:!1},{id:"actions",numeric:!1,disablePadding:!1,label:"Actions",isId:!1}],nr=[{id:"name",numeric:!1,disablePadding:!1,label:"Tag name",isId:!1},{id:"actions",numeric:!1,disablePadding:!1,label:"Actions",isId:!1}];var rr=Object(R.a)((function(e){var t;return{root:{height:"100vh",width:"100%",overflow:"auto"},content:(t={display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},Object(d.a)(t,e.breakpoints.down("lg"),{padding:e.spacing(1)}),Object(d.a)(t,e.breakpoints.up("lg"),{padding:e.spacing(8)}),t),buttonWrapper:{display:"flex",justifyContent:"flex-end",width:"100%"}}}))((function(e){var t=e.classes,a=Te().addAlertConfig,l=Ne().addConfig,i=sa().addEditDialogConfig,o=Object(n.useState)({categories:!1,tags:!1}),c=Object(m.a)(o,2),s=c[0],u=c[1],d=Object(n.useState)([]),f=Object(m.a)(d,2),g=f[0],b=f[1],E=Object(n.useState)([]),h=Object(m.a)(E,2),v=h[0],y=h[1];Object(n.useEffect)((function(){u({categories:!0,tags:!0}),Promise.all([je.Categories.getAllCategories(),je.Tags.getAllTags()]).then((function(e){b(e[0]),y(e[1])})).catch((function(){l(!1,"Could not retrieve data!")})).finally((function(){u((function(e){return Object(p.a)(Object(p.a)({},e),{},{categories:!1,tags:!1})}))}))}),[]);var O=function(e,t){return e.length<3||t.name.includes(e)};return r.a.createElement("div",{className:t.root},r.a.createElement("div",{className:t.content},r.a.createElement(ue,{title:"Categories",headCells:ar,data:g,pagingInfo:null,checkable:!1,searchFunction:O,changePageCallback:function(){},updateCallback:function(e){var t=g.filter((function(t){return t.categoryId===e}))[0].name;i({title:"Edit category",explanation:"Type the category name",defaultText:t,onDoneCallback:function(t){je.Categories.updateCategory([{name:t,categoryId:e}]).then((function(){l(!0,"Category updated successfully"),b((function(a){return a.map((function(a){return a.categoryId===e?Object(p.a)(Object(p.a)({},a),{},{name:t}):a}))}))})).catch((function(){l(!1,"Failed to update category.")}))},validateInput:function(e){return e.length>=4?0:1},textFieldLabel:"Restaurants, hiking, etc..."})},removeCallback:function(e){var t=g.filter((function(t){return t.categoryId===e}))[0].name;a("Warning","Are you sure you want the category, named '"+t+"'?",[{name:"yes",action:function(){u((function(e){return Object(p.a)(Object(p.a)({},e),{},{categories:!0})})),je.Categories.removeCategory([{categoryId:e}]).then((function(){l(!0,"Category successfully removed."),b((function(t){return t.filter((function(t){return t.categoryId!==e}))}))})).catch((function(){l(!1,"An error has occurred while removing category.")})).finally((function(){u((function(e){return Object(p.a)(Object(p.a)({},e),{},{categories:!1})}))}))}}],(function(){}))},id:"categoryId",isLoading:s.categories}),r.a.createElement(Ie.a,{className:t.buttonWrapper},r.a.createElement(Ce.a,{variant:"text",color:"secondary",size:"large",onClick:function(){i({title:"Add category",explanation:"Type the category name",onDoneCallback:function(e){je.Categories.addCategory([{name:e}]).then((function(t){l(!0,"Category inserted successfully"),b((function(a){return[].concat(Object(Be.a)(a),[{name:e,categoryId:t[0]}])}))})).catch((function(e){l(!1,"Failed to add category.")}))},validateInput:function(e){return e.length>=4?0:1},textFieldLabel:"Restaurants, hiking, etc..."})},startIcon:r.a.createElement(ke.a,null)},"Add a new category")),r.a.createElement("br",null),r.a.createElement(ue,{title:"Tags",headCells:nr,data:v,pagingInfo:null,checkable:!1,searchFunction:O,changePageCallback:function(){},updateCallback:function(e){var t=v.filter((function(t){return t.tagId===e}))[0].name;i({title:"Edit tag",explanation:"Type the tag name",defaultText:t,onDoneCallback:function(t){je.Tags.updateTags([{name:t,tagId:e}]).then((function(){l(!0,"Tag updated successfully"),y((function(a){return a.map((function(a){return a.tagId===e?Object(p.a)(Object(p.a)({},a),{},{name:t}):a}))}))})).catch((function(){l(!1,"Failed to update tag.")}))},validateInput:function(e){return e.length>=4?0:1},textFieldLabel:"Warm, quick, cozy..."})},removeCallback:function(e){var t=v.filter((function(t){return t.tagId===e}))[0].name;a("Warning","Are you sure you want the tag, named '"+t+"'?",[{name:"yes",action:function(){u((function(e){return Object(p.a)(Object(p.a)({},e),{},{tags:!0})})),je.Tags.removeTags([{tagId:e}]).then((function(){l(!0,"Tag successfully removed."),y((function(t){return t.filter((function(t){return t.tagId!==e}))}))})).catch((function(){l(!1,"An error has occurred while removing tag.")})).finally((function(){u((function(e){return Object(p.a)(Object(p.a)({},e),{},{tags:!1})}))}))}}],(function(){}))},id:"tagId",isLoading:s.tags}),r.a.createElement(Ie.a,{className:t.buttonWrapper},r.a.createElement(Ce.a,{variant:"text",color:"secondary",size:"large",onClick:function(){i({title:"Add tag",explanation:"Type the tag name",onDoneCallback:function(e){je.Tags.addTag([{name:e}]).then((function(t){l(!0,"Tag inserted successfully"),y((function(a){return[].concat(Object(Be.a)(a),[{name:e,tagId:t[0]}])}))})).catch((function(){l(!1,"Failed to add tag.")}))},validateInput:function(e){return e.length>=4?0:1},textFieldLabel:"Warm, quick, cozy..."})},startIcon:r.a.createElement(ke.a,null)},"Add a new tag"))))})),lr=Object(g.a)((function(e){return{root1:{overflow:"hidden",display:"flex",height:"100vh",background:"#F1F1F1"},appBar:{height:"64px",transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{width:"calc(100% - ".concat(240,"px)"),marginLeft:240,transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:e.spacing(2)},hide:{display:"none"},drawer:{width:240,flexShrink:0},drawerPaper:{width:240},drawerHeader:Object(p.a)(Object(p.a)({display:"flex",alignItems:"center",padding:e.spacing(0,1)},e.mixins.toolbar),{},{justifyContent:"flex-end"}),content:{width:"100vw",height:"100%",transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),marginLeft:-240},contentShift:{width:"100vw",height:"100%",transition:e.transitions.create("margin",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginLeft:0}}}));function ir(e){var t=lr(),a=Object(b.a)(),l=Object(n.useState)(!1),i=Object(m.a)(l,2),o=i[0],c=i[1],s=wa(),u=s.title,p=s.setTitle,g=Object(L.g)(),k=function(){c(!1)},w=function(e,t){k(),p(t),new RegExp(e+"([0-9]*)?").test(g.pathname)&&Ee.go(0)};return r.a.createElement("div",{className:t.root1},r.a.createElement(h.a,null),r.a.createElement(v.a,{position:"fixed",className:Object(f.a)(t.appBar,Object(d.a)({},t.appBarShift,o))},r.a.createElement(y.a,null,r.a.createElement(S.a,{color:"inherit","aria-label":"open drawer",onClick:function(){c(!0)},edge:"start",className:Object(f.a)(t.menuButton,o&&t.hide)},r.a.createElement(I.a,null)),r.a.createElement(j.a,{variant:"h6",noWrap:!0},u))),r.a.createElement(E.a,{className:t.drawer,variant:"persistent",anchor:"left",open:o,classes:{paper:t.drawerPaper}},r.a.createElement("div",{className:t.drawerHeader},r.a.createElement(S.a,{onClick:k},"ltr"===a.direction?r.a.createElement(P.a,null):r.a.createElement(x.a,null))),r.a.createElement(C.a,null),r.a.createElement(O.a,null,r.a.createElement(D.a,{button:!0,component:N.a,to:"/app/",onClick:function(){return w("/app/","Home")}},r.a.createElement(A.a,null,"Home")),r.a.createElement(C.a,{light:!0}),r.a.createElement(D.a,{button:!0,component:N.a,to:"/app/places",onClick:function(){return w("/app/places","Places")}},r.a.createElement(A.a,null,"Places")),r.a.createElement(D.a,{button:!0,component:N.a,to:"/app/tours",onClick:function(){return w("/app/tours","Tours")}},r.a.createElement(A.a,null,"Tours")),r.a.createElement(D.a,{button:!0,component:N.a,to:"/app/apiplaces",onClick:function(){return w("/app/apiplaces","Api places")}},r.a.createElement(A.a,null,"Explore API places")),r.a.createElement(D.a,{button:!0,component:N.a,to:"/app/addplace",onClick:function(){return w("/app/addplace","Add Place")}},r.a.createElement(A.a,null,"Add place")),r.a.createElement(D.a,{button:!0,component:N.a,to:"/app/addtour",onClick:function(){return p("Add tour")}},r.a.createElement(A.a,null,"Add tour")),r.a.createElement(D.a,{button:!0,component:N.a,to:"/app/resources",onClick:function(){return p("Manage resources")}},r.a.createElement(A.a,null,"Resources")))),r.a.createElement("main",{className:Object(f.a)(t.content,Object(d.a)({},t.contentShift,o))},r.a.createElement("div",{className:t.drawerHeader}),r.a.createElement(L.d,null,r.a.createElement(L.b,{exact:!0,path:"/app",component:B}),r.a.createElement(L.b,{path:"/app/places",component:nt}),r.a.createElement(L.b,{path:"/app/tours",component:tr}),r.a.createElement(L.b,{path:"/app/addplace/:placeId?",component:Ua}),r.a.createElement(L.b,{path:"/app/apiplaces",component:nn}),r.a.createElement(L.b,{path:"/app/addtour/:tourId?",component:Qn}),r.a.createElement(L.b,{path:"/app/resources",component:rr}),r.a.createElement(cn.a,{from:"*",to:"/404"}))))}var or=a(40),cr=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(or.a,{utils:Ke.a},r.a.createElement(Ia,null,r.a.createElement(ir,null))))}}]),a}(n.Component),sr=a(460),ur=a.n(sr),dr=(a(900),r.a.createContext()),mr=function(e){var t=e.children,a=Object(n.useState)(null),l=Object(m.a)(a,2),i=l[0],o=l[1],c=Object(n.useState)(!0),s=Object(m.a)(c,2),u=s[0],d=s[1];return Object(n.useEffect)((function(){M.auth().onAuthStateChanged((function(e){e&&(o(e),M.auth().currentUser.getIdToken(!0).then((function(e){W.a.set("access_token",e)})).catch((function(e){}))),d(!1)}))}),[]),r.a.createElement(dr.Provider,{value:{currentUser:i,isLoading:u}},t)};function pr(){return r.a.createElement(j.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ","Traveldirection "," ",(new Date).getFullYear(),".")}var fr=Object(g.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)},loaderMain:{width:"100%",height:"100%",alignItems:"center",justifyContent:"center",backgroundColor:"red"}}}));var gr=a(465),br=a(461),Er=function(e){var t=e.component,a=Object(gr.a)(e,["component"]);return r.a.createElement(br.a,Object.assign({},a,{render:function(e){return!0===ve()?r.a.createElement(t,e):r.a.createElement(cn.a,{to:"/login"})}}))},hr=a(1001);function vr(e){var t=Ne(),a=t.config,n=t.removeConfig;return r.a.createElement(hr.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:!!a,autoHideDuration:4e3,onClose:n},r.a.createElement(zt.a,{onClose:n,severity:a?a.success?"success":"error":""},!!a&&a.message))}var yr=a(992),Or=function(){var e=Te(),t=e.alertConfig,a=e.removeAlertConfig;function n(){void 0!==t.onClose&&t.onClose(),a()}return r.a.createElement(ut.a,{open:!!t,onClose:n,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(mt.a,{id:"alert-dialog-title"},t?t.title:""),r.a.createElement(pt.a,null,r.a.createElement(yr.a,{id:"alert-dialog-description"},t?t.message:"")),r.a.createElement(dt.a,null,r.a.createElement(Ce.a,{onClick:n,color:"primary"},"Close"),!!t&&t.actions.map((function(e){return r.a.createElement(Ce.a,{onClick:function(){n(),e.action()},color:"primary"},e.name)}))))},jr=function(){var e=sa(),t=e.dialogConfig,a=(e.removeEditDialogConfig,e.dialogOpen),l=e.setDialogOpen,i=Object(n.useState)(""),o=Object(m.a)(i,2),c=o[0],s=o[1],u=Object(n.useState)(0),d=Object(m.a)(u,2),p=d[0],f=d[1],g=function(){f(0),l(!1),s("")};return r.a.createElement("div",null,r.a.createElement(ut.a,{open:a,"aria-labelledby":"form-dialog-title",fullWidth:!0},r.a.createElement(mt.a,{id:"form-dialog-title"},t.title),r.a.createElement(pt.a,null,r.a.createElement(yr.a,null,t.explanation),r.a.createElement(ne.a,{autoFocus:!0,helperText:0!==p&&null!==t.errorMessages[p]?t.errorMessages[p]:"",error:0!==p,margin:"dense",id:"name",onInput:function(e){s(e.target.value)},label:t.textFieldLabel,defaultValue:t.defaultText,type:"email",fullWidth:!0})),r.a.createElement(dt.a,null,r.a.createElement(Ce.a,{onClick:function(){g()},color:"primary"},"Cancel"),r.a.createElement(Ce.a,{onClick:function(){var e=t.validateInput(c);f(e),0===e&&(void 0!==t.onDoneCallback&&t.onDoneCallback(c),g())},color:"primary"},"Done"))))};a(394).config(),i.a.render(r.a.createElement(mr,null,r.a.createElement(L.c,{history:Ee},r.a.createElement(et,null,r.a.createElement(Ae,null,r.a.createElement(Pe,null,r.a.createElement(ca,null,r.a.createElement(vr,null),r.a.createElement(Or,null),r.a.createElement(jr,null),r.a.createElement(L.d,null,r.a.createElement(cn.a,{exact:!0,from:"/",to:"/app"}),r.a.createElement(Er,{path:"/app",component:cr}),r.a.createElement(L.b,{path:"/login",component:function(){var e=fr(),t=Object(n.useState)(""),a=Object(m.a)(t,2),l=a[0],i=a[1],o=Object(n.useState)(""),c=Object(m.a)(o,2),s=c[0],u=c[1],d=Object(n.useState)(!1),p=Object(m.a)(d,2),f=p[0],g=p[1],b=Ne().addConfig,E=Object(n.useContext)(dr),v=(E.currentUser,E.isLoading,function(){g(!0),M.auth().signInWithEmailAndPassword(l,s).then((function(e){g(!1),M.auth().currentUser.getIdToken(!0).then((function(e){console.log("Getting new access token"),W.a.set("access_token",e),Ee.push("/app")})).catch((function(e){b(!1,"Error receiving access token")}))})).catch((function(e){g(!1),b(!1,e.message)}))});return ve()?r.a.createElement(cn.a,{to:"/app"}):r.a.createElement(rn.a,{component:"main",maxWidth:"xs",onKeyPress:function(e){return 13!==(t=e).which&&13!==t.keyCode||(v(),!1);var t}},f&&r.a.createElement(re.a,null),r.a.createElement(h.a,null),r.a.createElement("div",{className:e.paper},r.a.createElement(Ea.a,{className:e.avatar},r.a.createElement(ur.a,null)),r.a.createElement(j.a,{component:"h1",variant:"h5"},"Sign in"),r.a.createElement(ne.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,value:l,onChange:function(e){i(e.target.value)},id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0}),r.a.createElement(ne.a,{variant:"outlined",margin:"normal",required:!0,value:s,onChange:function(e){u(e.target.value)},fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password"}),r.a.createElement(Ce.a,{onClick:function(){v()},fullWidth:!0,variant:"contained",color:"primary",className:e.submit},"Sign In")),r.a.createElement(Ie.a,{mt:8},r.a.createElement(pr,null)))}}),r.a.createElement(L.b,{path:"*",component:function(){var e=on();return r.a.createElement("div",{className:e.root},r.a.createElement(h.a,null),r.a.createElement(rn.a,{component:"main",className:e.main,maxWidth:"sm"},r.a.createElement(j.a,{variant:"h2",component:"h1",gutterBottom:!0},"Page not found"),r.a.createElement(j.a,{variant:"h5",component:"h2",gutterBottom:!0},"Try something else")),r.a.createElement("footer",{className:e.footer},r.a.createElement(rn.a,{maxWidth:"sm"},r.a.createElement(ln,null))))}}),r.a.createElement(cn.a,{from:"*",to:"/404"})))))))),document.getElementById("root"))}},[[492,1,2]]]);
//# sourceMappingURL=main.f412c483.chunk.js.map