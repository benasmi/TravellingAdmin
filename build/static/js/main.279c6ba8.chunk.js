(this["webpackJsonptravelling-admin"]=this["webpackJsonptravelling-admin"]||[]).push([[0],{469:function(e,t,a){e.exports=a(879)},879:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(16),c=a.n(l),i=a(408),o=a(409),s=a(443),u=a(441),d=a(35),m=a(7),p=a(52),g=a(2),f=a(94),b=a(34),h=a(972),E=a(961),v=a(963),O=a(936),y=a(941),C=a(60),j=a(958),S=a(445),k=a(284),P=a.n(k),w=a(435),I=a.n(w),A=a(436),D=a.n(A),x=a(946),L=a(964),N=a(91),T=a(27),_=a(4),R=a(410),F=(a(477),R.initializeApp({apiKey:"AIzaSyBRhTGXvKq0RD-ajkbOndOIK9c03wg9vRo",authDomain:"travel-fd76c.firebaseapp.com",databaseURL:"https://travel-fd76c.firebaseio.com",projectId:"travel-fd76c",storageBucket:"travel-fd76c.appspot.com",messagingSenderId:"654752782594",appId:"1:654752782594:web:478b4a1d8a17c52975ca1b"})),B=a(102),M=a.n(B),W=Object(_.a)((function(e){return{button:{margin:e.spacing(1)},input:{display:"none"}}}))((function(e){e.classes;return r.a.createElement("div",null)})),H=a(10),q=a(944),G=a(945),z=a(935),U=a(943),V=a(933),K=a(967),$=a(934),Y=a(984),J=a(165),X=a(971),Z=a(937),Q=a(87),ee=a.n(Q),te=a(281),ae=a.n(te),ne=a(976);var re=a(942);function le(e,t,a){return t[a]<e[a]?-1:t[a]>e[a]?1:0}function ce(e){var t=e.classes,a=e.onSelectAllClick,n=e.order,l=e.orderBy,c=e.numSelected,i=e.rowCount,o=e.onRequestSort,s=e.headCells,u=e.checkable;return r.a.createElement(V.a,null,r.a.createElement($.a,null,u?r.a.createElement(z.a,{padding:"checkbox"},r.a.createElement(X.a,{indeterminate:c>0&&c<i,checked:i>0&&c===i,onChange:a,inputProps:{"aria-label":"select all desserts"}})):null,s.map((function(e){return r.a.createElement(z.a,{key:e.id,align:e.numeric?"right":"left",padding:e.disablePadding?"none":"default",sortDirection:l===e.id&&n},r.a.createElement(Y.a,{active:l===e.id,direction:l===e.id?n:"asc",onClick:(a=e.id,function(e){o(e,a)})},e.label,l===e.id?r.a.createElement("span",{className:t.visuallyHidden},"desc"===n?"sorted descending":"sorted ascending"):null));var a}))))}var ie=Object(f.a)((function(e){return{root:{paddingLeft:e.spacing(2),paddingRight:e.spacing(1)},highlight:"light"===e.palette.type?{color:e.palette.secondary.main,backgroundColor:Object(H.e)(e.palette.secondary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},title:{flex:"1 1 100%"}}})),oe=function(e){var t=ie(),a=e.numSelected,l=e.title,c=e.changePageCallback,i=e.keyword,o=e.setKeyword,s=e.customToolbarElements,u=function(e,t){var a=Object(n.useState)(e),r=Object(m.a)(a,2),l=r[0],c=r[1];return Object(n.useEffect)((function(){var a=setTimeout((function(){c(e)}),t);return function(){clearTimeout(a)}}),[e]),l}(i,300);return Object(n.useEffect)((function(){c(1,i)}),[u]),r.a.createElement(O.a,{className:Object(g.a)(t.root,Object(d.a)({},t.highlight,a>0))},a>0?r.a.createElement(C.a,{className:t.title,color:"inherit",variant:"subtitle1",component:"div"},a," selected"):r.a.createElement(C.a,{className:t.title,variant:"h6",id:"tableTitle",component:"div"},l),a>0?r.a.createElement(Z.a,{title:"Delete"},r.a.createElement(S.a,{"aria-label":"delete"},r.a.createElement(ee.a,null))):r.a.createElement("div",{style:{display:"flex",alignItems:"center"}},r.a.createElement(ne.a,{id:"standard-basic",label:"Search",onChange:function(e){o(e.target.value)}}),s||null))},se=Object(f.a)((function(e){return{root:{width:"100%"},paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:750},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1},centerCell:{textAlign:"center",width:"100%"},rowNotPublished:{backgroundColor:"#ffcdd2"},rowNotVerified:{backgroundColor:"#fff9c4"},rowBasic:{backgroundColor:"#FFFFFF"}}}));function ue(e){var t=e.title,a=e.headCells,l=e.pagingInfo,c=e.data,i=e.checkable,o=e.changePageCallback,s=e.updateCallback,u=e.removeCallback,d=e.id,p=e.isLoading,g=e.customToolbarElements,f=se(),b=r.a.useState("asc"),h=Object(m.a)(b,2),E=h[0],v=h[1],O=r.a.useState("calories"),y=Object(m.a)(O,2),j=y[0],k=y[1],P=r.a.useState([]),w=Object(m.a)(P,2),I=w[0],A=w[1],D=r.a.useState(0),x=Object(m.a)(D,2),L=x[0],N=x[1],T=r.a.useState(!1),_=Object(m.a)(T,2),R=_[0],F=(_[1],r.a.useState(10)),B=Object(m.a)(F,2),M=B[0],W=B[1],H=Object(n.useState)(""),V=Object(m.a)(H,2),Y=V[0],Z=V[1],Q=M-Math.min(M,c.length-L*M);return r.a.createElement("div",{className:f.root},r.a.createElement(J.a,{className:f.paper},p?r.a.createElement(re.a,null):null,r.a.createElement(oe,{title:t,numSelected:I.length,changePageCallback:o,keyword:Y,setKeyword:Z,customToolbarElements:g}),r.a.createElement(U.a,null,r.a.createElement(q.a,{className:f.table,"aria-labelledby":"tableTitle",size:R?"small":"medium","aria-label":"enhanced table"},r.a.createElement(ce,{classes:f,numSelected:I.length,order:E,orderBy:j,onSelectAllClick:function(e){if(e.target.checked){var t=c.map((function(e){return e.name}));A(t)}else A([])},onRequestSort:function(e,t){v(j===t&&"asc"===E?"desc":"asc"),k(t)},rowCount:c.length,headCells:a,checkable:i}),r.a.createElement(G.a,null,function(e,t){var a=e.map((function(e,t){return[e,t]}));return a.sort((function(e,a){var n=t(e[0],a[0]);return 0!==n?n:e[1]-a[1]})),a.map((function(e){return e[0]}))}(c,function(e,t){return"desc"===e?function(e,a){return le(e,a,t)}:function(e,a){return-le(e,a,t)}}(E,j)).slice(L*M,L*M+M).map((function(e,t){var n,l=(n=e.name,-1!==I.indexOf(n)),c="enhanced-table-checkbox-".concat(t),o=void 0!==e.isVerified&&!1===e.isVerified?f.rowNotVerified:void 0!==e.isPublic&&!1===e.isPublic?f.rowNotPublished:f.rowBasic;return r.a.createElement($.a,{className:o,hover:!0,onClick:function(t){e.name},role:"checkbox","aria-checked":l,tabIndex:-1,key:e.name,selected:l},i?r.a.createElement(z.a,{padding:"checkbox"},r.a.createElement(X.a,{checked:l,onChange:function(t){return function(e,t){var a=I.indexOf(t),n=[];-1===a?n=n.concat(I,t):0===a?n=n.concat(I.slice(1)):a===I.length-1?n=n.concat(I.slice(0,-1)):a>0&&(n=n.concat(I.slice(0,a),I.slice(a+1))),A(n)}(0,e.name)},inputProps:{"aria-labelledby":c}})):null,a.map((function(t){return t.isId?r.a.createElement(z.a,{component:"th",id:c,scope:"row"},e[t.id]):"actions"===t.id?r.a.createElement(z.a,null,r.a.createElement("div",null,r.a.createElement(S.a,{onClick:function(){return s(e[d])},size:"small","aria-label":"edit"},r.a.createElement(ae.a,{fontSize:"small"})),r.a.createElement(S.a,{size:"small","aria-label":"delete"},r.a.createElement(ee.a,{onClick:function(){return u(e[d])},fontSize:"small"})))):r.a.createElement(z.a,{align:t.numeric?"right":"left"},e[t.id])})))})),Q>0&&r.a.createElement($.a,{style:{height:(R?33:53)*Q}},c.length>0?r.a.createElement(z.a,{colSpan:6}):!p&&r.a.createElement(z.a,{colSpan:6,className:f.centerCell},r.a.createElement(C.a,{variant:"h6",noWrap:!0},"No results")))))),r.a.createElement(K.a,{rowsPerPageOptions:[10],component:"div",count:null!==l?l.total:c.length,rowsPerPage:M,page:null!==l?l.pageNum-1:L,onChangePage:function(e,t){null!==l?o(t+1,Y):N(t)},onChangeRowsPerPage:function(e){W(parseInt(e.target.value,10)),N(0),console.log("handleChangeRowsPerPage")}})))}var de=a(223),me=a.n(de),pe=a(415),ge=a(224),fe=a.n(ge),be=a(63),he=Object(be.a)(),Ee=function(){return M.a.get("access_token")},ve=function(){return!!Ee()},Oe=function(){var e=Object(pe.a)(me.a.mark((function e(t,a){var n,r,l;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=fe.a.create({baseURL:"https://www.traveldirection.ax.lt:8080/",headers:{"Content-Type":null==a?"application/json":a,Accept:"application/json","Access-Control-Allow-Origin":"*",Authorization:Ee()}})).interceptors.response.use((function(e){return e}),(function(e){var t=e.config,a=e.response.status;return!F.auth().currentUser||401!==a&&403!==a||void 0!==t._retry?Promise.reject(e):F.auth().currentUser.getIdToken(!0).then((function(e){return t._retry=!0,t.headers.Authorization=e,M.a.set("access_token",e),fe()(t)}))})),r=function(e){return console.log("Request Successful!",e),e.data},l=function(e){return console.debug("Request Failed:",e.config),e.response?(console.debug("Status:",e.response.status),403===e.response.status&&he.push("/login"),console.debug("Data:",e.response.data),console.debug("Headers:",e.response.headers)):console.debug("Error Message:",e.message),Promise.reject(e.response||e.message)},e.abrupt("return",n(t).then(r).catch(l));case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),ye={getRequest:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Oe({url:e+t,method:"GET"})},postRequest:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return Oe({url:e+a,method:"POST",data:t})},postMultipartRequest:function(e,t){return Oe({url:e,method:"POST",data:t},"multipart/form-data")}},Ce={SourcePlace:{updateSourcesForPlace:function(e,t){return ye.postRequest("api/v1/sourceplace/update",e,t)}},Source:{getSources:function(){return ye.getRequest("api/v1/source/all")},addSource:function(e){return ye.postRequest("api/v1/source/insert",e)}},Places:{getAllPlaces:function(e){return ye.getRequest("api/v1/place/search",e)},insertPlace:function(e){return ye.postRequest("api/v1/place/insert",e)},updatePlace:function(e){return ye.postRequest("api/v1/place/update",e)},getPlaceById:function(e){return ye.getRequest("api/v1/place/getplace",e)},getAllPlacesAdmin:function(e){return ye.getRequest("api/v1/place/searchadmin",e)},searchApiPlaces:function(e){return ye.getRequest("api/v1/placeApi/search",e)},removePlace:function(e){return ye.getRequest("api/v1/place/delete",e)}},Tags:{getAllTags:function(){return ye.getRequest("api/v1/tags/all")},addTag:function(e){return ye.postRequest("api/v1/tags/insert",e)}},Categories:{addCategory:function(e){return ye.postRequest("api/v1/categories/insert",e)},getAllCategories:function(){return ye.getRequest("api/v1/categories/all")}},Photos:{addPhoto:function(e){return ye.postRequest("api/v1/photo/insert",e)},uploadPhoto:function(e){return ye.postMultipartRequest("api/v1/photo/upload",e)}},Parking:{getParkingByLocation:function(e){return ye.getRequest("api/v1/parking/searchAdmin",e)},insertNewParking:function(e){return ye.postRequest("api/v1/parking/insert",e)}},TagsPlace:{updateTagsForPlace:function(e,t){return ye.postRequest("api/v1/tagsplace/update",e,t)}},CategoriesPlace:{updateCategoriesForPlace:function(e,t){return ye.postRequest("api/v1/categoryplace/update",e,t)}},ParkingPlace:{updateParkingForPlace:function(e,t){return ye.postRequest("api/v1/parkingplace/update",e,t)}},PhotoPlace:{updatePhotoForPlace:function(e,t){return ye.postRequest("api/v1/photoplace/update",e,t)}},Schedule:{updateScheduleForPlace:function(e,t){return ye.postRequest("api/v1/ws/update",e,t)}},Reviews:{getPlaceReviews:function(e){return ye.getRequest("api/v1/reviews/all",e)}}},je=a(233),Se=a(56),ke=a.n(Se),Pe=a(973),we=r.a.createContext({alertConfig:null,addAlertConfig:function(){},removeAlertConfig:function(){}});function Ie(e){var t=e.children,a=Object(n.useState)(null),l=Object(m.a)(a,2),c=l[0],i=l[1],o={alertConfig:c,addAlertConfig:function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;return i({title:e,message:t,func:a,onClose:n})},removeAlertConfig:function(e){return i(null)}};return r.a.createElement(we.Provider,{value:o},t)}function Ae(){var e=Object(n.useContext)(we);return{alertConfig:e.alertConfig,addAlertConfig:e.addAlertConfig,removeAlertConfig:e.removeAlertConfig}}var De={DIALOG_PLACE_PUBLISH_TITLE:"Place publicity",DIALOG_PLACE_PUBLISH_MESSAGE:"This place will be visible for all users. Are you sure?",DIALOG_PLACE_UNPUBLISH_MESSAGE:"This place will not be visible anymore. Are you sure?",DIALOG_PLACE_INSERT_TITLE:"Insert place",DIALOG_PLACE_INSERT:"Are you sure you want to insert this place?",DIALOG_PLACE_UPDATE_TITLE:"Update place",DIALOG_PLACE_UPDATE:"Are you sure you want to make changes to this place?",DIALOG_PLACE_VERIFY_TITLE:"Place verification",DIALOG_PLACE_VERIFY_MESSAGE:"This is a user's suggested place. Are you sure you want to verify this place and make it visible to others?",DIALOG_PLACE_DELETE_TITLE:"Delete place",DIALOG_PLACE_DELETE_MESSAGE:"This action will remove this place permanently. Are you sure you want to proceed?",SNACKBAR_PLACE_INSERTED_SUCCESS:"Place inserted successfully",SNACKBAR_PLACE_REMOVE_SUCCESS:"Place was removed successfully",SNACKBAR_ERROR:"Something went wrong!",SNACKBAR_CHANGES_SAVED:"All changes saved!"},xe=r.a.createContext({config:null,addConfig:function(){},removeConfig:function(){}});function Le(e){var t=e.children,a=Object(n.useState)(null),l=Object(m.a)(a,2),c=l[0],i=l[1],o={config:c,addConfig:function(e,t){return function(e,t){return i({success:e,message:t})}(e,t)},removeConfig:function(){return i(null)}};return r.a.createElement(xe.Provider,{value:o},t)}function Ne(){var e=Object(n.useContext)(xe);return{config:e.config,addConfig:e.addConfig,removeConfig:e.removeConfig}}var Te=a(225),_e=a.n(Te),Re=a(887),Fe=a(947),Be=[{id:"name",numeric:!1,disablePadding:!1,label:"Place name",isId:!0},{id:"address",numeric:!1,disablePadding:!1,label:"Address",isId:!1},{id:"city",numeric:!1,disablePadding:!1,label:"City",isId:!1},{id:"country",numeric:!1,disablePadding:!1,label:"Country",isId:!1},{id:"phoneNumber",numeric:!1,disablePadding:!1,label:"Phone Number",isId:!1},{id:"actions",numeric:!1,disablePadding:!1,label:"Actions",isId:!1}];var Me=Object(_.a)((function(e){var t;return{button:{margin:e.spacing(2)},input:{display:"none"},sortingButtons:{padding:e.spacing(2),display:"flex",flexDirection:"column"},root:{height:"100vh",width:"100%",overflow:"auto"},buttonsDiv:{backgroundColor:"red",justifyContent:"flex-end"},content:(t={display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},Object(d.a)(t,e.breakpoints.down("lg"),{padding:e.spacing(1)}),Object(d.a)(t,e.breakpoints.up("lg"),{padding:e.spacing(8)}),t)}}))((function(e){var t=Object(n.useState)([]),a=Object(m.a)(t,2),l=a[0],c=a[1],i=Object(n.useState)([]),o=Object(m.a)(i,2),s=o[0],u=o[1],d=Object(n.useState)(!0),p=Object(m.a)(d,2),g=p[0],f=p[1],b=e.classes,h=Object(n.useState)([{filterLabel:"Unverified",filter:!1,filterName:"unverified"},{filterLabel:"Unpublished",filter:!1,filterName:"unpublished"}]),E=Object(m.a)(h,2),v=E[0],O=E[1],y=Object(n.useState)(""),C=Object(m.a)(y,2),j=C[0],k=C[1],P=Ae().addAlertConfig,w=Ne().addConfig;function I(e){f(!1);var t=[];e.list.map((function(e){t.push(e)})),delete e.list,c(t),u(e)}Object(n.useEffect)((function(){g||(R("?o="+j),console.log("Filter query",j))}),[j]);var A=r.a.useState(null),D=Object(m.a)(A,2),x=D[0],L=D[1],N=Boolean(x),T=N?"simple-popover":void 0,_=function(e){L(e.currentTarget)};return r.a.createElement("div",{className:b.root},r.a.createElement("div",{className:b.content},r.a.createElement(ue,{title:"Places",headCells:Be,data:l,pagingInfo:s,checkable:!1,changePageCallback:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";f(!0),R("?p="+e+"&s=10&keyword="+t+"&o="+j)},updateCallback:function(e){he.push("/app/addplace/"+e)},removeCallback:function(e){f(!0),P(De.DIALOG_PLACE_DELETE_TITLE,De.DIALOG_PLACE_DELETE_MESSAGE,(function(){Ce.Places.removePlace("?p="+e).then((function(t){var a=[];l.map((function(t){t.placeId!==e&&a.push(t)})),c(a),w(!0,De.SNACKBAR_PLACE_REMOVE_SUCCESS),f(!1)})).catch((function(e){f(!1),w(!1,De.SNACKBAR_ERROR)}))}),(function(){f(!1)}))},id:"placeId",isLoading:g,customToolbarElements:r.a.createElement("div",null,r.a.createElement(Z.a,{"aria-describedby":T,title:"Filter list"},r.a.createElement(S.a,{"aria-label":"filter list",onClick:_},r.a.createElement(_e.a,null))),r.a.createElement(Re.a,{id:T,open:N,anchorEl:x,onClose:function(){L(null)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},r.a.createElement("div",{className:b.sortingButtons},v.map((function(e){return r.a.createElement(Fe.a,{control:r.a.createElement(X.a,{checked:e.filter,onChange:function(){return function(e){var t=[],a=[];v.map((function(n){n.filterName===e&&(n.filter=!n.filter),n.filter&&a.push(n.filterName),t.push(n)})),k(a.join(",")),O(t)}(e.filterName)},name:e.filterName}),label:e.filterLabel})})))))}),r.a.createElement(Pe.a,{display:"flex",justifyContent:"flex-end"},r.a.createElement(je.a,{onClick:function(){he.push("/app/addplace")},variant:"text",color:"secondary",size:"large",className:b.button,startIcon:r.a.createElement(ke.a,null)},"Add"))));function R(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";Ce.Places.getAllPlacesAdmin(e).then((function(e){console.log(e),I(e)})).catch((function(e){console.log(e)}))}})),We=a(20),He=a(979),qe=[{value:0,label:"$"},{value:25,label:"$$"},{value:50,label:"$$$"},{value:75,label:"$$$$"},{value:100,label:"$$$$$"}],Ge=[{value:5,label:5},{value:10,label:10},{value:15,label:15},{value:30,label:30},{value:45,label:45},{value:60,label:60},{value:90,label:90},{value:120,label:120},{value:150,label:150},{value:180,label:180},{value:210,label:210},{value:240,label:240},{value:270,label:270}],ze=a(950),Ue=a(940),Ve=a(975),Ke=a(966),$e=a(970),Ye=a(982);var Je=Object(_.a)((function(e){return{autoComplete:{margin:e.spacing(1)},chip:{margin:e.spacing(.5)},root:{display:"flex",justifyContent:"left",flexWrap:"wrap",listStyle:"none",padding:e.spacing(1),margin:0},autoCompleteChipContainer:{padding:e.spacing(1)}}}))((function(e){var t=e.options,a=e.setOptions,l=e.selectedOptions,c=e.setSelectedOptions,i=e.classes,o=e.label,s=e.id,u=Object(n.useState)({name:""}),d=Object(m.a)(u,2),p=d[0],g=d[1],f=Object(n.useState)(!0),b=Object(m.a)(f,2),h=b[0],E=b[1];return Object(n.useEffect)((function(){if(h&&t.length>0){var e=[];t.map((function(t){var a=!1;l.map((function(e){JSON.stringify(t)===JSON.stringify(e)&&(a=!0)})),a||e.push(t)})),a(e),E(!1)}}),[t]),r.a.createElement("div",null,r.a.createElement(Pe.a,{className:i.autoCompleteChipContainer},0!==l.length&&r.a.createElement(Pe.a,{component:"ul",className:i.root},l.map((function(e){return r.a.createElement("li",{key:e[s]},r.a.createElement(Ye.a,{variant:"outlined",label:e.name,onDelete:function(){return n=e,c(l.filter((function(e){return e!==n}))),void a([].concat(Object(We.a)(t),[n]));var n},className:i.chip}))}))),r.a.createElement($e.a,{className:i.autoComplete,value:p,options:t,onChange:function(e,n){g({name:""}),c([].concat(Object(We.a)(l),[n])),a(t.filter((function(e){return e!==n})))},disableClearable:!0,getOptionLabel:function(e){return e.name},renderInput:function(e){return r.a.createElement(ne.a,Object.assign({},e,{label:o,variant:"outlined"}))}})))})),Xe=a(888),Ze=a(891),Qe=a(949),et=a(890);var tt=Object(_.a)((function(e){return{root:{margin:0,padding:e.spacing(2)},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}}))((function(e){e.classes;var t=e.open,a=e.action,l=e.setDialogOpen,c=Object(n.useState)(""),i=Object(m.a)(c,2),o=i[0],s=i[1],u=Object(n.useState)(""),d=Object(m.a)(u,2),p=d[0],g=d[1],f=Object(n.useState)(!1),b=Object(m.a)(f,2),h=b[0],E=b[1];return r.a.createElement("div",null,r.a.createElement(Xe.a,{"aria-labelledby":"customized-dialog-title",open:t,fullWidth:!0},r.a.createElement(Qe.a,{id:"customized-dialog-title"},"Insert source"),r.a.createElement(et.a,{dividers:!0},r.a.createElement(ne.a,{error:h,onChange:function(e){s(e.target.value)},label:"Source name",variant:"outlined",fullWidth:!0}),r.a.createElement(ne.a,{style:{marginTop:"16px"},error:h,onChange:function(e){g(e.target.value)},label:"Source url",variant:"outlined",fullWidth:!0})),r.a.createElement(Ze.a,null,r.a.createElement(je.a,{onClick:function(){return l(!1)},color:"primary"},"Cancel"),r.a.createElement(je.a,{autoFocus:!0,color:"primary",onClick:function(){!function(){var e=!1;return(o.length<=3||p.length<=3)&&(e=!0),E(e),e}()&&a(o,p),l(!1)}},"Add"))))})),at="";var nt=Object(_.a)((function(e){return{}}))((function(e){var t=e.classes,a=e.placeInfo,l=e.setPlaceInfo,c=e.selectedSources,i=e.setSelectedSources,o=e.error,s=e.setError,u=e.checkErrors,d=function(e,t){var n=e.target,r=n.name,c=n.value,i=n.id,u=Object.assign({},a,{}),d=Object.assign({},o,{});""!==i?u[i]=D(t[0]):u[r]=c,console.log("Updated place",u),s(d),l(u)};Object(n.useEffect)((function(){Ce.Source.getSources().then((function(e){A(e)})).catch((function(e){}))}),[]),console.log(a.averageTimeSpent);var p=Object(n.useState)(""!==a.price),g=Object(m.a)(p,2),f=g[0],b=g[1],h=Object(n.useState)(0!==parseInt(a.averageTimeSpent)),E=Object(m.a)(h,2),v=E[0],O=E[1],y=Object(n.useState)(!1),j=Object(m.a)(y,2),S=j[0],k=j[1],P=Object(n.useState)([]),w=Object(m.a)(P,2),I=w[0],A=w[1];function D(e){var t="";return qe.map((function(a){a.value===e&&(t=a.label)})),t}return r.a.createElement("div",null,r.a.createElement(C.a,{variant:"h6"},"Basic place information"),r.a.createElement("br",null),r.a.createElement(ne.a,{required:!0,error:u&&o.name,label:"Place name",style:{margin:8},placeholder:"Enter the place name",fullWidth:!0,value:a.name,name:"name",onChange:function(e){return d(e)},variant:"outlined",margin:"normal",InputLabelProps:{shrink:!0}}),r.a.createElement(ne.a,{label:"Place description",style:{margin:8},placeholder:"Describe the place thoroughly",fullWidth:!0,multiline:!0,name:"description",value:a.description,onChange:function(e){return d(e)},variant:"outlined",rows:4,margin:"normal",InputLabelProps:{shrink:!0}}),r.a.createElement(ne.a,{label:"Phone number",style:{margin:8},placeholder:"Enter phone number",fullWidth:!0,name:"phoneNumber",value:a.phoneNumber,onChange:function(e){return d(e)},variant:"outlined",margin:"normal",InputLabelProps:{shrink:!0}}),r.a.createElement(ne.a,{label:"Website",style:{margin:8},placeholder:"Enter website",fullWidth:!0,name:"website",value:a.website,onChange:function(e){return d(e)},variant:"outlined",margin:"normal",InputLabelProps:{shrink:!0}}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(Je,{id:"source",label:"Select sources",options:I,setOptions:A,setSelectedOptions:i,selectedOptions:c}),r.a.createElement(je.a,{variant:"text",color:"primary",size:"small",className:t.button,onClick:function(){return k(!0)},startIcon:r.a.createElement(ke.a,null)},"Add missing source"),r.a.createElement(tt,{action:function(e,t){Ce.Source.addSource({name:e,url:t}).then((function(e){A([].concat(Object(We.a)(I),[e])),i([].concat(Object(We.a)(c),[e]))})).catch((function(e){console.log(e)}))},open:S,setDialogOpen:k}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(Fe.a,{control:r.a.createElement(ze.a,{checked:f,onChange:function(){b((function(e){var t=Object.assign({},a,{});return!1===e?(at=t.price,t.price="",l(t)):(t.price=at,l(t)),!e}))},name:"price",color:"primary"}),label:"Price",labelPlacement:"start"}),r.a.createElement(He.a,{id:"price",onChange:d,disabled:!f,value:qe.map((function(e){if(e.label===a.price)return e.value})),style:{width:"60%",marginLeft:"48px"},defaultValue:0,getAriaValueText:D,"aria-labelledby":"discrete-slider-always",step:25,marks:qe})),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(Fe.a,{control:r.a.createElement(ze.a,{checked:v,onChange:function(){return O((function(e){var t=Object.assign({},a,{});return t.averageTimeSpent=!0===e?0:30,l(t),!e}))},color:"primary"}),label:"Average time Spent",labelPlacement:"start"}),r.a.createElement(Ue.a,{variant:"outlined",style:{width:"60%",marginLeft:"48px"}},r.a.createElement(Ve.a,null,"Minutes"),r.a.createElement(Ke.a,{disabled:!v,native:!0,value:parseInt(a.averageTimeSpent,10),onChange:d,label:"Average Time spent",inputProps:{name:"averageTimeSpent"}},r.a.createElement("option",{disabled:!0,value:"0"}),Ge.map((function(e){return r.a.createElement("option",{value:parseInt(e.value,10)}," ",e.value)}))))))})),rt=a(55),lt=a.n(rt),ct=a(111),it=a(416),ot=a(952),st=a(951),ut=a(953),dt=function(e){e.index;var t=e.onItemDelete,a=e.photo,n=e.margin,l=e.direction,c=e.top,i=e.left,o={imgContainer:{margin:n,display:"inline",position:"relative",width:"300px",height:"300px"}};"column"===l&&(o.imgContainer.position="absolute",o.imgContainer.imgStyle.left=i,o.imgContainer.imgStyle.top=c);return r.a.createElement(st.a,{style:o.imgContainer},r.a.createElement(ot.a,{style:{height:0,paddingTop:"80%"},image:a.src}),r.a.createElement(ut.a,{disableSpacing:!0},r.a.createElement(je.a,{variant:"contained",color:"secondary",startIcon:r.a.createElement(ee.a,null),onClick:function(e){t(a)}},"Delete")))},mt=Object(ct.b)((function(e){return r.a.createElement(dt,e)})),pt=Object(ct.a)((function(e){var t=e.items,a=e.onItemDelete;return r.a.createElement(it.a,{photos:t,renderImage:function(e){return r.a.createElement(mt,Object.assign({},e,{onItemDelete:a}))}})}));var gt=function(e){var t=e.setPhotos,a=e.photos,n=e.srcName,l=e.keyName,c=a.map((function(e){return{key:e[l].toString(),src:e[n],width:1,height:1}}));return r.a.createElement("div",null,r.a.createElement(pt,{distance:10,items:c,onSortEnd:function(e){var n=e.oldIndex,r=e.newIndex;t(Object(ct.c)(a,n,r))},axis:"xy",onItemDelete:function(e){t(a.filter((function(t){return t[l].toString()!==e.key})))}}))},ft=a(440),bt=["image/jpeg","image/png","image/bmp","image/jpg"];var ht=Object(_.a)((function(e){return{}}))((function(e){var t=e.onCloseCallback,a=e.open,l=e.onFinishCallback,c=Object(n.useState)(!1),i=Object(m.a)(c,2),o=i[0],s=i[1];return r.a.createElement("div",null,r.a.createElement(Xe.a,{"aria-labelledby":"customized-dialog-title",open:a,fullWidth:!0},r.a.createElement(Qe.a,{id:"customized-dialog-title"},"Photo upload"),o&&r.a.createElement(re.a,{variant:"query"}),r.a.createElement(et.a,{dividers:!0},r.a.createElement(ft.a,{acceptedFiles:bt,maxFileSize:25e6,dropzoneProps:{disabled:o},filesLimit:1,onDrop:function(e){return function(e){s(!0);var t=e[0],a=new FormData;a.append("image",t),Ce.Photos.uploadPhoto(a).then((function(e){l(e)})).catch((function(e){l()})).finally((function(){s(!1)}))}(e)}})),r.a.createElement(Ze.a,null,r.a.createElement(je.a,{onClick:t,color:"primary"},"Cancel"))))}));var Et=lt()((function(e){return{outline:{margin:e.spacing(1),padding:e.spacing(1),width:"100%"},button:{margin:e.spacing(2)}}}))((function(e){var t=e.classes,a=e.setPhotos,l=e.photos,c=Object(n.useState)(!1),i=Object(m.a)(c,2),o=i[0],s=i[1];return r.a.createElement("div",null,r.a.createElement(C.a,{variant:"h6"},"Photos"),r.a.createElement(st.a,{variant:"outlined",className:t.outline},l.length>0&&r.a.createElement(gt,{keyName:"photoId",srcName:"url",setPhotos:a,photos:l}),r.a.createElement(je.a,{variant:"text",color:"primary",size:"small",style:{width:"15%"},className:t.button,onClick:function(){return s(!0)},startIcon:r.a.createElement(ke.a,null)},"Add photo"),r.a.createElement(ht,{open:o,onFinishCallback:function(e){return function(e){s(!1),null!=e&&a([].concat(Object(We.a)(l),[e]))}(e)},onCloseCallback:function(){return s(!1)}})))})),vt=a(426),Ot=a.n(vt),yt=a(150),Ct=a.n(yt),jt=a(128),St=a(127),kt=a(430),Pt=a.n(kt);var wt=lt()((function(e){return{content:{margin:e.spacing(1)},autocomplete:{width:"200px",height:"40px",fontSize:"14px",border:"0",borderBottom:"2px solid grey",outline:"0",marginBottom:"4px"}}}))((function(e){var t=e.classes,a=e.locationData,l=e.setLocationData,c=e.mapHeight,i=e.selectedParkingCallback,o=e.changedParkingMarkerCallback,s=e.addParkingCallback;function u(e){var t=r.a.useRef();return t.current=e,r.a.useCallback((function(){var e=t.current;if("function"===typeof e)return e.apply(this,arguments)}),[])}Ct.a.setApiKey("AIzaSyDGFjZHSoRrZ2AEO0ONXvjuN4RiCmknXf8"),Ct.a.enableDebug();var d=u(i),m=u(s);function p(e,t,a,n){Ct.a.fromLatLng(e,t).then((function(r){var l=r.results[0].formatted_address,c=r.results[0].address_components;if(void 0!==c){var i=f(c),o=b(c);a(e,t,l,i,o),g(i,o,l,e,t,n)}}),(function(e){console.error(e)}))}function g(e,t,n,r,c,i){var s=Object.assign({},a,{});s.city=e,s.country=t,s.address=n,s.latitude=r,s.longitude=c,l(s),s,void 0!==o&&o(e,n,t,r,c,i)}var f=function(e){if(void 0!==e)for(var t=0;t<e.length;t++)if(e[t].types[0]&&"administrative_area_level_2"===e[t].types[0])return e[t].long_name},b=function(e){if(void 0!=e)for(var t=0;t<e.length;t++)if(e[t].types[0]&&"country"===e[t].types[0])return e[t].long_name},h=Object(jt.a)(Object(jt.b)({containerElement:r.a.createElement("div",{style:{height:c}}),mapElement:r.a.createElement("div",{style:{height:"100%"}})}),Object(jt.c)({infoWindow:{show:!1}},{toggleDraggableInfoWindow:function(e){e.draggableMarkerLocation;return function(e){return{infoWindow:{show:e}}}}}),St.withGoogleMap)((function(e){return r.a.createElement(St.GoogleMap,{defaultZoom:12,center:{lat:e.markerLocation.latitude,lng:e.markerLocation.longitude},defaultCenter:{lat:e.markerLocation.latitude,lng:e.markerLocation.longitude}},r.a.createElement(St.Marker,{name:"Dolores park",visible:!0,draggable:!0,onClick:function(){return e.toggleDraggableInfoWindow(!0)},onDragEnd:function(t){return a=t,n=e.markerChanger,r=e.onParkingDataChange,void p(a.latLng.lat(),a.latLng.lng(),n,r);var a,n,r},position:{lat:e.markerLocation.latitude,lng:e.markerLocation.longitude}},e.infoWindow.show&&s&&r.a.createElement(St.InfoWindow,{onCloseClick:function(){e.toggleDraggableInfoWindow(!1)}},r.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},e.markerLocation.address,r.a.createElement(je.a,{onClick:function(){m(e.markerLocation)},variant:"text",color:"secondary",size:"large",className:t.button,startIcon:r.a.createElement(ke.a,null)},"Add new parking")))),(a=e.onToggleOpen,n=e.infoWindows,e.parkingData.map((function(e,l){var c=parseFloat(e.latitude),i=parseFloat(e.longitude);return r.a.createElement(St.Marker,{key:e.parkingId,position:{lat:c,lng:i},options:{icon:"https://developers.google.com/maps/documentation/javascript/examples/full/images/parking_lot_maps.png"},onClick:function(){return a(e.parkingId)}},n[l].showInfo&&r.a.createElement(St.InfoWindow,null,r.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},e.address,r.a.createElement(je.a,{onClick:function(){d(e)},variant:"text",color:"secondary",size:"large",className:t.button,startIcon:r.a.createElement(ke.a,null)},"Add parking"))))}))));var a,n})),E=function(e,t,a){var n,r,l,c=e.target.value;if(13===e.which||13===e.keyCode){if(/[a-zA-Z]+/.test(c))n=c,r=t,l=a,Ct.a.fromAddress(n).then((function(e){var t=e.results[0].geometry.location,a=t.lat,n=t.lng,c=e.results[0].formatted_address,i=e.results[0].address_components;if(void 0!==i){var o=f(i),s=b(i);console.log(a,n),r(a,n,c,o,s),console.log("Pateko"),g(o,s,c,a,n,l)}}),(function(e){console.error(e)}));else{var i=c.split(/[ ,]+/);2===i.length&&p(parseFloat(i[0]),parseFloat(i[1]),t,a)}return!1}return!0},v=Object(jt.a)(Object(jt.b)(),Object(jt.c)({draggableMarkerLocation:{latitude:a.latitude,longitude:a.longitude,address:a.address},parkingData:[],infoWindows:[]},{onMarkerLocationChanged:function(e){e.draggableMarkerLocation;return function(e,t,a,n,r){return{draggableMarkerLocation:{latitude:e,longitude:t,address:a,city:n,country:r}}}},onParkingDataChange:function(e){e.parkingData;return function(e){return{parkingData:e.map((function(e){return e})),infoWindows:e.map((function(e){return{parkingId:e.parkingId,showInfo:!1}}))}}},onToggleOpen:function(e){var t=e.infoWindows;return function(e){return{infoWindows:t.map((function(t,a){return t.showInfo=e===t.parkingId,t}))}}}}))((function(e){return r.a.createElement("div",{className:t.content},r.a.createElement(Ot.a,{onKeyPress:function(t){E(t,e.onMarkerLocationChanged,e.onParkingDataChange)},className:t.autocomplete,onPlaceSelected:function(t){!function(e,t,a){var n=e.formatted_address,r=e.address_components;if(void 0!==r){var l=f(r),c=b(r),i=e.geometry.location.lat(),o=e.geometry.location.lng();t(i,o,n,l,c),g(l,c,n,i,o,a)}}(t,e.onMarkerLocationChanged,e.onParkingDataChange)},types:["(regions)"]}),r.a.createElement(S.a,{"aria-label":"delete",className:t.margin,size:"small"},r.a.createElement(Pt.a,{fontSize:"large",color:"primary",onClick:function(){var t,a;t=e.onMarkerLocationChanged,a=e.onParkingDataChange,navigator.geolocation.getCurrentPosition((function(e){var n=e.coords.latitude,r=e.coords.longitude;Ct.a.fromLatLng(n,r).then((function(e){var l=e.results[0].formatted_address,c=e.results[0].address_components;if(void 0!==c){var i=f(c),o=b(c);t(n,r,l,i,o),g(i,o,l,n,r,a)}}),(function(e){})),console.log("Latitude is :",e.coords.latitude),console.log("Longitude is :",e.coords.longitude)}),(function(e){alert(e.message+"\n"+JSON.stringify(e))}))}})),r.a.createElement(h,{markerChanger:e.onMarkerLocationChanged,markerLocation:e.draggableMarkerLocation,onParkingDataChange:e.onParkingDataChange,parkingData:e.parkingData,onToggleOpen:e.onToggleOpen,infoWindows:e.infoWindows}))}));return Object(n.useMemo)((function(){return r.a.createElement(v,null)}),[])}));var It=lt()((function(e){return{outline:{margin:e.spacing(1),padding:e.spacing(1),width:"100%"},button:{margin:e.spacing(2)}}}))((function(e){var t=e.locationData,a=e.setLocationData;function n(e){var n=e.target,r=n.name,l=n.value,c=Object.assign({},t,{});c[r]=l,a(c)}return r.a.createElement("div",null,r.a.createElement(C.a,{variant:"h6"},"Place location"),r.a.createElement("br",null),r.a.createElement(C.a,{variant:"subtitle1"},"Select place location from map"),r.a.createElement("br",null),r.a.createElement(wt,{mapHeight:200,locationData:t,setLocationData:a}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(C.a,{variant:"subtitle1"},"Place location"),r.a.createElement("br",null),r.a.createElement(ne.a,{required:!0,label:"Address",style:{margin:8},placeholder:"Enter place address",fullWidth:!0,disabled:!0,value:t.address,name:"address",onChange:function(e){n(e)},variant:"outlined",margin:"normal",InputLabelProps:{shrink:!0}}),r.a.createElement(ne.a,{required:!0,label:"City",disabled:!0,style:{margin:8},placeholder:"Enter place city",fullWidth:!0,value:t.city,name:"city",onChange:function(e){n(e)},variant:"outlined",margin:"normal",InputLabelProps:{shrink:!0}}),r.a.createElement(ne.a,{required:!0,label:"Country",style:{margin:8},placeholder:"Enter place country",fullWidth:!0,disabled:!0,value:t.country,name:"country",onChange:function(e){n(e)},variant:"outlined",rows:4,margin:"normal",InputLabelProps:{shrink:!0}}))}));var At=lt()((function(e){return{outline:{margin:e.spacing(1),padding:e.spacing(1),width:"100%"},button:{margin:e.spacing(2)},paper:{padding:e.spacing(2),display:"flex",alignItems:"center",justifyContent:"space-between",marginTop:"8px"}}}))((function(e){var t=e.classes,a=e.parkingMarkerData,l=e.setParkingMarkerData,c=e.allSelectedParkingData,i=e.setAllSelectedParkingData,o=Ne().addConfig;function s(e){for(var t=0;t<c.length;t++)if(c[t].address===e.address)return!0;return!1}var u=function(e,t,a){Ce.Parking.getParkingByLocation("?lat="+e+"&lng="+t).then((function(e){var t=[];console.log("ParkingData",e),e.map((function(e){t.push(e)})),a(e)})).catch((function(e){}))},d=Object(ct.b)((function(e){var a=e.value;return r.a.createElement(J.a,{className:t.paper,elevation:3},r.a.createElement(C.a,null,a.address),r.a.createElement(S.a,{"aria-label":"delete",className:t.margin,onClick:function(){return i(c.filter((function(e){return e.parkingId!==a.parkingId})))}},r.a.createElement(ee.a,{fontSize:"small"})))}));Object(n.useEffect)((function(){u(a.lat,a.lng)}),[]);var m=Object(ct.a)((function(e){var t=e.items;return r.a.createElement("ul",null,t.map((function(e,t){return r.a.createElement(d,{key:t,index:t,value:e})})))}));return r.a.createElement("div",null,r.a.createElement(C.a,{variant:"h6"},"Add parking"),r.a.createElement("br",null),r.a.createElement(C.a,{variant:"subtitle1"},"Select parking"),r.a.createElement(wt,{mapHeight:350,locationData:a,setLocationData:l,selectedParkingCallback:function(e){s(e)||i((function(t){return[].concat(Object(We.a)(t),[e])}))},changedParkingMarkerCallback:function(e,t,a,n,r,l){u(parseFloat(n),parseFloat(r),l)},addParkingCallback:function(e){s(e)||Ce.Parking.insertNewParking([e]).then((function(e){i((function(t){return[].concat(Object(We.a)(t),[e[0]])})),o(!0)})).catch((function(e){o(!1)}))}}),r.a.createElement("br",null),r.a.createElement(C.a,{variant:"subtitle1"},"Selected parking locations"),r.a.createElement(m,{distance:10,items:c,onSortEnd:function(e){var t=e.oldIndex,a=e.newIndex;i(Object(ct.c)(c,t,a))}}))}));var Dt=Object(_.a)((function(e){return{root:{margin:0,padding:e.spacing(2)},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}}))((function(e){e.classes;var t=e.open,a=e.onCloseCallback,l=e.header,c=(e.description,e.textFieldLabel),i=e.action,o=Object(n.useState)(""),s=Object(m.a)(o,2),u=s[0],d=s[1],p=Object(n.useState)(!1),g=Object(m.a)(p,2),f=g[0],b=g[1];return r.a.createElement("div",null,r.a.createElement(Xe.a,{"aria-labelledby":"customized-dialog-title",open:t,fullWidth:!0},r.a.createElement(Qe.a,{id:"customized-dialog-title"},l),r.a.createElement(et.a,{dividers:!0},r.a.createElement(ne.a,{error:f,onChange:function(e){d(e.target.value)},label:c,variant:"outlined",fullWidth:!0})),r.a.createElement(Ze.a,null,r.a.createElement(je.a,{onClick:a,color:"primary"},"Cancel"),r.a.createElement(je.a,{autoFocus:!0,color:"primary",onClick:function(){!function(){var e=!1;return u.length<=3&&(e=!0),b(e),e}()&&i(u)}},"Add"))))}));var xt=lt()((function(e){return{outline:{margin:e.spacing(1),padding:e.spacing(1),width:"100%"},button:{margin:e.spacing(2)},paper:{padding:e.spacing(2),display:"flex",alignItems:"center",justifyContent:"space-between",marginTop:"8px"}}}))((function(e){var t=e.classes,a=e.selectedTags,l=e.setSelectedTags,c=e.selectedCategories,i=e.setSelectedCategories,o=Object(n.useState)(!1),s=Object(m.a)(o,2),u=s[0],d=s[1],p=Object(n.useState)(!1),g=Object(m.a)(p,2),f=g[0],b=g[1],h=Object(n.useState)([]),E=Object(m.a)(h,2),v=E[0],O=E[1],y=Object(n.useState)([]),j=Object(m.a)(y,2),S=j[0],k=j[1];return Object(n.useEffect)((function(){Ce.Tags.getAllTags().then((function(e){k(e),console.log(e)})).catch((function(e){console.log(e)})),Ce.Categories.getAllCategories().then((function(e){O(e),console.log(e)})).catch((function(e){console.log(e)}))}),[]),r.a.createElement("div",null,r.a.createElement(C.a,{variant:"h6"},"Place discovery settings"),r.a.createElement("br",null),r.a.createElement(C.a,{variant:"subtitle1"},"Select tags"),r.a.createElement(Je,{label:"Select tags",id:"tagId",options:S,setOptions:k,selectedOptions:a,setSelectedOptions:l}),r.a.createElement(je.a,{variant:"text",color:"primary",size:"small",className:t.button,onClick:function(){return d(!0)},startIcon:r.a.createElement(ke.a,null)},"Add missing tag"),r.a.createElement(Dt,{action:function(e){Ce.Tags.addTag([{name:e}]).then((function(t){var n={tagId:t[0],name:e};k([].concat(Object(We.a)(S),[n])),l([].concat(Object(We.a)(a),[n])),d(!1)})).catch((function(e){console.log(e)}))},textFieldLabel:"Name",open:u,onCloseCallback:function(){return d(!1)},header:"Add a new tag"}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(C.a,{variant:"subtitle1"},"Select categories"),r.a.createElement(Je,{label:"Select categories",id:"categoryId",options:v,setOptions:O,selectedOptions:c,setSelectedOptions:i}),r.a.createElement(je.a,{variant:"text",color:"primary",size:"small",className:t.button,onClick:function(){return b(!0)},startIcon:r.a.createElement(ke.a,null)},"Add missing category"),r.a.createElement(Dt,{action:function(e){Ce.Categories.addCategory([{name:e}]).then((function(t){var a={categoryId:t[0],name:e};O([].concat(Object(We.a)(v),[a])),i([].concat(Object(We.a)(c),[a])),b(!1)})).catch((function(e){console.log(e)}))},textFieldLabel:"Name",open:f,onCloseCallback:function(){return b(!1)},header:"Add a new category"}))})),Lt=[{isDefault:!0,periods:[{openDay:0,closeDay:0,openTime:"08:00",closeTime:"17:00"},{openDay:1,closeDay:1,openTime:"08:00",closeTime:"17:00"},{openDay:2,closeDay:2,openTime:"08:00",closeTime:"17:00"},{openDay:3,closeDay:3,openTime:"08:00",closeTime:"17:00"},{openDay:4,closeDay:4,openTime:"08:00",closeTime:"17:00"}]}],Nt=a(957),Tt=a(124),_t=a.n(Tt),Rt=a(980),Ft=a(955),Bt=a(977),Mt=a(43),Wt=a.n(Mt),Ht=Object(f.a)({root:{minWidth:275,width:"20%",padding:"2px",marginRight:"16px"}});function qt(e){var t=e.review,a=Ht();return r.a.createElement(st.a,{className:a.root,variant:"outlined"},r.a.createElement(Ft.a,null,r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(Bt.a,{alt:"Cindy Baker",src:t.photoUrl?t.photoUrl:"/broken-image.jpg"}),r.a.createElement("div",{style:{display:"flex",flexDirection:"column",marginLeft:"8px"}},r.a.createElement(C.a,{title:"subtitle1"},t.name," ",t.surname),r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},r.a.createElement(Rt.a,{size:"small",name:"read-only",value:t.rating,readOnly:!0}),r.a.createElement(C.a,{title:"subtitle1"},"+"+t.upvotes)))),r.a.createElement(C.a,{title:"subtitle1"},Wt()(t.timeAdded).format("LL")),r.a.createElement("div",{style:{marginTop:"16px"}},t.title),r.a.createElement(C.a,{title:"subtitle1"},t.review)))}var Gt=a(283),zt=a.n(Gt),Ut=a(981),Vt=a(969);var Kt=lt()((function(e){return{reviewsInfo:{display:"flex"},reviews:{display:"flex",width:"100%",margin:e.spacing(2),overflowX:"scroll"},sortingButtons:{padding:e.spacing(2)}}}))((function(e){var t=e.classes,a=e.placeInfo,l=Object(n.useState)([]),c=Object(m.a)(l,2),i=c[0],o=c[1],s=Object(n.useState)(!0),u=Object(m.a)(s,2),d=u[0],p=u[1],g=Object(n.useState)(1),f=Object(m.a)(g,2),b=(f[0],f[1]),h=r.a.useState(null),E=Object(m.a)(h,2),v=E[0],O=E[1],y=Boolean(v),j=y?"simple-popover":void 0,k=Object(n.useState)("mostRated"),P=Object(m.a)(k,2),w=P[0],I=P[1];function A(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"?p="+a.placeId;Ce.Reviews.getPlaceReviews(e).then((function(e){o((function(t){return[].concat(Object(We.a)(t),Object(We.a)(e.list))})),p(!1)})).catch((function(e){p(!1)}))}Object(n.useEffect)((function(){A("?p="+a.placeId+"&page=1&o="+w)}),[w]);var D=zt()((function(e){return function(e){Math.round(e.target.scrollWidth-e.target.scrollLeft-0)<=e.target.clientWidth&&!d&&i.length>0&&i.length<a.totalReviews&&(p(!0),b((function(e){return A("?p="+a.placeId+"&page="+(e+1)+"&o="+w),e+1})))}(e)}),200),x=function(){O(null)};return r.a.createElement("div",null,r.a.createElement(C.a,{variant:"h6"},"Reviews",r.a.createElement("br",null),i.length>0?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},r.a.createElement("div",{className:t.reviewsInfo},r.a.createElement(Rt.a,{name:"read-only",value:a.overallStarRating,precision:.2,readOnly:!0}),r.a.createElement(C.a,{style:{marginLeft:"8px"},variant:"subtitle1"},a.totalReviews," reviews")),r.a.createElement(Z.a,{"aria-describedby":j,title:"Filter list"},r.a.createElement(S.a,{"aria-label":"filter list",onClick:function(e){O(e.currentTarget)}},r.a.createElement(_e.a,null))),r.a.createElement(Re.a,{id:j,open:y,anchorEl:v,onClose:x,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},r.a.createElement(Ut.a,{className:t.sortingButtons,"aria-label":"gender",value:w,name:"gender1",onChange:function(e){var t=e.target,a=(t.name,t.value);I(a),o([]),b(1),x()}},r.a.createElement(Fe.a,{value:"mostRated",control:r.a.createElement(Vt.a,null),label:"Most rated"}),r.a.createElement(Fe.a,{value:"newest",control:r.a.createElement(Vt.a,null),label:"Newest"})))),r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},r.a.createElement(C.a,null,"Showing: ",i.length," out of ",a.totalReviews),r.a.createElement(C.a,null,"Sorting by: ",w)),r.a.createElement("div",{className:t.reviews,onScroll:function(e){return function(e){e.persist(),D(e)}(e)}},i.map((function(e){return r.a.createElement(qt,{review:e})})))):r.a.createElement(C.a,null," No reviews for this place")),r.a.createElement("br",null),d?r.a.createElement(re.a,null):null)})),$t=r.a.createContext({title:"",setTitle:function(){}});function Yt(e){var t=e.children,a=Object(n.useState)("Home"),l=Object(m.a)(a,2),c=l[0],i=l[1],o={title:c,setTitle:function(e){return i(e)}};return r.a.createElement($t.Provider,{value:o},t)}function Jt(){var e=Object(n.useContext)($t);return{title:e.title,setTitle:e.setTitle}}var Xt=a(432),Zt=a.n(Xt),Qt=a(959),ea=a(290),ta=a.n(ea),aa=a(978),na=a(227),ra=a.n(na),la=(a(744),a(956)),ca=a(431),ia=a.n(ca);var oa=Object(_.a)((function(e){return{root:{display:"flex",justifyContent:"space-between",margin:e.spacing(.5),alignItems:"center",flexFlow:"row wrap"},picker:{margin:e.spacing(.5),width:"30%"},intervalRightSide:{display:"flex",alignItems:"center"},intervalLeftSide:{}}}))((function(e){var t=e.classes,a=e.intervals,l=e.index,c=e.setIntervals,i=a[l],o=Object(n.useState)(null!=i.lastAccommodation),s=Object(m.a)(o,2),u=s[0],d=s[1],g=Object(n.useState)(null==i.lastAccommodation?i.closeTime:i.lastAccommodation),f=Object(m.a)(g,2),b=f[0],h=f[1],E=function(e,t){var n=a[l];return Wt()(e,"HH:mm").isBefore(Wt()(t,"HH:mm"))?n.openDay+1>6?0:n.openDay+1:n.openDay},v=function(){c((function(e){return e.filter((function(e,t){return t!==l}))}))};Object(n.useEffect)((function(){c((function(e){return e.map((function(e,t){return l===t?Object(p.a)(Object(p.a)({},e),{},{lastAccommodation:u?b.toString():null}):e}))}))}),[b,u]);var O=ia()(),y=Object(la.a)(O.breakpoints.only("lg"));return r.a.createElement("div",{className:t.root},r.a.createElement("div",{className:t.intervalLeftSide},r.a.createElement(aa.a,{margin:"normal",ampm:!1,label:"Opens",className:t.picker,format:"HH:mm",value:Wt()(i.openTime,"HH:mm"),onChange:function(e){c((function(t){return t.map((function(t,a){return l===a?Object(p.a)(Object(p.a)({},t),{},{openTime:Wt()(e).format("HH:mm").toString(),closeDay:E(t.closeTime,e)}):t}))}))},InputProps:{disableUnderline:!0}}),r.a.createElement(aa.a,{margin:"normal",ampm:!1,className:t.picker,label:"Closes",format:"HH:mm",value:Wt()(i.closeTime,"HH:mm"),onChange:function(e){c((function(t){return t.map((function(t,a){return l===a?Object(p.a)(Object(p.a)({},t),{},{closeTime:Wt()(e).format("HH:mm").toString(),closeDay:E(e,t.openTime)}):t}))}))},InputProps:{disableUnderline:!0}}),a[l].closeDay!==a[l].openDay&&r.a.createElement(r.a.Fragment,null,r.a.createElement(C.a,{variant:"subtitle1"},r.a.createElement(ra.a,{style:{marginRight:"10px"}}),"Closes the next day")),!y&&r.a.createElement(je.a,{color:"primary",onClick:v},r.a.createElement(ta.a,null))),r.a.createElement("div",{className:t.intervalRightSide},r.a.createElement(X.a,{checked:u,onChange:function(){return d((function(e){return!e}))}}),r.a.createElement(aa.a,{margin:"normal",ampm:!1,label:"Last accommodation",format:"HH:mm",disabled:!u,value:Wt()(b.toString(),"HH:mm"),onChange:function(e){return h(Wt()(e).format("HH:mm").toString())},InputProps:{disableUnderline:!0}}),y&&r.a.createElement(je.a,{color:"primary",onClick:v},r.a.createElement(ta.a,null))))}));var sa=Object(_.a)((function(e){return{header:{display:"flex",justifyContent:"space-between"},root:{margin:e.spacing(.5),padding:e.spacing(.5)}}}))((function(e){var t=e.classes,a=e.scheduleData,l=(e.setScheduleData,e.openDay),c=e.onChange,i=Object(n.useState)(a.periods.filter((function(e){return e.openDay===l}))),o=Object(m.a)(i,2),s=o[0],u=o[1];return Object(n.useEffect)((function(){c(s,l),console.log(s)}),[s]),r.a.createElement("div",{className:t.root},r.a.createElement("div",{className:t.header},r.a.createElement(C.a,{variant:"h6"},["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"][l]),r.a.createElement(je.a,{color:"secondary",onClick:function(){u((function(e){return[].concat(Object(We.a)(e),[{openDay:l,closeDay:l,openTime:"08:00",closeTime:"18:00"}])}))}},r.a.createElement(ke.a,null))),s.map((function(e,t){return r.a.createElement(r.a.Fragment,null,r.a.createElement(j.a,{variant:"middle"}),r.a.createElement(oa,{index:t,intervals:s,setIntervals:u}))})))}));var ua=Object(_.a)((function(e){return{header:{display:"flex",justifyContent:"space-between"},root:{padding:e.spacing(2),margin:e.spacing(1)},pickerStyle:{margin:e.spacing(1)},headerLeft:{width:"100%",display:"flex",justifyContent:"left"}}}))((function(e){var t=e.classes,a=e.data,l=e.setData,c=e.index,i=Object(n.useState)(Object(We.a)(a.periods)),o=Object(m.a)(i,2),s=o[0],u=o[1],d=function(e,t){u((function(a){var n=a.filter((function(e){return e.openDay!==t}));return 0===e.length?Object(We.a)(n):[].concat(Object(We.a)(n),Object(We.a)(e))}))};return Object(n.useEffect)((function(){l((function(e){return e.map((function(e,t){return t===c?Object(p.a)(Object(p.a)({},e),{},{periods:s}):e}))}))}),[s]),r.a.createElement(J.a,{className:t.root},r.a.createElement("div",{className:t.header},r.a.createElement("div",{className:t.headerLeft},a.isDefault&&r.a.createElement(C.a,{variant:"h6"},"Date: Year round"),!a.isDefault&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Qt.a,{className:t.pickerStyle,views:["month","date"],label:"From",value:Wt()(a.from,"MM-DD"),onChange:function(e){l((function(t){return t.map((function(t,a){return a===c?Object(p.a)(Object(p.a)({},t),{},{from:Wt()(e).format("MM-DD").toString()}):t}))}))}}),r.a.createElement(Qt.a,{className:t.pickerStyle,views:["month","day"],label:"To",value:Wt()(a.to,"MM-DD"),onChange:function(e){l((function(t){return t.map((function(t,a){return a===c?Object(p.a)(Object(p.a)({},t),{},{to:Wt()(e).format("MM-DD").toString()}):t}))}))}}))),!a.isDefault&&r.a.createElement(je.a,{color:"secondary",onClick:function(){l((function(e){return e.filter((function(e,t){return c!==t}))}))}},r.a.createElement(Zt.a,null))),r.a.createElement("br",null),function(){for(var e=[],t=0;t<7;t++)e.push(r.a.createElement(sa,{scheduleData:a,onChange:d,setScheduleData:l,openDay:t,key:t}));return e}())}));var da=Object(_.a)((function(e){return{header:{display:"flex",justifyContent:"space-between",flexWrap:"wrap"}}}))((function(e){var t=e.classes,a=e.scheduleData,n=e.setScheduleData,l=e.isScheduleEnabled,c=e.setIsScheduleEnabled;return r.a.createElement("div",null,r.a.createElement("div",{className:t.header},r.a.createElement(C.a,{variant:"h6"},"Working schedule"),r.a.createElement(Fe.a,{control:r.a.createElement(ze.a,{checked:l,onChange:function(){return c((function(e){return!e}))},color:"primary"}),label:"Enable schedule for this place?"})),r.a.createElement("br",null),l&&r.a.createElement(r.a.Fragment,null,a.map((function(e,t){return r.a.createElement(ua,{data:e,index:t,setData:n})})),r.a.createElement(je.a,{style:{float:"right"},color:"secondary",onClick:function(){n((function(e){return[].concat(Object(We.a)(e),[{isDefault:!1,from:"01-01",to:"01-02",periods:[]}])}))}},r.a.createElement(ke.a,null))))}));var ma=Object(_.a)((function(e){var t,a;return{button:{margin:e.spacing(2)},paperContent:(t={marginTop:e.spacing(4)},Object(d.a)(t,e.breakpoints.down("lg"),{width:"95%",padding:e.spacing(2)}),Object(d.a)(t,e.breakpoints.up("lg"),{width:"70%",padding:e.spacing(4)}),t),root:{height:"100vh"},loader:{display:"flex",alignItems:"center",justifyContent:"center",width:"100vw",height:"100vh"},content:(a={display:"flex",flexDirection:"column",alignItems:"center",height:"calc(93vh - 64px)"},Object(d.a)(a,e.breakpoints.down("lg"),{width:"100%",padding:e.spacing(1)}),Object(d.a)(a,e.breakpoints.up("lg"),{width:"auto",padding:e.spacing(8)}),Object(d.a)(a,"overflowY","auto"),a),bottom:{display:"flex",alignItems:"center",justifyContent:"space-around",padding:e.spacing(1),height:"7vh"}}}))((function(e){var t=e.classes,a=e.match,l=Object(n.useState)({placeId:"",name:"",description:"",website:"",phoneNumber:"",hasSchedule:!1,isPublic:!1,isVerified:!0,overallStarRating:0,totalReviews:0,source:"",price:"",averageTimeSpent:"0"}),c=Object(m.a)(l,2),i=c[0],o=c[1],s=Object(n.useState)([]),u=Object(m.a)(s,2),d=u[0],p=u[1],g=Object(n.useState)([]),f=Object(m.a)(g,2),b=f[0],h=f[1],E=Object(n.useState)([]),v=Object(m.a)(E,2),O=v[0],y=v[1],C=Object(n.useState)({city:"",address:"",country:"",latitude:54.687157,longitude:25.279652}),j=Object(m.a)(C,2),S=j[0],k=j[1],P=Object(n.useState)({city:"",address:"",country:"",latitude:54.687157,longitude:25.279652}),w=Object(m.a)(P,2),I=w[0],A=w[1],D=Object(n.useState)([]),x=Object(m.a)(D,2),L=x[0],N=x[1],T=Object(n.useState)([]),R=Object(m.a)(T,2),F=R[0],B=R[1],M=Object(n.useState)(Lt),W=Object(m.a)(M,2),H=W[0],q=W[1],G=Object(n.useState)(!1),z=Object(m.a)(G,2),U=z[0],V=z[1],K=Object(n.useState)(a.params.placeId),$=Object(m.a)(K,2),Y=$[0],X=$[1],Z=Object(n.useState)(!0),Q=Object(m.a)(Z,2),ee=Q[0],te=Q[1],ae=Object(n.useState)(!1),ne=Object(m.a)(ae,2),le=ne[0],ce=ne[1],ie=Object(n.useState)({name:!1}),oe=Object(m.a)(ie,2),se=oe[0],ue=oe[1],de=Object(n.useState)(!1),me=Object(m.a)(de,2),pe=me[0],ge=me[1],fe=Ne().addConfig,be=Ae().addAlertConfig,he=Jt(),Ee=(he.title,he.setTitle),ve=Object(_.a)((function(e){return{root:{color:e.palette.getContrastText(_t.a[500]),backgroundColor:_t.a[500],"&:hover":{backgroundColor:_t.a[700]}}}}))(je.a);function Oe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:De.SNACKBAR_ERROR;fe(e,t),ce(!1)}function ye(){ge(!0),function(){for(var e=0,t=Object.keys(se);e<t.length;e++){var a=t[e];if(!0===se[a])return!0}return!1}()?be("Errors","Make sure you filled required fields",(function(){})):void 0===Y?be(De.DIALOG_PLACE_INSERT_TITLE,De.DIALOG_PLACE_INSERT,(function(){ce(!0),Ce.Places.insertPlace(_e()).then((function(e){X(e)})).catch((function(e){}))})):be(De.DIALOG_PLACE_UPDATE_TITLE,De.DIALOG_PLACE_UPDATE,(function(){ce(!0),Se()}))}function Se(){Promise.all([ke(),we(Y),Le(Y),xe(Y),Pe(Y),Te(Y),Ie(Y)]).then((function(e){Oe(!0,De.SNACKBAR_CHANGES_SAVED)})).catch((function(e){Oe(!1)}))}function ke(){console.log(_e()),Ce.Places.updatePlace(_e()).then((function(e){})).catch((function(e){}))}function Pe(e){Ce.ParkingPlace.updateParkingForPlace(L,"?p="+e).then((function(e){})).catch((function(e){}))}function we(e){Ce.TagsPlace.updateTagsForPlace(d,"?p="+e).then((function(e){})).catch((function(e){}))}function Ie(e){console.log("Hello"),Ce.SourcePlace.updateSourcesForPlace(F,"?p="+e).then((function(e){console.log(F)})).catch((function(e){}))}function xe(e){Ce.CategoriesPlace.updateCategoriesForPlace(b,"?p="+e).then((function(e){})).catch((function(e){}))}function Le(e){Ce.PhotoPlace.updatePhotoForPlace(O,"?p="+e).then((function(e){})).catch((function(e){}))}function Te(e){console.log(H),Ce.Schedule.updateScheduleForPlace(U?H:[],"?id="+e).then((function(e){})).catch((function(e){}))}function _e(){var e=Object.assign(i,S);return console.log(e),e}return Object(n.useEffect)((function(){console.log(Y),void 0!==Y?(console.log("Getting place location"),Ce.Places.getPlaceById("?full=true&p="+Y).then((function(e){var t;t=e,console.log("Got data:",t),o({placeId:t.placeId,name:t.name,description:t.description,website:t.website,phoneNumber:t.phoneNumber,hasSchedule:t.hasSchedule,isPublic:t.isPublic,isVerified:t.isVerified,overallStarRating:t.overallStarRating,totalReviews:t.totalReviews,price:t.price,averageTimeSpent:t.averageTimeSpent}),k({city:t.city,address:t.address,country:t.country,latitude:t.latitude,longitude:t.longitude}),B(t.sources),p(t.tags),h(t.categories),t.schedule.length>0?(q(Object(We.a)(t.schedule)),V(!0)):V(!1),N(t.parking),y(t.photos),te(!1),Ee("Editing place/"+e.name)})).catch((function(e){Oe(!1)}))):(Ee("Add new place"),console.log("Came here to add new place"),te(!1)),void 0!==Y&&!1===ee&&(console.log("Just added new place"),Promise.all([we(Y),Pe(Y),xe(Y),Le(Y),Te(Y),Ie(Y)]).then((function(e){Oe(!0,De.SNACKBAR_PLACE_INSERTED_SUCCESS)})).catch((function(e){Oe(!1)})))}),[Y]),Object(n.useEffect)((function(){!1===ee&&(console.log("Making this place public"),Se())}),[i.isPublic]),r.a.createElement("div",{className:t.root},ee?r.a.createElement("div",{className:t.loader},r.a.createElement(Nt.a,null)):r.a.createElement("div",{className:t.content},r.a.createElement(J.a,{elevation:4,className:t.paperContent},r.a.createElement(nt,{error:se,setError:ue,checkErrors:pe,placeInfo:i,setPlaceInfo:o,selectedSources:F,setSelectedSources:B})),void 0!==Y?r.a.createElement(J.a,{elevation:4,className:t.paperContent},r.a.createElement(Kt,{placeInfo:i})):null,r.a.createElement(J.a,{elevation:4,className:t.paperContent},r.a.createElement(Et,{photos:O,setPhotos:y})),r.a.createElement(J.a,{elevation:4,className:t.paperContent},r.a.createElement(It,{error:se,setError:ue,checkErrors:pe,locationData:S,setLocationData:k})),r.a.createElement(J.a,{elevation:4,className:t.paperContent},r.a.createElement(At,{allSelectedParkingData:L,setAllSelectedParkingData:N,parkingMarkerData:I,setParkingMarkerData:A})),r.a.createElement(J.a,{elevation:4,className:t.paperContent},r.a.createElement(xt,{selectedTags:d,setSelectedTags:p,selectedCategories:b,setSelectedCategories:h})),r.a.createElement(J.a,{elevation:4,className:t.paperContent},r.a.createElement(da,{isScheduleEnabled:U,setIsScheduleEnabled:V,setScheduleData:q,scheduleData:H}))),le?r.a.createElement(re.a,null):null,r.a.createElement(J.a,{elevation:1,className:t.bottom},!1===i.isVerified&&void 0!==Y?r.a.createElement(ve,{variant:"contained",color:"primary",onClick:function(){be(De.DIALOG_PLACE_VERIFY_TITLE,De.DIALOG_PLACE_VERIFY_MESSAGE,(function(){var e=Object.assign({},i,{});e.isPublic=1,e.isVerified=1,o(e)}))},className:t.button},"Verify place"):r.a.createElement(Fe.a,{control:r.a.createElement(ze.a,{checked:i.isPublic,onChange:function(){be(De.DIALOG_PLACE_PUBLISH_TITLE,i.isPublic?De.DIALOG_PLACE_UNPUBLISH_MESSAGE:De.DIALOG_PLACE_PUBLISH_MESSAGE,(function(){var e=Object.assign({},i,{});e.isPublic=!e.isPublic,o(e)}))},name:"isPublic"}),label:"Make this place public"}),r.a.createElement(je.a,{variant:"contained",color:"primary",onClick:function(){return ye()},className:t.button},"Save")))})),pa=a(228),ga=a.n(pa),fa=a(960),ba=a(282),ha=a.n(ba);function Ea(e){var t=e.categories;return null!=t&&r.a.createElement(Pe.a,{component:"ul",style:{display:"flex",justifyContent:"left",flexWrap:"wrap",listStyle:"none",padding:"0px"}},t.map((function(e,t){return r.a.createElement("li",{key:t},r.a.createElement(Ye.a,{variant:"outlined",style:{margin:"5px"},label:e.name}))})))}function va(e){var t=e.city,a=e.address,l=e.priceRange,c=e.rating;return r.a.createElement("div",null,null!=c&&r.a.createElement(n.Fragment,null,r.a.createElement(Rt.a,{readOnly:!0,value:c}),r.a.createElement("br",null)),(null!=a?a:"")+" "+(null!=t?t:"")," ",r.a.createElement("div",{style:{color:"green"}},l))}var Oa=lt()((function(e){var t;return{root:(t={},Object(d.a)(t,e.breakpoints.down("lg"),{width:"95%"}),Object(d.a)(t,e.breakpoints.up("lg"),{width:"28vw"}),Object(d.a)(t,"margin",e.spacing(1)),t),media:{height:0,paddingTop:"56.25%"},expand:{transform:"rotate(0deg)",marginLeft:"auto",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"},avatar:{backgroundColor:ha.a[500]}}}))((function(e){var t,a=e.classes,n=e.placeData;return r.a.createElement(st.a,{className:a.root},r.a.createElement(fa.a,{action:r.a.createElement(S.a,{"aria-label":"settings"},r.a.createElement(ga.a,null)),title:n.name,subheader:r.a.createElement(va,{city:n.city,address:n.address,priceRange:n.priceRange,rating:n.overallStarRating})}),null!=n.photos&&r.a.createElement(ot.a,{className:a.media,image:n.photos[0].url}),r.a.createElement(Ft.a,null,r.a.createElement(C.a,{variant:"body2",color:"textSecondary",component:"p"},null==(t=n.description)?"":t.length>500?t.substring(0,500)+"...":t),r.a.createElement(Ea,{categories:n.categories}),r.a.createElement(C.a,{variant:"body2",color:"textSecondary",component:"p"},n.website)),r.a.createElement(ut.a,{disableSpacing:!0}))})),ya=a(433),Ca=a.n(ya),ja=a(450),Sa=a(434),ka=a.n(Sa),Pa=a(144),wa=Object(f.a)((function(e){return{root:{padding:"2px 4px",display:"flex",alignItems:"center",margin:e.spacing(2)},iconButton:{padding:10},input:{marginLeft:e.spacing(1),flex:1},divider:{margin:4}}}));function Ia(e){var t=e.hint,a=e.searchCallback,n=wa(),l=Object(Pa.a)((function(e){return function(e){a(e.target.value)}(e)}),500);return r.a.createElement(J.a,{component:"form",className:n.root},r.a.createElement(ja.a,{className:n.input,placeholder:t,inputProps:{"aria-label":t},onChange:function(e){e.persist(),l(e)}}),r.a.createElement(S.a,{className:n.iconButton,"aria-label":"search"},r.a.createElement(ka.a,null)),r.a.createElement(j.a,{className:n.divider,orientation:"vertical"}))}var Aa=lt()((function(e){return{root:{overflow:"scroll",width:"100%",padding:e.spacing(1),height:"calc(100vh - 64px)",paddingTop:"9vh"},topBar:{height:"8vh",position:"absolute",width:"60%",marginLeft:"auto",marginRight:"auto",left:0,right:0,justifyContent:"center",zIndex:1},searchBox:{margin:e.spacing(1)}}}))((function(e){var t=e.classes,a=Object(n.useState)([]),l=Object(m.a)(a,2),c=l[0],i=l[1],o=Object(n.useState)(!1),s=Object(m.a)(o,2),u=s[0],d=s[1],p=Ne().addConfig;return r.a.createElement("div",{style:{position:"relative"}},r.a.createElement("div",{className:t.topBar},r.a.createElement(Ia,{searchCallback:function(e){var t;e.length>3&&(t=e,i([]),d(!0),Ce.Places.searchApiPlaces("?keyword="+encodeURI(t)).then((function(e){i(Object(We.a)(e))})).catch((function(e){p(!1,"The request did not go through.")})).finally((function(){d(!1)})))},hint:"Search api places",style:t.searchBox})),r.a.createElement("div",{className:t.root},r.a.createElement(Ca.a,{style:{margin:"0 auto"},elementType:"div",options:{isFitWidth:!0},disableImagesLoaded:!1,updateOnEachImageLoad:!1},c.map((function(e){return r.a.createElement(Oa,{key:e.placeId,placeData:e,style:{boxSizing:"border-box"}})})),0===c.length&&!u&&r.a.createElement(C.a,{variant:"subtitle1"},"No results"),u&&r.a.createElement(Nt.a,null))))})),Da=a(962);function xa(){return r.a.createElement(C.a,{variant:"body2",color:"textSecondary"},"Copyright \xa9 ","Traveldirection "," ",(new Date).getFullYear(),".")}var La=Object(f.a)((function(e){return{root:{display:"flex",flexDirection:"column",minHeight:"100vh"},main:{marginTop:e.spacing(8),marginBottom:e.spacing(2)},footer:{padding:e.spacing(3,2),marginTop:"auto",backgroundColor:"light"===e.palette.type?e.palette.grey[200]:e.palette.grey[800]}}}));var Na=a(92),Ta=Object(f.a)((function(e){return{root1:{overflow:"hidden",display:"flex",height:"100vh",background:"#F1F1F1"},appBar:{height:"64px",transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{width:"calc(100% - ".concat(240,"px)"),marginLeft:240,transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:e.spacing(2)},hide:{display:"none"},drawer:{width:240,flexShrink:0},drawerPaper:{width:240},drawerHeader:Object(p.a)(Object(p.a)({display:"flex",alignItems:"center",padding:e.spacing(0,1)},e.mixins.toolbar),{},{justifyContent:"flex-end"}),content:{width:"100vw",height:"100%",transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),marginLeft:-240},contentShift:{width:"100vw",height:"100%",transition:e.transitions.create("margin",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginLeft:0}}}));function _a(e){var t=Ta(),a=Object(b.a)(),l=Object(n.useState)(!1),c=Object(m.a)(l,2),i=c[0],o=c[1],s=Jt(),u=s.title,p=s.setTitle,f=Object(T.g)(),k=function(){o(!1)},w=function(e,t){k(),p(t),f.pathname===e&&he.go(0)};return r.a.createElement("div",{className:t.root1},r.a.createElement(E.a,null),r.a.createElement(v.a,{position:"fixed",className:Object(g.a)(t.appBar,Object(d.a)({},t.appBarShift,i))},r.a.createElement(O.a,null,r.a.createElement(S.a,{color:"inherit","aria-label":"open drawer",onClick:function(){o(!0)},edge:"start",className:Object(g.a)(t.menuButton,i&&t.hide)},r.a.createElement(P.a,null)),r.a.createElement(C.a,{variant:"h6",noWrap:!0},u))),r.a.createElement(h.a,{className:t.drawer,variant:"persistent",anchor:"left",open:i,classes:{paper:t.drawerPaper}},r.a.createElement("div",{className:t.drawerHeader},r.a.createElement(S.a,{onClick:k},"ltr"===a.direction?r.a.createElement(I.a,null):r.a.createElement(D.a,null))),r.a.createElement(j.a,null),r.a.createElement(y.a,null,r.a.createElement(x.a,{button:!0,component:N.a,to:"/app/",onClick:function(){return w("/app/","Home")}},r.a.createElement(L.a,null,"Home")),r.a.createElement(j.a,{light:!0}),r.a.createElement(x.a,{button:!0,component:N.a,to:"/app/places",onClick:function(){return w("/app/places","Places")}},r.a.createElement(L.a,null,"Places")),r.a.createElement(x.a,{button:!0,component:N.a,to:"/app/apiplaces",onClick:function(){return w("/app/apiplaces","Api places")}},r.a.createElement(L.a,null,"Explore API places")),r.a.createElement(x.a,{button:!0,component:N.a,to:"/app/addplace",onClick:function(){return w("/app/addplace","Add Place")}},r.a.createElement(L.a,null,"Add place")))),r.a.createElement("main",{className:Object(g.a)(t.content,Object(d.a)({},t.contentShift,i))},r.a.createElement("div",{className:t.drawerHeader}),r.a.createElement(T.d,null,r.a.createElement(T.b,{exact:!0,path:"/app",component:W}),r.a.createElement(T.b,{path:"/app/places",component:Me}),r.a.createElement(T.b,{path:"/app/addplace/:placeId?",component:ma}),r.a.createElement(T.b,{path:"/app/apiplaces",component:Aa}),r.a.createElement(T.b,{path:"/app/addplace",component:ma}),r.a.createElement(Na.a,{from:"*",to:"/404"}))))}var Ra=a(33),Fa=a(439),Ba=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ra.a,{utils:Fa.a},r.a.createElement(Yt,null,r.a.createElement(_a,null))))}}]),a}(n.Component),Ma=a(437),Wa=a.n(Ma),Ha=(a(864),r.a.createContext()),qa=function(e){var t=e.children,a=Object(n.useState)(null),l=Object(m.a)(a,2),c=l[0],i=l[1],o=Object(n.useState)(!0),s=Object(m.a)(o,2),u=s[0],d=s[1];return Object(n.useEffect)((function(){F.auth().onAuthStateChanged((function(e){e&&(i(e),console.log(Ee())),d(!1)}))}),[]),r.a.createElement(Ha.Provider,{value:{currentUser:c,isLoading:u}},t)};function Ga(){return r.a.createElement(C.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ","Traveldirection "," ",(new Date).getFullYear(),".")}var za=Object(f.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)},loaderMain:{width:"100%",height:"100%",alignItems:"center",justifyContent:"center",backgroundColor:"red"}}}));var Ua=a(442),Va=a(438),Ka=function(e){var t=e.component,a=Object(Ua.a)(e,["component"]);return r.a.createElement(Va.a,Object.assign({},a,{render:function(e){return!0===ve()?r.a.createElement(t,e):r.a.createElement(Na.a,{to:"/login"})}}))},$a=a(983),Ya=a(968);function Ja(e){var t=Ne(),a=t.config,n=t.removeConfig;return r.a.createElement($a.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:!!a,autoHideDuration:4e3,onClose:n},r.a.createElement(Ya.a,{onClose:n,severity:a?a.success?"success":"error":""},!!a&&a.message))}var Xa=a(965),Za=function(){var e=Ae(),t=e.alertConfig,a=e.removeAlertConfig;function n(){void 0!==t.onClose&&t.onClose(),a()}return r.a.createElement(Xe.a,{open:!!t,onClose:n,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(Qe.a,{id:"alert-dialog-title"},t?t.title:""),r.a.createElement(et.a,null,r.a.createElement(Xa.a,{id:"alert-dialog-description"},t?t.message:"")),r.a.createElement(Ze.a,null,r.a.createElement(je.a,{onClick:n,color:"primary"},"Close"),r.a.createElement(je.a,{onClick:t?function(){a(),t.func()}:{},color:"primary",autoFocus:!0},"Agree")))};a(876).config(),c.a.render(r.a.createElement(qa,null,r.a.createElement(T.c,{history:he},r.a.createElement(Le,null,r.a.createElement(Ie,null,r.a.createElement(Ja,null),r.a.createElement(Za,null),r.a.createElement(T.d,null,r.a.createElement(Na.a,{exact:!0,from:"/",to:"/app"}),r.a.createElement(Ka,{path:"/app",component:Ba}),r.a.createElement(T.b,{path:"/login",component:function(){var e=za(),t=Object(n.useState)(""),a=Object(m.a)(t,2),l=a[0],c=a[1],i=Object(n.useState)(""),o=Object(m.a)(i,2),s=o[0],u=o[1],d=Object(n.useState)(!1),p=Object(m.a)(d,2),g=p[0],f=p[1],b=Ne().addConfig,h=Object(n.useContext)(Ha),v=(h.currentUser,h.isLoading,function(){f(!0),F.auth().signInWithEmailAndPassword(l,s).then((function(e){f(!1),F.auth().currentUser.getIdToken(!0).then((function(e){console.log("Getting new access token"),M.a.set("access_token",e),he.push("/app")})).catch((function(e){b(!1,"Error receiving access token")}))})).catch((function(e){f(!1),b(!1,e.message)}))});return ve()?r.a.createElement(Na.a,{to:"/app"}):r.a.createElement(Da.a,{component:"main",maxWidth:"xs",onKeyPress:function(e){return 13!==(t=e).which&&13!==t.keyCode||(v(),!1);var t}},g&&r.a.createElement(re.a,null),r.a.createElement(E.a,null),r.a.createElement("div",{className:e.paper},r.a.createElement(Bt.a,{className:e.avatar},r.a.createElement(Wa.a,null)),r.a.createElement(C.a,{component:"h1",variant:"h5"},"Sign in"),r.a.createElement(ne.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,value:l,onChange:function(e){c(e.target.value)},id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0}),r.a.createElement(ne.a,{variant:"outlined",margin:"normal",required:!0,value:s,onChange:function(e){u(e.target.value)},fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password"}),r.a.createElement(je.a,{onClick:function(){v()},fullWidth:!0,variant:"contained",color:"primary",className:e.submit},"Sign In")),r.a.createElement(Pe.a,{mt:8},r.a.createElement(Ga,null)))}}),r.a.createElement(T.b,{path:"*",component:function(){var e=La();return r.a.createElement("div",{className:e.root},r.a.createElement(E.a,null),r.a.createElement(Da.a,{component:"main",className:e.main,maxWidth:"sm"},r.a.createElement(C.a,{variant:"h2",component:"h1",gutterBottom:!0},"Page not found"),r.a.createElement(C.a,{variant:"h5",component:"h2",gutterBottom:!0},"Try something else")),r.a.createElement("footer",{className:e.footer},r.a.createElement(Da.a,{maxWidth:"sm"},r.a.createElement(xa,null))))}}),r.a.createElement(Na.a,{from:"*",to:"/404"})))))),document.getElementById("root"))}},[[469,1,2]]]);
//# sourceMappingURL=main.279c6ba8.chunk.js.map